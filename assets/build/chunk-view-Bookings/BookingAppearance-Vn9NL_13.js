import{f as V,g as B,i as U,c as y,o as x,b as e,d as w,u as c,C as L,t as u,P as F,a as S,n as T,Q as g,R as m,S as v,T as C,h as P}from"../chunk-vendor-vue-CVODRAc9.js";import{d as A}from"../chunk-vendor-pinia-DSPKUyr1.js";import{a as f,u as M}from"../chunk-component-NotificationsBell-BlaTfaiw.js";import{a as $}from"../chunk-component-Sidebar-ChD_VDDH.js";import{B as j}from"./BookingFormPreview-CiRU9DIL.js";import{_ as I}from"../chunk-component-Card-DAbGoLxt.js";const k=V([]);let N=0;function D(){const p=(d,h="success",o=3e3)=>{const b=N++,_={id:b,message:d,type:h,visible:!0};return k.value.push(_),setTimeout(()=>{i(b)},o),b},i=d=>{const h=k.value.findIndex(o=>o.id===d);h!==-1&&k.value.splice(h,1)};return{toasts:k,showToast:p,removeToast:i,success:(d,h)=>p(d,"success",h),error:(d,h)=>p(d,"error",h),warning:(d,h)=>p(d,"warning",h),info:(d,h)=>p(d,"info",h)}}const E=A("bookings",{state:()=>({services:{items:[],loading:!1,error:null,pagination:{current_page:1,per_page:20,total:0,total_pages:0}},staff:{items:[],loading:!1,error:null,pagination:{current_page:1,per_page:20,total:0,total_pages:0}},appointments:{items:[],loading:!1,error:null,pagination:{current_page:1,per_page:20,total:0,total_pages:0},filters:{date_from:"",date_to:"",status:""}},settings:{general:{},url:{},calendar:{},company:{},customers:{},appointments:{},payments:{},appearance:{},business_hours:[],holidays:[],loading:!1,saving:!1,error:null}}),actions:{async fetchServices(p={}){var i,n,l;this.services.loading=!0,this.services.error=null;try{const s=await f.get("/services",{params:{page:this.services.pagination.current_page,per_page:this.services.pagination.per_page,...p}}),t=((i=s.data)==null?void 0:i.data)??s.data??{};this.services.items=(t.items||[]).map(d=>({...d,title:d.title??d.name_ar??d.name??"",duration:Number(d.duration??0),price:Number(d.price??0)})),this.services.pagination=t.pagination||this.services.pagination}catch(s){this.services.error=((l=(n=s.response)==null?void 0:n.data)==null?void 0:l.message)||s.message||"Failed to fetch services",console.error("Error fetching services:",s)}finally{this.services.loading=!1}},async createService(p){var i,n,l;this.services.loading=!0,this.services.error=null;try{const s={...p||{}};s.title&&!s.name&&(s.name=s.title),s.title&&!s.name_ar&&(s.name_ar=s.title);const t=await f.post("/services",s);return((i=t.data)==null?void 0:i.data)??t.data}catch(s){throw this.services.error=((l=(n=s.response)==null?void 0:n.data)==null?void 0:l.message)||s.message||"Failed to create service",s}finally{this.services.loading=!1}},async updateService(p,i){var n,l,s;this.services.loading=!0,this.services.error=null;try{const t={...i||{}};t.title&&!t.name&&(t.name=t.title),t.title&&!t.name_ar&&(t.name_ar=t.title);const d=await f.put(`/services/${p}`,t);return((n=d.data)==null?void 0:n.data)??d.data}catch(t){throw this.services.error=((s=(l=t.response)==null?void 0:l.data)==null?void 0:s.message)||t.message||"Failed to update service",t}finally{this.services.loading=!1}},async deleteService(p){var i,n;this.services.loading=!0,this.services.error=null;try{return await f.delete(`/services/${p}`),!0}catch(l){throw this.services.error=((n=(i=l.response)==null?void 0:i.data)==null?void 0:n.message)||l.message||"Failed to delete service",l}finally{this.services.loading=!1}},async fetchStaff(p={}){var i,n,l;this.staff.loading=!0,this.staff.error=null;try{const s=await f.get("/staff",{params:{page:this.staff.pagination.current_page,per_page:this.staff.pagination.per_page,...p}}),t=((i=s.data)==null?void 0:i.data)??s.data??{};this.staff.items=(t.items||[]).map(d=>({...d,full_name:d.full_name??d.name??""})),this.staff.pagination=t.pagination||this.staff.pagination}catch(s){this.staff.error=((l=(n=s.response)==null?void 0:n.data)==null?void 0:l.message)||s.message||"Failed to fetch staff",console.error("Error fetching staff:",s)}finally{this.staff.loading=!1}},async createStaff(p){var i,n,l;this.staff.loading=!0,this.staff.error=null;try{const s={...p||{}};s.full_name&&!s.name&&(s.name=s.full_name);const t=await f.post("/staff",s);return((i=t.data)==null?void 0:i.data)??t.data}catch(s){throw this.staff.error=((l=(n=s.response)==null?void 0:n.data)==null?void 0:l.message)||s.message||"Failed to create staff",s}finally{this.staff.loading=!1}},async updateStaff(p,i){var n,l,s;this.staff.loading=!0,this.staff.error=null;try{const t={...i||{}};t.full_name&&!t.name&&(t.name=t.full_name);const d=await f.put(`/staff/${p}`,t);return((n=d.data)==null?void 0:n.data)??d.data}catch(t){throw this.staff.error=((s=(l=t.response)==null?void 0:l.data)==null?void 0:s.message)||t.message||"Failed to update staff",t}finally{this.staff.loading=!1}},async deleteStaff(p){var i,n;this.staff.loading=!0,this.staff.error=null;try{return await f.delete(`/staff/${p}`),!0}catch(l){throw this.staff.error=((n=(i=l.response)==null?void 0:i.data)==null?void 0:n.message)||l.message||"Failed to delete staff",l}finally{this.staff.loading=!1}},async fetchAppointments(p={}){var i,n,l;this.appointments.loading=!0,this.appointments.error=null;try{const s=await f.get("/bookings",{params:{page:this.appointments.pagination.current_page,per_page:this.appointments.pagination.per_page,...this.appointments.filters,...p}}),t=((i=s.data)==null?void 0:i.data)??s.data??{};this.appointments.items=t.items||[],this.appointments.pagination=t.pagination||this.appointments.pagination}catch(s){this.appointments.error=((l=(n=s.response)==null?void 0:n.data)==null?void 0:l.message)||s.message||"Failed to fetch appointments",console.error("Error fetching appointments:",s)}finally{this.appointments.loading=!1}},async createAppointment(p){var i,n,l;this.appointments.loading=!0,this.appointments.error=null;try{const s=await f.post("/bookings",p);return((i=s.data)==null?void 0:i.data)??s.data}catch(s){throw this.appointments.error=((l=(n=s.response)==null?void 0:n.data)==null?void 0:l.message)||s.message||"Failed to create appointment",s}finally{this.appointments.loading=!1}},async updateAppointment(p,i){var n,l,s;this.appointments.loading=!0,this.appointments.error=null;try{const t=await f.put(`/bookings/${p}`,i);return((n=t.data)==null?void 0:n.data)??t.data}catch(t){throw this.appointments.error=((s=(l=t.response)==null?void 0:l.data)==null?void 0:s.message)||t.message||"Failed to update appointment",t}finally{this.appointments.loading=!1}},async deleteAppointment(p){var i,n;this.appointments.loading=!0,this.appointments.error=null;try{return await f.delete(`/bookings/${p}`),!0}catch(l){throw this.appointments.error=((n=(i=l.response)==null?void 0:i.data)==null?void 0:n.message)||l.message||"Failed to delete appointment",l}finally{this.appointments.loading=!1}},async fetchSettings(p){var i,n,l;this.settings.loading=!0,this.settings.error=null;try{const s=await f.get(`/booking/settings/${p}`),t=p==="business-hours"?"business_hours":p,d=((i=s.data)==null?void 0:i.data)??s.data;return this.settings[t]=d,d}catch(s){throw this.settings.error=((l=(n=s.response)==null?void 0:n.data)==null?void 0:l.message)||s.message||"Failed to fetch settings",s}finally{this.settings.loading=!1}},async saveSettings(p,i){var n,l,s;this.settings.saving=!0,this.settings.error=null;try{const t=await f.post(`/booking/settings/${p}`,i),d=p==="business-hours"?"business_hours":p,h=((n=t.data)==null?void 0:n.data)??t.data;return this.settings[d]=h,h}catch(t){throw this.settings.error=((s=(l=t.response)==null?void 0:l.data)==null?void 0:s.message)||t.message||"Failed to save settings",t}finally{this.settings.saving=!1}},async fetchAllSettings(){var p,i,n;this.settings.loading=!0,this.settings.error=null;try{const l=await f.get("/booking/settings/all"),s=((p=l.data)==null?void 0:p.data)??l.data;return this.settings.general=s.general||{},this.settings.url=s.url||{},this.settings.calendar=s.calendar||{},this.settings.company=s.company||{},this.settings.customers=s.customers||{},this.settings.appointments=s.appointments||{},this.settings.payments=s.payments||{},this.settings.appearance=s.appearance||{},this.settings.business_hours=s.business_hours||[],this.settings.holidays=s.holidays||[],s}catch(l){throw this.settings.error=((n=(i=l.response)==null?void 0:i.data)==null?void 0:n.message)||l.message||"Failed to fetch settings",l}finally{this.settings.loading=!1}}}}),q={class:"booking-appearance-page"},O={class:"appearance-header"},z={class:"header-content-wrapper"},R={class:"header-text-content"},J={class:"header-subtitle"},K={class:"appearance-container"},Q={class:"editor-panel"},G={class:"panel-header"},H={class:"editor-content"},W={key:0,class:"loading-overlay"},X={class:"settings-section"},Y={class:"section-title"},Z={class:"form-group"},ee={class:"color-input-group"},te={class:"form-group"},se={class:"color-input-group"},oe={class:"form-group"},ae={class:"color-input-group"},ne={class:"form-group"},le={class:"color-input-group"},re={class:"form-group"},ie={class:"color-input-group"},ce={class:"settings-section"},pe={class:"section-title"},de={class:"form-group"},ue={class:"checkbox-label"},ge={key:0,class:"form-group"},he={value:"top"},me={value:"bottom"},fe={class:"form-group"},_e={class:"checkbox-label"},ve={class:"form-group"},be={class:"checkbox-label"},ke={class:"settings-section"},ye={class:"section-title"},xe={class:"form-group"},we={class:"checkbox-label"},Se={class:"form-group"},Ve={class:"checkbox-label"},Be={class:"form-group"},Ue={class:"checkbox-label"},Le={class:"form-group"},Fe={class:"checkbox-label"},Te={class:"form-group"},Ce={class:"checkbox-label"},Pe={class:"form-group"},Ae={class:"settings-section"},Me={class:"section-title"},$e={class:"form-group"},je=["placeholder"],Ie={class:"form-group"},Ne=["placeholder"],De={class:"form-group"},Ee=["placeholder"],qe={class:"settings-section"},Oe={class:"section-title"},ze={class:"form-group"},Re=["placeholder"],Je={class:"form-group"},Ke=["placeholder"],Qe={class:"form-actions"},Ge=["disabled"],He={class:"preview-panel"},We={class:"panel-header"},Xe={class:"preview-content"},Ye={__name:"BookingAppearance",setup(p){const i=P(),n=E(),l=$(),s=D(),{t}=M(),d=()=>{i.push("/bookings")},h=B(()=>o.value),o=V({primary_color:"#BBA07A",secondary_color:"#764ba2",text_color:"#1e293b",background_color:"#ffffff",button_color:"#BBA07A",show_progress_tracker:!0,progress_tracker_position:"top",align_buttons_left:!1,invert_datepicker_colors:!1,required_employee:!1,show_service_duration:!0,show_service_price:!0,show_category_info:!0,show_service_info:!0,show_staff_info:!0,service_info_text:"",staff_info_text:"",labels:{next:"",previous:"",save:""},custom_css:"",custom_js:""});U(async()=>{o.value.labels={next:t("booking.nextButtonPlaceholder"),previous:t("booking.previousButtonPlaceholder"),save:t("booking.saveButtonPlaceholder")};try{if(await n.fetchSettings("appearance"),n.settings.appearance&&Object.keys(n.settings.appearance).length>0){const _=n.settings.appearance;o.value={...o.value,..._,labels:_.labels||o.value.labels}}}catch(_){console.error("Failed to load appearance settings:",_)}});const b=async()=>{try{await n.saveSettings("appearance",o.value);const _=l.locale==="ar"?"✅ تم حفظ إعدادات المظهر بنجاح":"✅ Appearance settings saved successfully";s.success(_)}catch(_){console.error("Failed to save appearance settings:",_);const a=l.locale==="ar"?"❌ فشل حفظ الإعدادات: "+(_.message||"خطأ غير معروف"):"❌ Failed to save settings: "+(_.message||"Unknown error");s.error(a)}};return(_,a)=>(x(),y("div",q,[e("div",O,[a[26]||(a[26]=e("div",{class:"header-logo-bg"},[e("img",{src:"https://asmaaljarallah.com/wp-content/uploads/2021/09/logo_light.png",alt:"Asmaa Logo",class:"header-logo-image"})],-1)),e("div",z,[e("button",{class:"back-button",onClick:d},[w(c(L),{icon:"cil-arrow-left"}),e("span",null,u(c(t)("common.back")||"Back"),1)]),e("div",R,[e("h1",null,[a[25]||(a[25]=e("svg",{class:"header-icon",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1)),F(" "+u(c(t)("booking.appearanceTitle")),1)]),e("p",J,u(c(t)("booking.appearanceSubtitle")),1)])])]),e("div",K,[e("div",Q,[e("div",G,[e("h2",null,u(c(t)("booking.appearanceSettings")),1)]),e("div",H,[c(n).settings.loading?(x(),y("div",W,[a[27]||(a[27]=e("div",{class:"spinner"},null,-1)),e("p",null,u(c(t)("booking.loadingSettings")),1)])):S("",!0),e("div",{class:T(["settings-sections",{loading:c(n).settings.loading}])},[e("div",X,[e("h3",Y,u(c(t)("booking.colorScheme")),1),e("div",Z,[e("label",null,u(c(t)("booking.primaryColor")),1),e("div",ee,[g(e("input",{type:"color","onUpdate:modelValue":a[0]||(a[0]=r=>o.value.primary_color=r),class:"color-picker"},null,512),[[m,o.value.primary_color]]),g(e("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=r=>o.value.primary_color=r),class:"form-control color-text"},null,512),[[m,o.value.primary_color]])])]),e("div",te,[e("label",null,u(c(t)("booking.secondaryColor")),1),e("div",se,[g(e("input",{type:"color","onUpdate:modelValue":a[2]||(a[2]=r=>o.value.secondary_color=r),class:"color-picker"},null,512),[[m,o.value.secondary_color]]),g(e("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=r=>o.value.secondary_color=r),class:"form-control color-text"},null,512),[[m,o.value.secondary_color]])])]),e("div",oe,[e("label",null,u(c(t)("booking.textColor")),1),e("div",ae,[g(e("input",{type:"color","onUpdate:modelValue":a[4]||(a[4]=r=>o.value.text_color=r),class:"color-picker"},null,512),[[m,o.value.text_color]]),g(e("input",{type:"text","onUpdate:modelValue":a[5]||(a[5]=r=>o.value.text_color=r),class:"form-control color-text"},null,512),[[m,o.value.text_color]])])]),e("div",ne,[e("label",null,u(c(t)("booking.backgroundColor")),1),e("div",le,[g(e("input",{type:"color","onUpdate:modelValue":a[6]||(a[6]=r=>o.value.background_color=r),class:"color-picker"},null,512),[[m,o.value.background_color]]),g(e("input",{type:"text","onUpdate:modelValue":a[7]||(a[7]=r=>o.value.background_color=r),class:"form-control color-text"},null,512),[[m,o.value.background_color]])])]),e("div",re,[e("label",null,u(c(t)("booking.buttonColor")),1),e("div",ie,[g(e("input",{type:"color","onUpdate:modelValue":a[8]||(a[8]=r=>o.value.button_color=r),class:"color-picker"},null,512),[[m,o.value.button_color]]),g(e("input",{type:"text","onUpdate:modelValue":a[9]||(a[9]=r=>o.value.button_color=r),class:"form-control color-text"},null,512),[[m,o.value.button_color]])])])]),e("div",ce,[e("h3",pe,u(c(t)("booking.formOptions")),1),e("div",de,[e("label",ue,[g(e("input",{type:"checkbox","onUpdate:modelValue":a[10]||(a[10]=r=>o.value.show_progress_tracker=r),class:"form-checkbox"},null,512),[[v,o.value.show_progress_tracker]]),e("span",null,u(c(t)("booking.showProgressTrackerLabel")),1)])]),o.value.show_progress_tracker?(x(),y("div",ge,[e("label",null,u(c(t)("booking.progressTrackerPositionLabel")),1),g(e("select",{"onUpdate:modelValue":a[11]||(a[11]=r=>o.value.progress_tracker_position=r),class:"form-control"},[e("option",he,u(c(t)("booking.positionTop")),1),e("option",me,u(c(t)("booking.positionBottom")),1)],512),[[C,o.value.progress_tracker_position]])])):S("",!0),e("div",fe,[e("label",_e,[g(e("input",{type:"checkbox","onUpdate:modelValue":a[12]||(a[12]=r=>o.value.align_buttons_left=r),class:"form-checkbox"},null,512),[[v,o.value.align_buttons_left]]),e("span",null,u(c(t)("booking.alignButtonsLeftLabel")),1)])]),e("div",ve,[e("label",be,[g(e("input",{type:"checkbox","onUpdate:modelValue":a[13]||(a[13]=r=>o.value.invert_datepicker_colors=r),class:"form-checkbox"},null,512),[[v,o.value.invert_datepicker_colors]]),e("span",null,u(c(t)("booking.invertDatepickerColorsLabel")),1)])])]),e("div",ke,[e("h3",ye,u(c(t)("booking.serviceStepLabel")),1),e("div",xe,[e("label",we,[g(e("input",{type:"checkbox","onUpdate:modelValue":a[14]||(a[14]=r=>o.value.show_category_info=r),class:"form-checkbox"},null,512),[[v,o.value.show_category_info]]),e("span",null,u(c(t)("booking.showCategoryInfoLabel")),1)])]),e("div",Se,[e("label",Ve,[g(e("input",{type:"checkbox","onUpdate:modelValue":a[15]||(a[15]=r=>o.value.show_service_info=r),class:"form-checkbox"},null,512),[[v,o.value.show_service_info]]),e("span",null,u(c(t)("booking.showServiceInfoLabel")),1)])]),e("div",Be,[e("label",Ue,[g(e("input",{type:"checkbox","onUpdate:modelValue":a[16]||(a[16]=r=>o.value.show_service_duration=r),class:"form-checkbox"},null,512),[[v,o.value.show_service_duration]]),e("span",null,u(c(t)("booking.showServiceDurationLabel")),1)])]),e("div",Le,[e("label",Fe,[g(e("input",{type:"checkbox","onUpdate:modelValue":a[17]||(a[17]=r=>o.value.show_service_price=r),class:"form-checkbox"},null,512),[[v,o.value.show_service_price]]),e("span",null,u(c(t)("booking.showServicePriceLabel")),1)])]),e("div",Te,[e("label",Ce,[g(e("input",{type:"checkbox","onUpdate:modelValue":a[18]||(a[18]=r=>o.value.required_employee=r),class:"form-checkbox"},null,512),[[v,o.value.required_employee]]),e("span",null,u(c(t)("booking.makeEmployeeRequiredLabel")),1)])]),e("div",Pe,[e("label",null,u(c(t)("booking.customServiceInfoTextLabel")),1),g(e("textarea",{"onUpdate:modelValue":a[19]||(a[19]=r=>o.value.service_info_text=r),class:"form-control",rows:"3",placeholder:"{service_info}"},null,512),[[m,o.value.service_info_text]])])]),e("div",Ae,[e("h3",Me,u(c(t)("booking.labelsTextLabel")),1),e("div",$e,[e("label",null,u(c(t)("booking.nextButtonTextLabel")),1),g(e("input",{type:"text","onUpdate:modelValue":a[20]||(a[20]=r=>o.value.labels.next=r),class:"form-control",placeholder:c(t)("booking.nextButtonPlaceholder")},null,8,je),[[m,o.value.labels.next]])]),e("div",Ie,[e("label",null,u(c(t)("booking.previousButtonTextLabel")),1),g(e("input",{type:"text","onUpdate:modelValue":a[21]||(a[21]=r=>o.value.labels.previous=r),class:"form-control",placeholder:c(t)("booking.previousButtonPlaceholder")},null,8,Ne),[[m,o.value.labels.previous]])]),e("div",De,[e("label",null,u(c(t)("booking.saveButtonTextLabel")),1),g(e("input",{type:"text","onUpdate:modelValue":a[22]||(a[22]=r=>o.value.labels.save=r),class:"form-control",placeholder:c(t)("booking.saveButtonPlaceholder")},null,8,Ee),[[m,o.value.labels.save]])])]),e("div",qe,[e("h3",Oe,u(c(t)("booking.advancedLabel")),1),e("div",ze,[e("label",null,u(c(t)("booking.customCSSLabel")),1),g(e("textarea",{"onUpdate:modelValue":a[23]||(a[23]=r=>o.value.custom_css=r),class:"form-control code-textarea",rows:"6",placeholder:c(t)("booking.customCSSPlaceholder")},null,8,Re),[[m,o.value.custom_css]])]),e("div",Je,[e("label",null,u(c(t)("booking.customJSLabel")),1),g(e("textarea",{"onUpdate:modelValue":a[24]||(a[24]=r=>o.value.custom_js=r),class:"form-control code-textarea",rows:"6",placeholder:c(t)("booking.customJSPlaceholder")},null,8,Ke),[[m,o.value.custom_js]])])]),e("div",Qe,[e("button",{onClick:b,class:"btn btn-primary",disabled:c(n).settings.saving},u(c(n).settings.saving?c(t)("booking.savingSettings"):c(t)("booking.saveSettings")),9,Ge)])],2)])]),e("div",He,[e("div",We,[e("h2",null,u(c(t)("booking.livePreview")),1)]),e("div",Xe,[w(j,{settings:h.value},null,8,["settings"])])])])]))}},Ze=I(Ye,[["__scopeId","data-v-82609cd9"]]),lt=Object.freeze(Object.defineProperty({__proto__:null,default:Ze},Symbol.toStringTag,{value:"Module"}));export{lt as B,D as a,E as u};
