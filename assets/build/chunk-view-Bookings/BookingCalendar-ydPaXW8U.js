import{f as C,g as v,w as b,c as M,o as x,b as o,R as V,n as m,P as f,t as k,u as d,V as B,d as S,W as $}from"../chunk-vendor-vue-9XB69CcG.js";import{i as D,d as A,e as T}from"../chunk-vendor-6xaPOP3o.js";import{u as _}from"../chunk-component-NotificationsBell-B08mqdYR.js";import{_ as E}from"../chunk-component-Card-CPZTx4Dn.js";const G={class:"booking-calendar-wrapper"},j={class:"view-controls"},N={class:"view-switcher"},O={class:"calendar-container"},P={__name:"BookingCalendar",props:{appointments:{type:Array,default:()=>[]},services:{type:Array,default:()=>[]},staff:{type:Array,default:()=>[]},viewMode:{type:String,default:"calendar"},locale:{type:String,default:"en"}},emits:["update:viewMode","eventClick","dateClick"],setup(r,{emit:p}){const{t:n}=_(),a=r,c=p,l=C(null),w=v(()=>({plugins:[D,A,T],initialView:"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},locale:a.locale==="ar"?"ar":"en",direction:a.locale==="ar"?"rtl":"ltr",events:g.value,eventClick:h,dateClick:y,editable:!1,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},height:"auto",buttonText:{today:n("booking.today",a.locale),month:n("booking.month",a.locale),week:n("booking.week",a.locale),day:n("booking.day",a.locale)}})),g=v(()=>a.appointments.map(e=>{const t=a.services.find(s=>s.id===e.service_id),i=a.staff.find(s=>s.id===e.staff_id);return{id:e.id,title:`${(t==null?void 0:t.title)||"Service"} - ${(i==null?void 0:i.full_name)||"Staff"}`,start:e.start_date,end:e.end_date,backgroundColor:u(e.status),borderColor:u(e.status),extendedProps:{appointmentData:e}}})),u=e=>({pending:"var(--asmaa-warning)",approved:"var(--asmaa-success)",cancelled:"var(--asmaa-danger)",completed:"var(--asmaa-primary)",rejected:"var(--asmaa-danger)"})[e]||"var(--asmaa-primary)",h=e=>{const t=e.event.extendedProps.appointmentData;c("eventClick",t)},y=e=>{c("dateClick",e.dateStr)};return b(()=>a.locale,()=>{if(l.value){const e=l.value.getApi();e.setOption("locale",a.locale==="ar"?"ar":"en"),e.setOption("direction",a.locale==="ar"?"rtl":"ltr")}}),(e,t)=>(x(),M("div",G,[o("div",j,[o("div",N,[o("button",{class:m(["view-btn",{active:r.viewMode==="calendar"}]),onClick:t[0]||(t[0]=i=>e.$emit("update:viewMode","calendar"))},[t[2]||(t[2]=o("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),f(" "+k(d(n)("booking.calendarView",r.locale)),1)],2),o("button",{class:m(["view-btn",{active:r.viewMode==="list"}]),onClick:t[1]||(t[1]=i=>e.$emit("update:viewMode","list"))},[t[3]||(t[3]=o("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)),f(" "+k(d(n)("booking.listView",r.locale)),1)],2)])]),V(o("div",O,[S(d($),{ref_key:"fullCalendar",ref:l,options:w.value},null,8,["options"])],512),[[B,r.viewMode==="calendar"]])]))}},I=E(P,[["__scopeId","data-v-5d5cf34f"]]);export{I as B};
