import{f as g,e as P,j as Re,m as Ee,c as f,o as u,b as t,d as l,t as a,u as e,w as i,Y as U,x as p,p as Oe,C as v,Z as He,R,V as E,h as re,F as N,g as T,_ as Ke,$ as z,a0 as O,l as Ge,P as m,s as H,z as We,a1 as Xe,a as j,X as K,a2 as y,a3 as w,a4 as L,a5 as G,a6 as W,a7 as X,a8 as Y,a9 as Ye}from"../chunk-vendor-vue-BKzcbwC-.js";import{a as Ze}from"../chunk-component-Sidebar-BkXV_oSu.js";import{u as Je}from"./BookingAppearance-BqK96WJN.js";import{u as Qe,a as we}from"../chunk-component-NotificationsBell-CyBx4swB.js";import{B as et}from"./BookingCalendar-BQDQnglB.js";import{H as tt}from"../chunk-component-HelpSection-B1vxldAY.js";import{u as st}from"../chunk-view-AppleWallet/Simulator-WLH8OaYC.js";import{_ as ot}from"../chunk-component-Card-D7ddNvJz.js";import"../chunk-vendor-Ltsl4QyH.js";import"../chunk-vendor-pinia-CsGkbfJ3.js";import"./BookingFormPreview-DDROoT34.js";import"../chunk-vendor-axios-B9ygI19o.js";import"../chunk-component-PageHeader-CI_3JpQM.js";const lt={class:"booking-page p-4"},at={class:"pos-header-top d-flex justify-content-between align-items-center mb-4"},it={class:"header-left d-flex align-items-center gap-3"},nt={class:"mb-0 fw-bold text-primary"},dt={class:"header-right d-flex gap-3"},ct={class:"nano-stats-bar mb-4"},rt={class:"stat-card-nano"},ut={class:"stat-icon-bg services"},mt={class:"stat-info"},vt={class:"stat-value"},ft={class:"stat-label"},_t={class:"stat-card-nano"},pt={class:"stat-icon-bg staff"},bt={class:"stat-info"},gt={class:"stat-value"},kt={class:"stat-label"},ht={class:"stat-card-nano"},yt={class:"stat-icon-bg approved"},Ct={class:"stat-info"},wt={class:"stat-value text-success"},St={class:"stat-label"},xt={class:"stat-card-nano"},Vt={class:"stat-icon-bg pending"},Nt={class:"stat-info"},Tt={class:"stat-value text-warning"},At={class:"stat-label"},Mt={class:"booking-content-wrapper"},Ft={class:"nano-panel"},$t={class:"panel-header d-flex justify-content-between align-items-center mb-4"},Bt={class:"fw-bold"},Dt={key:0,class:"text-center p-5"},Ut={key:1,class:"nano-grid"},It=["onClick"],qt={class:"item-badge"},zt={class:"item-icon-circle"},jt={class:"item-title"},Lt={class:"item-price-tag"},Pt={class:"item-actions-hover"},Rt={class:"nano-panel"},Et={class:"panel-header d-flex justify-content-between align-items-center mb-4"},Ot={class:"fw-bold"},Ht={key:0,class:"text-center p-5"},Kt={key:1,class:"nano-grid staff-grid"},Gt={class:"staff-avatar-large"},Wt={class:"item-title mt-3"},Xt={class:"text-muted small"},Yt={class:"staff-badges mt-2"},Zt={class:"item-actions-hover"},Jt={class:"nano-panel"},Qt={class:"panel-header mb-4"},es={class:"d-flex justify-content-between align-items-center mb-3"},ts={class:"fw-bold"},ss={class:"view-switcher"},os={class:"nano-filters-bar p-3 bg-tertiary rounded-4 mb-4"},ls={key:0,class:"calendar-container"},as={key:1,class:"appointments-list-view"},is={key:0,class:"text-center p-5"},ns={key:1,class:"appointments-list d-flex flex-column gap-3"},ds={class:"appt-date-box"},cs={class:"appt-day"},rs={class:"appt-month"},us={class:"appt-time"},ms={class:"appt-main-info flex-grow-1 ms-3"},vs={class:"appt-service fw-bold fs-5 text-primary"},fs={class:"appt-staff small text-muted"},_s={key:0,class:"appt-customer small text-muted"},ps={class:"appt-status-box px-3"},bs={class:"appt-actions d-flex gap-2"},gs={class:"nano-panel"},ks={class:"panel-header mb-4"},hs={class:"fw-bold"},ys={class:"nano-table-container"},Cs={class:"nano-table w-100"},ws={class:"text-start"},Ss={class:"text-end"},xs={class:"text-start fw-bold"},Vs={class:"text-end text-success fw-bold"},Ns={class:"nano-table-footer border-top mt-3 bg-light"},Ts={colspan:"3",class:"text-start fw-bold p-3"},As={class:"fw-bold p-3"},Ms={class:"text-end text-success fw-bold p-3"},Fs={class:"nano-modal-details p-3"},$s={class:"d-flex align-items-center gap-4 mb-4"},Bs={class:"item-icon-circle large bg-primary text-white"},Ds={class:"fw-bold mb-1"},Us={class:"row g-3"},Is={class:"stat-card-nano mini p-3 border rounded-4 text-center"},qs={class:"text-muted small"},zs={class:"fw-bold fs-5"},js={class:"stat-card-nano mini p-3 border rounded-4 text-center"},Ls={class:"text-muted small"},Ps={class:"fw-bold fs-5 text-success"},Rs={class:"stat-card-nano mini p-3 border rounded-4 text-center"},Es={class:"text-muted small"},Os={class:"fw-bold fs-5 text-primary"},Hs={class:"p-3"},Ks={class:"mb-3"},Gs={class:"form-label fw-bold"},Ws={class:"form-label fw-bold"},Xs={class:"form-label fw-bold"},Ys={class:"p-3"},Zs={class:"mb-3"},Js={class:"form-label fw-bold"},Qs={class:"mb-3"},eo={class:"form-label fw-bold"},to={class:"mb-3"},so={class:"form-label fw-bold"},oo={class:"p-3"},lo={class:"form-label fw-bold"},ao={value:0,disabled:""},io={key:0,value:0,disabled:""},no=["value"],co=["value"],ro=["value"],uo={class:"mb-3"},mo={__name:"Index",setup(vo){const{t:n}=Qe();Ze();const r=Je(),ue=Ee(),Se=Ge(),h=st(),A=g("services"),I=g("calendar"),Z=g(!1),J=g(!1),Q=g(!1),ee=g(!1),V=g(null),F=g(null),$=g(null),B=g(null),C=g(!1),xe=P(()=>[{id:"services",label:n("booking.servicesTab"),count:r.services.items.length},{id:"staff",label:n("booking.staffTab"),count:r.staff.items.length},{id:"appointments",label:n("booking.appointmentsTab"),count:r.appointments.items.length},{id:"analytics",label:n("booking.analyticsTab")}]),Ve=d=>{switch(d){case"services":return"cil-spreadsheet";case"staff":return"cil-user";case"appointments":return"cil-calendar";case"analytics":return"cil-chart-line";default:return"cil-list"}},Ne=d=>{switch(d){case"pending":return"warning";case"confirmed":return"info";case"completed":return"success";case"cancelled":return"danger";default:return"secondary"}},M=g({date_from:"",date_to:"",status:""}),S=g({title:"",duration:60,price:0}),x=g({full_name:"",email:"",phone:""}),b=g({customer_id:0,staff_id:0,service_id:0,booking_date:"",booking_time:"",status:"pending",notes:""}),D=g([]),te=g(!1),se=g("");let oe=null;const me=async(d="")=>{var s;te.value=!0;try{const c=await we.get("/customers",{params:{page:1,per_page:50,search:d||void 0,status:"active"},noCache:!0}),o=((s=c.data)==null?void 0:s.data)??c.data??{};D.value=o.items||[]}catch(c){console.error("Failed to fetch customers:",c),D.value=[]}finally{te.value=!1}},Te=async d=>{var o;const s=Number(d||0);if(!(!s||(D.value||[]).some(_=>Number(_.id)===s)))try{const _=await we.get(`/customers/${s}`,{noCache:!0}),k=((o=_.data)==null?void 0:o.data)??_.data??null;k&&k.id&&(D.value=[k,...D.value||[]])}catch{}},Ae=()=>{oe&&clearTimeout(oe),oe=setTimeout(()=>{me(se.value)},350)},ve=P(()=>{const d=r.appointments.items||[];let s=0,c=0,o=d.length;return d.forEach(k=>{k.status==="confirmed"||k.status==="approved"?s++:k.status==="pending"&&c++}),{approved:s,pending:c,total:o,revenue:0}}),fe=P(()=>{const d=r.appointments.items||[],s=new Map,c=new Set;return d.forEach(o=>{const _=`${o.staff_id||0}-${o.service_id||0}`;s.has(_)||s.set(_,{key:_,staffId:o.staff_id,serviceId:o.service_id,employeeName:ge(o.staff_id),serviceName:pe(o.service_id),total:0,approved:0,pending:0,rejected:0,cancelled:0,customersSet:new Set,newCustomers:0,revenue:0});const k=s.get(_);if(k.total++,o.status==="confirmed"||o.status==="approved"?k.approved++:o.status==="pending"?k.pending++:o.status==="rejected"?k.rejected++:o.status==="cancelled"&&k.cancelled++,o.customer_id){k.customersSet.add(o.customer_id);const Ce=String(o.customer_id);c.has(Ce)||(k.newCustomers++,c.add(Ce))}}),Array.from(s.values()).map(o=>({...o,customersTotal:o.customersSet.size}))}),_e=P(()=>fe.value.reduce((s,c)=>(s.total+=c.total,s.approved+=c.approved,s.pending+=c.pending,s.rejected+=c.rejected,s.cancelled+=c.cancelled,s.customersTotal+=c.customersTotal,s.newCustomers+=c.newCustomers,s.revenue+=c.revenue,s),{total:0,approved:0,pending:0,rejected:0,cancelled:0,customersTotal:0,newCustomers:0,revenue:0})),pe=d=>{const s=r.services.items.find(c=>Number(c.id)===Number(d));return s?s.title:"—"},Me=d=>{const s=r.services.items.find(c=>Number(c.id)===Number(d));return s?s.price:0},be=d=>{const s=r.services.items.find(c=>Number(c.id)===Number(d));return s?s.duration:0},Fe=d=>r.appointments.items.filter(s=>Number(s.service_id)===Number(d)).length,ge=d=>{const s=r.staff.items.find(c=>Number(c.id)===Number(d));return s?s.full_name:"—"},le=(d,s="full")=>{if(!d)return"—";const c=new Date(d);return isNaN(c.getTime())?d:s==="day"?c.getDate():s==="month"?c.toLocaleString("default",{month:"short"}):s==="time"?c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):c.toLocaleDateString()},q=d=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:3}).format(d||0),ke=d=>{V.value=d,ee.value=!0},ae=()=>{ee.value=!1,V.value=null},$e=d=>{const s=r.services.items.find(c=>Number(c.id)===Number(d));s&&ke(s)},ie=(d=null)=>{d?(F.value=d,S.value={title:d.title,duration:d.duration,price:d.price}):(F.value=null,S.value={title:"",duration:60,price:0}),Z.value=!0},ne=()=>{Z.value=!1,F.value=null},Be=async()=>{C.value=!0;try{F.value?(await r.updateService(F.value.id,S.value),h.success(n("booking.serviceUpdated")||"Service updated")):(await r.createService(S.value),h.success(n("booking.serviceAdded")||"Service added")),ne()}catch{h.error("Failed to save service")}finally{C.value=!1}},De=async d=>{if(confirm(n("common.confirmDelete")))try{await r.deleteService(d),h.success(n("booking.serviceDeleted"))}catch{h.error("Failed to delete service")}},he=(d=null)=>{d?($.value=d,x.value={full_name:d.full_name,email:d.email,phone:d.phone}):($.value=null,x.value={full_name:"",email:"",phone:""}),J.value=!0},de=()=>{J.value=!1,$.value=null},Ue=async()=>{C.value=!0;try{$.value?(await r.updateStaff($.value.id,x.value),h.success(n("booking.staffUpdated"))):(await r.createStaff(x.value),h.success(n("booking.staffAdded"))),de()}catch{h.error("Failed to save staff")}finally{C.value=!1}},Ie=async d=>{if(confirm(n("common.confirmDelete")))try{await r.deleteStaff(d),h.success(n("booking.staffDeleted"))}catch{h.error("Failed to delete staff")}},qe=()=>{ye()},ye=async(d=null)=>{if(me(),d){B.value=d;const s=new Date(d.start_date);b.value={customer_id:Number(d.customer_id),staff_id:Number(d.staff_id),service_id:Number(d.service_id),booking_date:s.toISOString().split("T")[0],booking_time:s.toTimeString().split(" ")[0].slice(0,5),status:d.status,notes:d.notes||""},await Te(d.customer_id)}else{B.value=null;const s=new Date;b.value={customer_id:0,staff_id:0,service_id:0,booking_date:s.toISOString().split("T")[0],booking_time:s.toTimeString().split(" ")[0].slice(0,5),status:"pending",notes:""}}Q.value=!0},ce=()=>{Q.value=!1,B.value=null},ze=async()=>{if(!b.value.customer_id||!b.value.service_id){h.error("Please select customer and service");return}C.value=!0;try{const d={...b.value,start_date:`${b.value.booking_date} ${b.value.booking_time}:00`};B.value?(await r.updateAppointment(B.value.id,d),h.success("Booking updated")):(await r.createAppointment(d),h.success("Booking added")),ce()}catch{h.error("Failed to save booking")}finally{C.value=!1}},je=async d=>{if(confirm(n("common.confirmDelete")))try{await r.deleteAppointment(d),h.success("Booking deleted")}catch{h.error("Failed to delete booking")}},Le=()=>{r.fetchAppointments(M.value)},Pe=d=>{Se.push({path:"/pos",query:{customer_id:d.customer_id,booking_id:d.id,service_id:d.service_id,staff_id:d.staff_id}})};return Re(()=>{r.prefetch(),ue.query.tab&&(A.value=ue.query.tab)}),(d,s)=>{const c=Oe("router-link");return u(),f("div",lt,[t("div",at,[t("div",it,[t("h2",nt,a(e(n)("booking.title")),1),l(e(U),{color:"gold",shape:"rounded-pill",class:"px-3 py-2 fw-bold text-dark"},{default:i(()=>[l(e(v),{icon:"cil-calendar",class:"me-1"}),m(" "+a(e(r).appointments.items.length)+" "+a(e(n)("booking.totalAppointments")),1)]),_:1})]),t("div",dt,[l(e(p),{color:"primary",class:"nano-btn",onClick:qe},{default:i(()=>[l(e(v),{icon:"cil-plus",class:"me-2"}),m(" "+a(e(n)("booking.addBooking")||e(n)("booking.addAppointment")),1)]),_:1}),l(c,{to:"/bookings/settings",class:"btn btn-secondary nano-btn-secondary"},{default:i(()=>[l(e(v),{icon:"cil-settings",class:"me-2"}),m(" "+a(e(n)("booking.settingsButton")),1)]),_:1}),l(c,{to:"/bookings/appearance",class:"btn btn-secondary nano-btn-secondary"},{default:i(()=>[l(e(v),{icon:"cil-paint-roller",class:"me-2"}),m(" "+a(e(n)("booking.appearanceButton")),1)]),_:1})])]),t("div",ct,[t("div",rt,[t("div",ut,[l(e(v),{icon:"cil-spreadsheet"})]),t("div",mt,[t("div",vt,a(e(r).services.items.length),1),t("div",ft,a(e(n)("booking.totalServices")),1)])]),t("div",_t,[t("div",pt,[l(e(v),{icon:"cil-user"})]),t("div",bt,[t("div",gt,a(e(r).staff.items.length),1),t("div",kt,a(e(n)("booking.totalStaff")),1)])]),t("div",ht,[t("div",yt,[l(e(v),{icon:"cil-check-circle"})]),t("div",Ct,[t("div",wt,a(ve.value.approved),1),t("div",St,a(e(n)("booking.approved")),1)])]),t("div",xt,[t("div",Vt,[l(e(v),{icon:"cil-clock"})]),t("div",Nt,[t("div",Tt,a(ve.value.pending),1),t("div",At,a(e(n)("booking.pending")),1)])])]),l(e(He),{variant:"pills",class:"nano-tabs mb-4"},{default:i(()=>[(u(!0),f(N,null,T(xe.value,o=>(u(),H(e(We),{key:o.id},{default:i(()=>[l(e(Xe),{active:A.value===o.id,onClick:_=>A.value=o.id,class:"nano-tab-link"},{default:i(()=>[l(e(v),{icon:Ve(o.id),class:"me-2"},null,8,["icon"]),m(" "+a(o.label)+" ",1),o.count!==void 0?(u(),H(e(U),{key:0,color:"primary",shape:"rounded-pill",class:"ms-2"},{default:i(()=>[m(a(o.count),1)]),_:2},1024)):j("",!0)]),_:2},1032,["active","onClick"])]),_:2},1024))),128))]),_:1}),t("div",Mt,[R(t("div",Ft,[t("div",$t,[t("h4",Bt,a(e(n)("booking.servicesTab")),1),l(e(p),{color:"primary",variant:"ghost",onClick:s[0]||(s[0]=o=>ie())},{default:i(()=>[l(e(v),{icon:"cil-plus",class:"me-1"}),m(" "+a(e(n)("booking.addService")),1)]),_:1})]),e(r).services.loading?(u(),f("div",Dt,[l(e(re),{color:"primary"})])):(u(),f("div",Ut,[(u(!0),f(N,null,T(e(r).services.items,o=>(u(),f("div",{key:o.id,class:"nano-item-card",onClick:_=>ke(o)},[t("div",qt,a(o.duration)+" "+a(e(n)("booking.min")),1),t("div",zt,[l(e(v),{icon:"cil-spreadsheet"})]),t("h5",jt,a(o.title),1),t("div",Lt,a(q(o.price)),1),t("div",Pt,[l(e(p),{size:"sm",color:"info",variant:"ghost",onClick:K(_=>ie(o),["stop"])},{default:i(()=>[l(e(v),{icon:"cil-pencil"})]),_:1},8,["onClick"]),l(e(p),{size:"sm",color:"danger",variant:"ghost",onClick:K(_=>De(o.id),["stop"])},{default:i(()=>[l(e(v),{icon:"cil-trash"})]),_:1},8,["onClick"])])],8,It))),128))]))],512),[[E,A.value==="services"]]),R(t("div",Rt,[t("div",Et,[t("h4",Ot,a(e(n)("booking.staffTab")),1),l(e(p),{color:"primary",variant:"ghost",onClick:s[1]||(s[1]=o=>he())},{default:i(()=>[l(e(v),{icon:"cil-plus",class:"me-1"}),m(" "+a(e(n)("booking.addStaff")),1)]),_:1})]),e(r).staff.loading?(u(),f("div",Ht,[l(e(re),{color:"primary"})])):(u(),f("div",Kt,[(u(!0),f(N,null,T(e(r).staff.items,o=>{var _;return u(),f("div",{key:o.id,class:"nano-item-card staff-card"},[t("div",Gt,a((_=o.full_name)==null?void 0:_.charAt(0)),1),t("h5",Wt,a(o.full_name),1),t("p",Xt,a(o.email),1),t("div",Yt,[l(e(U),{color:"success",shape:"rounded-pill"},{default:i(()=>[...s[22]||(s[22]=[m("Available",-1)])]),_:1})]),t("div",Zt,[l(e(p),{size:"sm",color:"info",variant:"ghost",onClick:K(k=>he(o),["stop"])},{default:i(()=>[l(e(v),{icon:"cil-pencil"})]),_:1},8,["onClick"]),l(e(p),{size:"sm",color:"danger",variant:"ghost",onClick:K(k=>Ie(o.id),["stop"])},{default:i(()=>[l(e(v),{icon:"cil-trash"})]),_:1},8,["onClick"])])])}),128))]))],512),[[E,A.value==="staff"]]),R(t("div",Jt,[t("div",Qt,[t("div",es,[t("h4",ts,a(e(n)("booking.appointmentsTab")),1),t("div",ss,[l(e(Ke),null,{default:i(()=>[l(e(p),{color:I.value==="calendar"?"primary":"secondary",variant:"outline",onClick:s[2]||(s[2]=o=>I.value="calendar")},{default:i(()=>[l(e(v),{icon:"cil-calendar",class:"me-1"}),m(a(e(n)("booking.calendarView")),1)]),_:1},8,["color"]),l(e(p),{color:I.value==="list"?"primary":"secondary",variant:"outline",onClick:s[3]||(s[3]=o=>I.value="list")},{default:i(()=>[l(e(v),{icon:"cil-list",class:"me-1"}),m(a(e(n)("booking.listView")),1)]),_:1},8,["color"])]),_:1})])]),t("div",os,[l(e(z),{class:"g-3"},{default:i(()=>[l(e(y),{md:"3"},{default:i(()=>[s[23]||(s[23]=t("label",{class:"small fw-bold text-muted mb-1"},"From",-1)),l(e(w),{type:"date",modelValue:M.value.date_from,"onUpdate:modelValue":s[4]||(s[4]=o=>M.value.date_from=o)},null,8,["modelValue"])]),_:1}),l(e(y),{md:"3"},{default:i(()=>[s[24]||(s[24]=t("label",{class:"small fw-bold text-muted mb-1"},"To",-1)),l(e(w),{type:"date",modelValue:M.value.date_to,"onUpdate:modelValue":s[5]||(s[5]=o=>M.value.date_to=o)},null,8,["modelValue"])]),_:1}),l(e(y),{md:"3"},{default:i(()=>[s[26]||(s[26]=t("label",{class:"small fw-bold text-muted mb-1"},"Status",-1)),l(e(L),{modelValue:M.value.status,"onUpdate:modelValue":s[6]||(s[6]=o=>M.value.status=o)},{default:i(()=>[...s[25]||(s[25]=[t("option",{value:""},"All Statuses",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"confirmed"},"Confirmed",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"cancelled"},"Cancelled",-1)])]),_:1},8,["modelValue"])]),_:1}),l(e(y),{md:"3",class:"d-flex align-items-end"},{default:i(()=>[l(e(p),{color:"primary",class:"w-100",onClick:Le},{default:i(()=>[l(e(v),{icon:"cil-filter",class:"me-1"}),s[27]||(s[27]=m("Filter ",-1))]),_:1})]),_:1})]),_:1})])]),I.value==="calendar"?(u(),f("div",ls,[l(et)])):(u(),f("div",as,[e(r).appointments.loading?(u(),f("div",is,[l(e(re),{color:"primary"})])):(u(),f("div",ns,[(u(!0),f(N,null,T(e(r).appointments.items,o=>(u(),f("div",{key:o.id,class:"nano-appointment-card"},[t("div",ds,[t("div",cs,a(le(o.start_date,"day")),1),t("div",rs,a(le(o.start_date,"month")),1),t("div",us,a(le(o.start_date,"time")),1)]),t("div",ms,[t("div",vs,a(pe(o.service_id)),1),t("div",fs,[l(e(v),{icon:"cil-user",class:"me-1"}),m(" "+a(e(n)("booking.with"))+": "+a(ge(o.staff_id)),1)]),o.customer_name?(u(),f("div",_s,[l(e(v),{icon:"cil-people",class:"me-1"}),m(" "+a(o.customer_name),1)])):j("",!0)]),t("div",ps,[l(e(U),{color:Ne(o.status),shape:"rounded-pill",class:"px-3 py-2"},{default:i(()=>[m(a(e(n)(`booking.${o.status}`)),1)]),_:2},1032,["color"])]),t("div",bs,[["completed","in_progress"].includes(o.status)?(u(),H(e(p),{key:0,color:"success",variant:"ghost",onClick:_=>Pe(o),title:"Checkout"},{default:i(()=>[l(e(v),{icon:"cil-cart"})]),_:1},8,["onClick"])):j("",!0),l(e(p),{color:"info",variant:"ghost",onClick:_=>ye(o)},{default:i(()=>[l(e(v),{icon:"cil-pencil"})]),_:1},8,["onClick"]),l(e(p),{color:"danger",variant:"ghost",onClick:_=>je(o.id)},{default:i(()=>[l(e(v),{icon:"cil-trash"})]),_:1},8,["onClick"])])]))),128))]))]))],512),[[E,A.value==="appointments"]]),R(t("div",gs,[t("div",ks,[t("h4",hs,a(e(n)("booking.analyticsTab")),1)]),t("div",ys,[t("table",Cs,[t("thead",null,[t("tr",null,[t("th",ws,a(e(n)("booking.analyticsService")),1),t("th",null,a(e(n)("booking.analyticsDuration")),1),t("th",null,a(e(n)("booking.analyticsPrice")),1),t("th",null,a(e(n)("booking.analyticsAppointments")),1),t("th",Ss,a(e(n)("booking.analyticsRevenue")),1),t("th",null,a(e(n)("booking.analyticsAvgDuration")),1),t("th",null,a(e(n)("booking.analyticsActions")),1)])]),t("tbody",null,[(u(!0),f(N,null,T(fe.value,o=>(u(),f("tr",{key:o.key,class:"nano-table-row"},[t("td",xs,a(o.serviceName),1),t("td",null,a(be(o.serviceId))+" "+a(e(n)("booking.min")),1),t("td",null,a(q(Me(o.serviceId))),1),t("td",null,[l(e(U),{color:"primary",shape:"rounded-pill"},{default:i(()=>[m(a(o.total),1)]),_:2},1024)]),t("td",Vs,a(q(o.revenue)),1),t("td",null,a(o.total>0?(o.total*be(o.serviceId)/o.total).toFixed(0):0)+" "+a(e(n)("booking.min")),1),t("td",null,[l(e(p),{size:"sm",color:"primary",variant:"ghost",onClick:_=>$e(o.serviceId)},{default:i(()=>[l(e(v),{icon:"cil-external-link"})]),_:1},8,["onClick"])])]))),128)),t("tr",Ns,[t("td",Ts,a(e(n)("booking.analyticsTotal")),1),t("td",As,a(_e.value.total),1),t("td",Ms,a(q(_e.value.revenue)),1),s[28]||(s[28]=t("td",{colspan:"2",class:"p-3"},null,-1))])])])])],512),[[E,A.value==="analytics"]])]),l(e(O),{visible:ee.value,onClose:ae,size:"lg",alignment:"center"},{default:i(()=>[l(e(G),null,{default:i(()=>[l(e(W),null,{default:i(()=>[l(e(v),{icon:"cil-spreadsheet",class:"me-2"}),m(a(e(n)("booking.serviceDetails")),1)]),_:1})]),_:1}),V.value?(u(),H(e(X),{key:0},{default:i(()=>[t("div",Fs,[t("div",$s,[t("div",Bs,[l(e(v),{icon:"cil-spreadsheet",size:"xl"})]),t("div",null,[t("h3",Ds,a(V.value.title),1),l(e(U),{color:"gold",shape:"rounded-pill",class:"px-3"},{default:i(()=>[m(a(V.value.category_id||"General"),1)]),_:1})])]),t("div",Us,[l(e(y),{md:"4"},{default:i(()=>[t("div",Is,[t("label",qs,a(e(n)("booking.duration")),1),t("div",zs,a(V.value.duration)+" "+a(e(n)("booking.minutes")),1)])]),_:1}),l(e(y),{md:"4"},{default:i(()=>[t("div",js,[t("label",Ls,a(e(n)("booking.price")),1),t("div",Ps,a(q(V.value.price)),1)])]),_:1}),l(e(y),{md:"4"},{default:i(()=>[t("div",Rs,[t("label",Es,a(e(n)("booking.analyticsAppointments")),1),t("div",Os,a(Fe(V.value.id)),1)])]),_:1})])])]),_:1})):j("",!0),l(e(Y),null,{default:i(()=>[l(e(p),{color:"secondary",variant:"ghost",onClick:ae},{default:i(()=>[m(a(e(n)("booking.close")),1)]),_:1}),l(e(p),{color:"primary",class:"nano-btn",onClick:s[7]||(s[7]=()=>{ae(),ie(V.value)})},{default:i(()=>[l(e(v),{icon:"cil-pencil",class:"me-2"}),m(a(e(n)("booking.edit")),1)]),_:1})]),_:1})]),_:1},8,["visible"]),l(e(O),{visible:Z.value,onClose:ne,size:"lg",alignment:"center"},{default:i(()=>[l(e(G),null,{default:i(()=>[l(e(W),null,{default:i(()=>[m(a(F.value?e(n)("booking.editService"):e(n)("booking.addService")),1)]),_:1})]),_:1}),l(e(X),null,{default:i(()=>[t("div",Hs,[t("div",Ks,[t("label",Gs,a(e(n)("booking.serviceName"))+" *",1),l(e(w),{modelValue:S.value.title,"onUpdate:modelValue":s[8]||(s[8]=o=>S.value.title=o),required:""},null,8,["modelValue"])]),l(e(z),{class:"g-3"},{default:i(()=>[l(e(y),{md:"6"},{default:i(()=>[t("label",Ws,a(e(n)("booking.duration"))+" ("+a(e(n)("booking.minutes"))+") *",1),l(e(w),{modelValue:S.value.duration,"onUpdate:modelValue":s[9]||(s[9]=o=>S.value.duration=o),modelModifiers:{number:!0},type:"number",min:"1",required:""},null,8,["modelValue"])]),_:1}),l(e(y),{md:"6"},{default:i(()=>[t("label",Xs,a(e(n)("booking.price"))+" *",1),l(e(w),{modelValue:S.value.price,"onUpdate:modelValue":s[10]||(s[10]=o=>S.value.price=o),modelModifiers:{number:!0},type:"number",step:"0.01",min:"0",required:""},null,8,["modelValue"])]),_:1})]),_:1})])]),_:1}),l(e(Y),null,{default:i(()=>[l(e(p),{color:"secondary",variant:"ghost",onClick:ne},{default:i(()=>[m(a(e(n)("booking.cancel")),1)]),_:1}),l(e(p),{color:"primary",class:"nano-btn",onClick:Be,disabled:C.value},{default:i(()=>[m(a(C.value?e(n)("booking.saving"):e(n)("booking.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["visible"]),l(e(O),{visible:J.value,onClose:de,size:"lg",alignment:"center"},{default:i(()=>[l(e(G),null,{default:i(()=>[l(e(W),null,{default:i(()=>[m(a($.value?e(n)("booking.editStaff"):e(n)("booking.addStaff")),1)]),_:1})]),_:1}),l(e(X),null,{default:i(()=>[t("div",Ys,[t("div",Zs,[t("label",Js,a(e(n)("booking.fullName"))+" *",1),l(e(w),{modelValue:x.value.full_name,"onUpdate:modelValue":s[11]||(s[11]=o=>x.value.full_name=o),required:""},null,8,["modelValue"])]),t("div",Qs,[t("label",eo,a(e(n)("booking.email"))+" *",1),l(e(w),{modelValue:x.value.email,"onUpdate:modelValue":s[12]||(s[12]=o=>x.value.email=o),type:"email",required:""},null,8,["modelValue"])]),t("div",to,[t("label",so,a(e(n)("booking.phone")),1),l(e(w),{modelValue:x.value.phone,"onUpdate:modelValue":s[13]||(s[13]=o=>x.value.phone=o),type:"tel"},null,8,["modelValue"])])])]),_:1}),l(e(Y),null,{default:i(()=>[l(e(p),{color:"secondary",variant:"ghost",onClick:de},{default:i(()=>[m(a(e(n)("booking.cancel")),1)]),_:1}),l(e(p),{color:"primary",class:"nano-btn",onClick:Ue,disabled:C.value},{default:i(()=>[m(a(C.value?e(n)("booking.saving"):e(n)("booking.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["visible"]),l(e(O),{visible:Q.value,onClose:ce,size:"lg",alignment:"center"},{default:i(()=>[l(e(G),null,{default:i(()=>[l(e(W),null,{default:i(()=>[m(a(B.value?"Edit Booking":"Add Booking"),1)]),_:1})]),_:1}),l(e(X),null,{default:i(()=>[t("div",oo,[l(e(z),{class:"g-3 mb-3"},{default:i(()=>[l(e(y),{md:"8"},{default:i(()=>[t("label",lo,a(e(n)("invoices.customer")||"Customer")+" *",1),l(e(w),{modelValue:se.value,"onUpdate:modelValue":s[14]||(s[14]=o=>se.value=o),type:"text",placeholder:e(n)("common.search")||"Search...",onInput:Ae,class:"mb-2"},null,8,["modelValue","placeholder"]),l(e(L),{modelValue:b.value.customer_id,"onUpdate:modelValue":s[15]||(s[15]=o=>b.value.customer_id=o),modelModifiers:{number:!0},required:""},{default:i(()=>[t("option",ao,a(e(n)("common.select")||"Select..."),1),te.value?(u(),f("option",io,"Loading...")):j("",!0),(u(!0),f(N,null,T(D.value,o=>(u(),f("option",{key:o.id,value:Number(o.id)},a(o.name||"—")+a(o.phone?` (${o.phone})`:""),9,no))),128))]),_:1},8,["modelValue"])]),_:1}),l(e(y),{md:"4"},{default:i(()=>[s[30]||(s[30]=t("label",{class:"form-label fw-bold"},"Status",-1)),l(e(L),{modelValue:b.value.status,"onUpdate:modelValue":s[16]||(s[16]=o=>b.value.status=o)},{default:i(()=>[...s[29]||(s[29]=[t("option",{value:"pending"},"Pending",-1),t("option",{value:"confirmed"},"Confirmed",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"cancelled"},"Cancelled",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(e(z),{class:"g-3 mb-3"},{default:i(()=>[l(e(y),{md:"6"},{default:i(()=>[s[32]||(s[32]=t("label",{class:"form-label fw-bold"},"Service *",-1)),l(e(L),{modelValue:b.value.service_id,"onUpdate:modelValue":s[17]||(s[17]=o=>b.value.service_id=o),modelModifiers:{number:!0},required:""},{default:i(()=>[s[31]||(s[31]=t("option",{value:0,disabled:""},"Select service...",-1)),(u(!0),f(N,null,T(e(r).services.items,o=>(u(),f("option",{key:o.id,value:Number(o.id)},a(o.title),9,co))),128))]),_:1},8,["modelValue"])]),_:1}),l(e(y),{md:"6"},{default:i(()=>[s[34]||(s[34]=t("label",{class:"form-label fw-bold"},"Staff",-1)),l(e(L),{modelValue:b.value.staff_id,"onUpdate:modelValue":s[18]||(s[18]=o=>b.value.staff_id=o),modelModifiers:{number:!0}},{default:i(()=>[s[33]||(s[33]=t("option",{value:0},"Any",-1)),(u(!0),f(N,null,T(e(r).staff.items,o=>(u(),f("option",{key:o.id,value:Number(o.id)},a(o.full_name),9,ro))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(e(z),{class:"g-3 mb-3"},{default:i(()=>[l(e(y),{md:"6"},{default:i(()=>[s[35]||(s[35]=t("label",{class:"form-label fw-bold"},"Date *",-1)),l(e(w),{modelValue:b.value.booking_date,"onUpdate:modelValue":s[19]||(s[19]=o=>b.value.booking_date=o),type:"date",required:""},null,8,["modelValue"])]),_:1}),l(e(y),{md:"6"},{default:i(()=>[s[36]||(s[36]=t("label",{class:"form-label fw-bold"},"Time *",-1)),l(e(w),{modelValue:b.value.booking_time,"onUpdate:modelValue":s[20]||(s[20]=o=>b.value.booking_time=o),type:"time",required:""},null,8,["modelValue"])]),_:1})]),_:1}),t("div",uo,[s[37]||(s[37]=t("label",{class:"form-label fw-bold"},"Notes",-1)),l(e(Ye),{modelValue:b.value.notes,"onUpdate:modelValue":s[21]||(s[21]=o=>b.value.notes=o),rows:"3",placeholder:"Optional notes..."},null,8,["modelValue"])])])]),_:1}),l(e(Y),null,{default:i(()=>[l(e(p),{color:"secondary",variant:"ghost",onClick:ce},{default:i(()=>[m(a(e(n)("booking.cancel")),1)]),_:1}),l(e(p),{color:"primary",class:"nano-btn",onClick:ze,disabled:C.value},{default:i(()=>[m(a(C.value?e(n)("booking.saving"):e(n)("booking.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["visible"]),l(tt,{"page-key":"booking"})])}}},No=ot(mo,[["__scopeId","data-v-c91e978b"]]);export{No as default};
