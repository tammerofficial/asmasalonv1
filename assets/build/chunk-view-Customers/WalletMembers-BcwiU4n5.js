import{f as b,k as T,c as n,o as r,d,s as f,w as m,u as s,F as g,g as w,j as V,x as k,P as y,C as p,t as o,b as t,Y as F,n as I,X as N}from"../chunk-vendor-vue-DkCSGS5r.js";import{u as $,a as C}from"../chunk-component-NotificationsBell-CdT4gVQ0.js";import{u as z}from"../chunk-view-AppleWallet/Simulator-f79KHPiS.js";import{P as D}from"../chunk-component-PageHeader-2UM0PeLN.js";import{L as R}from"../chunk-component-LoadingSpinner-BDznbj6f.js";import{E as j}from"../chunk-component-EmptyState-C_n04Mxq.js";import{_ as A}from"../chunk-component-Card-B6TBnHC7.js";import"../chunk-vendor-6xaPOP3o.js";import"../chunk-vendor-charts-C66rl4lP.js";import"../chunk-vendor-pinia-BW6wRy0H.js";import"../chunk-vendor-axios-B9ygI19o.js";const H={class:"wallet-members-page"},U={key:2,class:"members-grid"},X=["onClick"],Y={class:"member-header"},q={class:"member-name"},G={class:"member-email text-muted small"},J={class:"passes-container"},K={class:"pass-top"},O={class:"pass-type-label"},Q={class:"pass-content"},Z={key:0,class:"pass-data"},ss={class:"data-label"},es={class:"data-value"},ts={key:1,class:"pass-data"},as={class:"data-label"},os={class:"data-value small"},ls={key:2,class:"pass-data"},rs={class:"data-label"},cs={class:"data-value small"},is={class:"pass-footer"},ns={__name:"WalletMembers",setup(ds){const{t:e}=$(),x=z(),M=V(),u=b([]),_=b(!1),v=async()=>{var a;_.value=!0;try{const i=await C.get("/apple-wallet/members",{noCache:!0});u.value=((a=i.data)==null?void 0:a.data)||i.data||[]}catch(i){console.error("Error loading wallet members:",i),x.error(e("common.errorLoading"))}finally{_.value=!1}},P=a=>{M.push(`/customers/${a}/profile`)},B=a=>{const i=C.baseURL+"/apple-wallet/pass/"+a.serial_number;window.open(i,"_blank")},L=a=>{switch(a){case"loyalty":return"cil-star";case"membership":return"cil-credit-card";case"commissions":return"cil-money";case"programs":return"cil-list";default:return"cil-wallet"}},S=a=>{switch(a){case"loyalty":return e("loyalty.title");case"membership":return e("memberships.title");case"commissions":return e("commissions.title");case"programs":return e("nav.programsSettings");default:return"Apple Wallet"}},W=(a,i)=>{var c,l,h;try{const E=((c=a.pass_data)==null?void 0:c.storeCard)||{};return i==="plan"&&((h=(l=E.primaryFields)==null?void 0:l[0])==null?void 0:h.value)||"—"}catch{return"—"}};return T(v),(a,i)=>(r(),n("div",H,[d(D,{title:s(e)("customers.walletMembers"),subtitle:s(e)("customers.walletMembersSubtitle")},{icon:m(()=>[d(s(p),{icon:"cil-wallet"})]),actions:m(()=>[d(s(k),{color:"primary",class:"btn-primary-custom",onClick:v},{default:m(()=>[d(s(p),{icon:"cil-reload",class:"me-2"}),y(" "+o(s(e)("common.refresh")),1)]),_:1})]),_:1},8,["title","subtitle"]),_.value?(r(),f(R,{key:0,text:s(e)("common.loading")},null,8,["text"])):u.value.length===0?(r(),f(j,{key:1,title:s(e)("customers.noWalletMembers"),description:s(e)("customers.noWalletMembersDesc"),"icon-color":"gray"},null,8,["title","description"])):(r(),n("div",U,[(r(!0),n(g,null,w(u.value,c=>(r(),n("div",{key:c.id,class:"member-wallet-card"},[t("div",{class:"member-info",onClick:l=>P(c.id)},[t("div",Y,[t("strong",q,o(c.display_name),1),d(s(F),{color:"info",class:"points-badge"},{default:m(()=>[d(s(p),{icon:"cil-star",class:"me-1"}),y(" "+o(c.loyalty_points||0)+" "+o(s(e)("customers.points")),1)]),_:2},1024)]),t("div",G,o(c.user_email),1)],8,X),t("div",J,[(r(!0),n(g,null,w(c.passes,l=>(r(),n("div",{key:l.id,class:I(["apple-pass-visual",l.pass_type])},[t("div",K,[d(s(p),{icon:L(l.pass_type),class:"pass-icon"},null,8,["icon"]),t("span",O,o(S(l.pass_type)),1)]),t("div",Q,[l.pass_type==="loyalty"?(r(),n("div",Z,[t("div",ss,o(s(e)("customers.points")),1),t("div",es,o(c.loyalty_points||0),1)])):l.pass_type==="membership"?(r(),n("div",ts,[t("div",as,o(s(e)("memberships.plan")),1),t("div",os,o(W(l,"plan")),1)])):(r(),n("div",ls,[t("div",rs,o(s(e)("common.status")),1),t("div",cs,o(s(e)("common.active")),1)]))]),t("div",is,[d(s(k),{color:"light",size:"sm",class:"download-pass-btn",onClick:N(h=>B(l),["stop"])},{default:m(()=>[d(s(p),{icon:"cil-cloud-download",class:"me-1"}),y(" "+o(s(e)("common.view")),1)]),_:1},8,["onClick"])])],2))),128))])]))),128))]))]))}},ks=A(ns,[["__scopeId","data-v-f923aa31"]]);export{ks as default};
