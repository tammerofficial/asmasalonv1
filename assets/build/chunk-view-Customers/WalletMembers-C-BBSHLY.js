import{f as b,i as T,c as n,o as r,d,s as f,p as m,u as s,F as g,k as w,h as V,x as k,P as y,C as p,t as o,b as t,Y as F,n as I,W as N}from"../chunk-vendor-vue-CVODRAc9.js";import{u as $,a as C}from"../chunk-component-NotificationsBell-Bqoxw3gb.js";import{a as z}from"../chunk-view-Bookings/BookingAppearance-bsKTQ7Gu.js";import{P as D}from"../chunk-component-PageHeader-DIMefZ9l.js";import{L as R}from"../chunk-component-LoadingSpinner-DYzABkFM.js";import{E as A}from"../chunk-component-EmptyState-B8o9iOHP.js";import{_ as H}from"../chunk-component-Card-DAbGoLxt.js";import"../chunk-vendor-6xaPOP3o.js";import"../chunk-vendor-charts-C66rl4lP.js";import"../chunk-vendor-pinia-DSPKUyr1.js";import"../chunk-vendor-axios-B9ygI19o.js";import"../chunk-component-Sidebar-EPa-hzVC.js";import"../chunk-view-Bookings/BookingFormPreview-CDH9ZIF-.js";const U={class:"wallet-members-page"},Y={key:2,class:"members-grid"},j=["onClick"],q={class:"member-header"},G={class:"member-name"},J={class:"member-email text-muted small"},K={class:"passes-container"},O={class:"pass-top"},Q={class:"pass-type-label"},X={class:"pass-content"},Z={key:0,class:"pass-data"},ss={class:"data-label"},es={class:"data-value"},ts={key:1,class:"pass-data"},as={class:"data-label"},os={class:"data-value small"},ls={key:2,class:"pass-data"},rs={class:"data-label"},is={class:"data-value small"},cs={class:"pass-footer"},ns={__name:"WalletMembers",setup(ds){const{t:e}=$(),x=z(),M=V(),u=b([]),_=b(!1),v=async()=>{var a;_.value=!0;try{const c=await C.get("/apple-wallet/members",{noCache:!0});u.value=((a=c.data)==null?void 0:a.data)||c.data||[]}catch(c){console.error("Error loading wallet members:",c),x.error(e("common.errorLoading"))}finally{_.value=!1}},P=a=>{M.push(`/customers/${a}/profile`)},B=a=>{const c=C.baseURL+"/apple-wallet/pass/"+a.serial_number;window.open(c,"_blank")},L=a=>{switch(a){case"loyalty":return"cil-star";case"membership":return"cil-credit-card";case"commissions":return"cil-money";case"programs":return"cil-list";default:return"cil-wallet"}},W=a=>{switch(a){case"loyalty":return e("loyalty.title");case"membership":return e("memberships.title");case"commissions":return e("commissions.title");case"programs":return e("nav.programsSettings");default:return"Apple Wallet"}},S=(a,c)=>{var i,l,h;try{const E=((i=a.pass_data)==null?void 0:i.storeCard)||{};return c==="plan"&&((h=(l=E.primaryFields)==null?void 0:l[0])==null?void 0:h.value)||"—"}catch{return"—"}};return T(v),(a,c)=>(r(),n("div",U,[d(D,{title:s(e)("customers.walletMembers"),subtitle:s(e)("customers.walletMembersSubtitle")},{icon:m(()=>[d(s(p),{icon:"cil-wallet"})]),actions:m(()=>[d(s(k),{color:"primary",class:"btn-primary-custom",onClick:v},{default:m(()=>[d(s(p),{icon:"cil-reload",class:"me-2"}),y(" "+o(s(e)("common.refresh")),1)]),_:1})]),_:1},8,["title","subtitle"]),_.value?(r(),f(R,{key:0,text:s(e)("common.loading")},null,8,["text"])):u.value.length===0?(r(),f(A,{key:1,title:s(e)("customers.noWalletMembers"),description:s(e)("customers.noWalletMembersDesc"),"icon-color":"gray"},null,8,["title","description"])):(r(),n("div",Y,[(r(!0),n(g,null,w(u.value,i=>(r(),n("div",{key:i.id,class:"member-wallet-card"},[t("div",{class:"member-info",onClick:l=>P(i.id)},[t("div",q,[t("strong",G,o(i.display_name),1),d(s(F),{color:"info",class:"points-badge"},{default:m(()=>[d(s(p),{icon:"cil-star",class:"me-1"}),y(" "+o(i.loyalty_points||0)+" "+o(s(e)("customers.points")),1)]),_:2},1024)]),t("div",J,o(i.user_email),1)],8,j),t("div",K,[(r(!0),n(g,null,w(i.passes,l=>(r(),n("div",{key:l.id,class:I(["apple-pass-visual",l.pass_type])},[t("div",O,[d(s(p),{icon:L(l.pass_type),class:"pass-icon"},null,8,["icon"]),t("span",Q,o(W(l.pass_type)),1)]),t("div",X,[l.pass_type==="loyalty"?(r(),n("div",Z,[t("div",ss,o(s(e)("customers.points")),1),t("div",es,o(i.loyalty_points||0),1)])):l.pass_type==="membership"?(r(),n("div",ts,[t("div",as,o(s(e)("memberships.plan")),1),t("div",os,o(S(l,"plan")),1)])):(r(),n("div",ls,[t("div",rs,o(s(e)("common.status")),1),t("div",is,o(s(e)("common.active")),1)]))]),t("div",cs,[d(s(k),{color:"light",size:"sm",class:"download-pass-btn",onClick:N(h=>B(l),["stop"])},{default:m(()=>[d(s(p),{icon:"cil-cloud-download",class:"me-1"}),y(" "+o(s(e)("common.view")),1)]),_:1},8,["onClick"])])],2))),128))])]))),128))]))]))}},xs=H(ns,[["__scopeId","data-v-f923aa31"]]);export{xs as default};
