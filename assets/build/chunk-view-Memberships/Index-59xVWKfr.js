import{f as d,e as ue,i as Be,k as ze,c as v,o as m,d as s,b as r,w as o,u as e,ag as je,Z as H,j as He,s as D,a as E,x as g,P as p,C as u,t as n,ah as qe,ai as Ge,z as fe,aj as Ke,a4 as ge,F as L,g as B,Y as x,n as ye,_ as z,$ as _,a0 as q,a2 as Oe,a3 as Qe,a1 as C,a6 as Ye,a7 as G,a8 as K,a9 as O,a5 as ce,aa as Q}from"../chunk-vendor-vue-DkCSGS5r.js";import{u as Ze,a as V}from"../chunk-component-NotificationsBell-CdT4gVQ0.js";import{u as Je}from"../chunk-view-AppleWallet/Simulator-f79KHPiS.js";import{P as Xe}from"../chunk-component-PageHeader-2UM0PeLN.js";import{S as Y}from"../chunk-component-StatCard-CQbqZfDa.js";import{_ as es,C as ss}from"../chunk-component-Card-B6TBnHC7.js";import{E as Ce}from"../chunk-component-EmptyState-C_n04Mxq.js";import{L as we}from"../chunk-component-LoadingSpinner-BDznbj6f.js";import"../chunk-vendor-6xaPOP3o.js";import"../chunk-vendor-charts-C66rl4lP.js";import"../chunk-vendor-pinia-BW6wRy0H.js";import"../chunk-vendor-axios-B9ygI19o.js";const ts={class:"memberships-page"},as={class:"stats-grid"},ls={key:0},os={key:2,class:"table-wrapper"},is={class:"table-header-row"},ns={class:"th-name"},rs={class:"th-price"},us={class:"th-duration"},cs={class:"th-discount"},ms={class:"th-free"},ds={class:"th-mult"},ps={class:"th-status"},_s={class:"th-actions"},bs={class:"td-name"},vs={class:"name-cell"},hs={class:"plan-name"},fs={key:0,class:"text-muted"},gs={class:"td-price"},ys={class:"unified-amount"},Cs={class:"td-duration"},ws={class:"td-discount"},ks={class:"td-free"},Vs={class:"td-mult"},Ms={class:"td-status"},Ps={class:"td-actions"},Ns={class:"actions-group"},Ss=["onClick","title"],xs=["onClick","title"],As={key:1},Us={value:""},Ds={value:"active"},$s={value:"expired"},Ts={value:"cancelled"},Fs={key:2,class:"table-wrapper"},Ws={class:"table-header-row"},Is={class:"th-customer"},Rs={class:"th-plan"},Es={class:"th-dates"},Ls={class:"th-usage"},Bs={class:"th-status"},zs={class:"th-actions"},js={class:"td-customer"},Hs={class:"customer-cell"},qs={class:"customer-name"},Gs=["href"],Ks={class:"td-plan"},Os={class:"td-dates"},Qs={class:"date-stack"},Ys={class:"text-muted"},Zs={class:"td-usage"},Js={class:"td-status"},Xs={class:"td-actions"},et={class:"actions-group"},st=["onClick","title"],tt=["onClick","title"],at={key:3,class:"d-flex justify-content-between align-items-center mt-3"},lt={class:"text-muted"},ot={value:""},it=["value"],nt={value:""},rt=["value"],ut={value:""},ct=["value"],mt={class:"alert alert-info"},dt={__name:"Index",setup(pt){const{t}=Ze(),b=Je(),ke=He(),w=d("plans"),P=d([]),A=d([]),$=d([]),Z=d(!1),J=d(!1),X=d(!1),U=d(null),T=d(!1),ee=d(!1),F=d(!1),se=d(!1),W=d(!1),j=d(null),te=d(!1),I=d(!1),me=d(null),M=d({customer_id:""}),N=d({status:"",search:""}),h=d({current_page:1,per_page:20,total:0,total_pages:0}),c=d({name:"",name_ar:"",description:"",price:0,duration_months:1,discount_percentage:0,free_services_count:0,priority_booking:!1,points_multiplier:1,is_active:!0}),f=d({customer_id:"",membership_plan_id:"",duration_months:1,auto_renew:!1}),S=d({months:1,amount_paid:0}),Ve=i=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:3}).format(i||0),de=i=>i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"—",pe=ue(()=>({total:P.value.length,active:P.value.filter(i=>Number(i.is_active)===1).length})),_e=ue(()=>({total:A.value.length,active:A.value.filter(i=>String(i.status)==="active").length})),Me=ue(()=>$.value||[]),Pe=i=>{const l=String(i||"");return l==="active"?t("memberships.active"):l==="expired"?t("memberships.expired"):l==="cancelled"?t("memberships.cancelled")||"Cancelled":l||"—"},Ne=i=>{const l=String(i||"");return l==="active"?"cil-check-circle":l==="expired"?"cil-x-circle":l==="cancelled"?"cil-ban":"cil-info"},Se=i=>{const l=String(i||"");return l==="active"?"status-active":l==="expired"?"status-expired":l==="cancelled"?"status-inactive":"status-other"},ae=async()=>{var i;Z.value=!0;try{const l=await V.get("/memberships/plans",{noCache:!0});P.value=((i=l.data)==null?void 0:i.data)||[]}catch{P.value=[],b.error(t("common.errorLoading"))}finally{Z.value=!1}},k=async()=>{var i;J.value=!0;try{const l={page:h.value.current_page,per_page:h.value.per_page,...N.value};Object.keys(l).forEach(R=>{l[R]===""&&delete l[R]});const a=await V.get("/memberships/members",{params:l,noCache:!0}),y=((i=a.data)==null?void 0:i.data)||a.data||{};A.value=y.items||[],h.value=y.pagination||h.value}catch{A.value=[],b.error(t("common.errorLoading"))}finally{J.value=!1}},be=async()=>{var i;try{const l=await V.get("/customers",{params:{per_page:200},noCache:!0}),a=((i=l.data)==null?void 0:i.data)||l.data||{};$.value=a.items||a||[]}catch{$.value=[]}},xe=i=>{h.value.current_page=i,k()};let ve;const Ae=()=>{clearTimeout(ve),ve=setTimeout(()=>{h.value.current_page=1,k()},500)},Ue=()=>{N.value={status:"",search:""},h.value.current_page=1,k()},le=(i=null)=>{U.value=i,c.value={name:(i==null?void 0:i.name)||"",name_ar:(i==null?void 0:i.name_ar)||"",description:(i==null?void 0:i.description)||"",price:Number((i==null?void 0:i.price)||0),duration_months:Number((i==null?void 0:i.duration_months)||1),discount_percentage:Number((i==null?void 0:i.discount_percentage)||0),free_services_count:Number((i==null?void 0:i.free_services_count)||0),priority_booking:!!Number((i==null?void 0:i.priority_booking)||0),points_multiplier:Number((i==null?void 0:i.points_multiplier)||1),is_active:i?!!Number((i==null?void 0:i.is_active)||0):!0},X.value=!0},oe=()=>{X.value=!1,T.value=!1,U.value=null},De=async()=>{var i;if(!c.value.name){b.error(t("memberships.planNameRequired")||"Name is required");return}T.value=!0;try{const l={...c.value,price:Number(c.value.price||0),duration_months:Number(c.value.duration_months||1),discount_percentage:Number(c.value.discount_percentage||0),free_services_count:Number(c.value.free_services_count||0),points_multiplier:Number(c.value.points_multiplier||1),priority_booking:c.value.priority_booking?1:0,is_active:c.value.is_active?1:0};(i=U.value)!=null&&i.id?await V.put(`/memberships/plans/${U.value.id}`,l):await V.post("/memberships/plans",l),b.success(t("memberships.saved")||t("common.save")),oe(),await ae()}catch(l){console.error("Save plan error:",l),b.error(t("memberships.saveError")||t("common.errorLoading"))}finally{T.value=!1}},$e=async i=>{if(confirm(`${t("memberships.deletePlanConfirm")||"Delete plan?"} ${(i==null?void 0:i.name_ar)||(i==null?void 0:i.name)||""}`))try{await V.delete(`/memberships/plans/${i.id}`),b.success(t("common.delete")),await ae()}catch{b.error(t("common.errorLoading"))}},he=()=>{ee.value=!0,f.value={customer_id:"",membership_plan_id:"",duration_months:1,auto_renew:!1}},ie=()=>{ee.value=!1,F.value=!1},Te=async()=>{if(!f.value.customer_id||!f.value.membership_plan_id){b.error(t("memberships.selectCustomerPlan")||"Select customer and plan");return}F.value=!0;try{await V.post("/memberships",{customer_id:Number(f.value.customer_id),membership_plan_id:Number(f.value.membership_plan_id),duration_months:Number(f.value.duration_months||1),auto_renew:f.value.auto_renew?1:0}),b.success(t("memberships.assigned")||"Assigned"),ie(),w.value="members",await k()}catch(i){console.error("Assign membership error:",i),b.error(t("memberships.assignError")||t("common.errorLoading"))}finally{F.value=!1}},Fe=i=>{j.value=i,S.value={months:1,amount_paid:0},se.value=!0},ne=()=>{se.value=!1,W.value=!1,j.value=null},We=async()=>{var i;if((i=j.value)!=null&&i.id){W.value=!0;try{await V.post(`/memberships/${j.value.id}/renew`,{months:Number(S.value.months||1),amount_paid:Number(S.value.amount_paid||0)}),b.success(t("memberships.renewed")||"Renewed"),ne(),await k()}catch(l){console.error("Renew membership error:",l),b.error(t("memberships.renewError")||t("common.errorLoading"))}finally{W.value=!1}}},Ie=()=>{te.value=!0,M.value={customer_id:me.value||""},$.value.length===0&&be()},re=()=>{te.value=!1,I.value=!1,M.value={customer_id:""}},Re=async()=>{var i,l,a;if(!M.value.customer_id){b.error(t("memberships.selectCustomer")||"Select customer");return}I.value=!0;try{const y=await V.post(`/apple-wallet/create/${M.value.customer_id}/membership`),R=((i=y.data)==null?void 0:i.data)||y.data||{};R.pass_url?(window.open(R.pass_url,"_blank"),b.success(t("memberships.passCreated")||"تم إنشاء البطاقة بنجاح")):b.error(t("memberships.passError")||"حدث خطأ في إنشاء البطاقة"),re()}catch(y){console.error("Error creating Apple Wallet pass:",y),b.error(((a=(l=y.response)==null?void 0:l.data)==null?void 0:a.message)||t("memberships.passError")||"حدث خطأ في إنشاء البطاقة")}finally{I.value=!1}},Ee=async i=>{if(confirm(`${t("memberships.cancelConfirm")||"Cancel membership?"} ${(i==null?void 0:i.customer_name)||""}`))try{await V.delete(`/memberships/${i.id}`),b.success(t("memberships.cancelled")||"Cancelled"),await k()}catch{b.error(t("common.errorLoading"))}},Le=()=>{ke.push("/programs/settings")};return Be(()=>w.value,i=>{i==="members"&&k()}),ze(async()=>{await Promise.all([ae(),be(),k()])}),(i,l)=>(m(),v("div",ts,[s(Xe,{title:e(t)("memberships.title"),subtitle:e(t)("memberships.subtitle")||e(t)("memberships.title")+" - "+e(t)("dashboard.subtitle")},{icon:o(()=>[s(e(u),{icon:"cil-credit-card"})]),actions:o(()=>[s(e(g),{color:"secondary",variant:"outline",class:"me-2 settings-btn",onClick:Le},{default:o(()=>[s(e(u),{icon:"cil-settings",class:"me-2"}),p(" "+n(e(t)("nav.programsSettings")),1)]),_:1}),me.value?(m(),D(e(g),{key:0,color:"success",variant:"outline",class:"me-2 apple-wallet-btn",onClick:Ie},{default:o(()=>[s(e(u),{icon:"cil-wallet",class:"me-2"}),p(" "+n(e(t)("memberships.addToAppleWallet")||"أضف إلى Apple Wallet"),1)]),_:1})):E("",!0),s(e(g),{color:"secondary",variant:"outline",class:"me-2",onClick:he},{default:o(()=>[s(e(u),{icon:"cil-user-follow",class:"me-2"}),p(" "+n(e(t)("memberships.assign")||"Assign Membership"),1)]),_:1}),s(e(g),{color:"primary",class:"btn-primary-custom",onClick:l[0]||(l[0]=a=>le())},{default:o(()=>[s(e(u),{icon:"cil-plus",class:"me-2"}),p(" "+n(e(t)("memberships.newPlan")||"New Plan"),1)]),_:1})]),_:1},8,["title","subtitle"]),r("div",as,[s(Y,{label:e(t)("memberships.plans")||"Plans",value:pe.value.total,"badge-variant":"info",color:"gold",clickable:!0,onClick:l[1]||(l[1]=()=>w.value="plans")},{icon:o(()=>[s(e(u),{icon:"cil-layers"})]),_:1},8,["label","value"]),s(Y,{label:e(t)("memberships.activePlans")||"Active Plans",value:pe.value.active,"badge-variant":"success",color:"gold",clickable:!0,onClick:l[2]||(l[2]=()=>w.value="plans")},{icon:o(()=>[s(e(u),{icon:"cil-check-circle"})]),_:1},8,["label","value"]),s(Y,{label:e(t)("memberships.members")||"Members",value:_e.value.total,"badge-variant":"info",color:"gold",clickable:!0,onClick:l[3]||(l[3]=()=>w.value="members")},{icon:o(()=>[s(e(u),{icon:"cil-people"})]),_:1},8,["label","value"]),s(Y,{label:e(t)("memberships.active"),value:_e.value.active,"badge-variant":"success",color:"gold",clickable:!0,onClick:l[4]||(l[4]=()=>{w.value="members",N.value.status="active",h.value.current_page=1,k()})},{icon:o(()=>[s(e(u),{icon:"cil-user"})]),_:1},8,["label","value"])]),s(e(je),{class:"tabs-card"},{default:o(()=>[s(e(qe),null,{default:o(()=>[s(e(Ge),{variant:"tabs"},{default:o(()=>[s(e(fe),{active:w.value==="plans",onClick:l[5]||(l[5]=a=>w.value="plans")},{default:o(()=>[p(n(e(t)("memberships.plansTab")||"Plans"),1)]),_:1},8,["active"]),s(e(fe),{active:w.value==="members",onClick:l[6]||(l[6]=a=>w.value="members")},{default:o(()=>[p(n(e(t)("memberships.membersTab")||"Members"),1)]),_:1},8,["active"])]),_:1})]),_:1}),s(e(Ke),null,{default:o(()=>[w.value==="plans"?(m(),v("div",ls,[Z.value?(m(),D(we,{key:0,text:e(t)("common.loading")},null,8,["text"])):P.value.length===0?(m(),D(Ce,{key:1,title:e(t)("common.noData"),description:e(t)("memberships.noPlans")||e(t)("common.noData"),"icon-color":"gray"},{action:o(()=>[s(e(g),{color:"primary",class:"btn-primary-custom",onClick:l[7]||(l[7]=a=>le())},{default:o(()=>[s(e(u),{icon:"cil-plus",class:"me-2"}),p(" "+n(e(t)("memberships.newPlan")||"New Plan"),1)]),_:1})]),_:1},8,["title","description"])):(m(),v("div",os,[s(e(ge),{hover:"",responsive:"",class:"table-modern memberships-table"},{default:o(()=>[r("thead",null,[r("tr",is,[r("th",ns,n(e(t)("memberships.plan")),1),r("th",rs,n(e(t)("memberships.price")||"Price"),1),r("th",us,n(e(t)("memberships.durationMonths")||"Duration"),1),r("th",cs,n(e(t)("memberships.discount")||"Discount"),1),r("th",ms,n(e(t)("memberships.freeServices")||"Free Services"),1),r("th",ds,n(e(t)("memberships.pointsMultiplier")||"Points Multiplier"),1),r("th",ps,n(e(t)("common.status")),1),r("th",_s,n(e(t)("common.actions")),1)])]),r("tbody",null,[(m(!0),v(L,null,B(P.value,a=>(m(),v("tr",{key:a.id,class:"table-row plan-row"},[r("td",bs,[r("div",vs,[r("strong",hs,n(a.name_ar||a.name),1),a.description?(m(),v("small",fs,n(a.description),1)):E("",!0)])]),r("td",gs,[r("strong",ys,n(Ve(a.price||0)),1)]),r("td",Cs,[s(e(x),{class:"unified-badge badge-info"},{default:o(()=>[s(e(u),{icon:"cil-calendar",class:"badge-icon"}),r("span",null,n(a.duration_months||1)+" "+n(e(t)("memberships.months")||"months"),1)]),_:2},1024)]),r("td",ws,[s(e(x),{class:"unified-badge badge-rate"},{default:o(()=>[s(e(u),{icon:"cil-percent",class:"badge-icon"}),r("span",null,n(a.discount_percentage||0)+"%",1)]),_:2},1024)]),r("td",ks,[s(e(x),{class:"unified-badge badge-bonus"},{default:o(()=>[s(e(u),{icon:"cil-spreadsheet",class:"badge-icon"}),r("span",null,n(a.free_services_count||0),1)]),_:2},1024)]),r("td",Vs,[s(e(x),{class:"unified-badge badge-info"},{default:o(()=>[s(e(u),{icon:"cil-star",class:"badge-icon"}),r("span",null,"x"+n(a.points_multiplier||1),1)]),_:2},1024)]),r("td",Ms,[s(e(x),{class:ye(["unified-badge",a.is_active?"status-active":"status-inactive"])},{default:o(()=>[s(e(u),{icon:a.is_active?"cil-check-circle":"cil-x-circle",class:"badge-icon"},null,8,["icon"]),r("span",null,n(a.is_active?e(t)("common.active"):e(t)("common.inactive")),1)]),_:2},1032,["class"])]),r("td",Ps,[r("div",Ns,[r("button",{class:"action-btn",type:"button",onClick:y=>le(a),title:e(t)("common.edit")},[s(e(u),{icon:"cil-pencil"})],8,Ss),r("button",{class:"action-btn",type:"button",onClick:y=>$e(a),title:e(t)("common.delete")},[s(e(u),{icon:"cil-trash"})],8,xs)])])]))),128))])]),_:1})]))])):(m(),v("div",As,[s(ss,{title:e(t)("common.filter"),icon:"cil-filter",class:"filters-card"},{default:o(()=>[s(e(z),{class:"g-3"},{default:o(()=>[s(e(_),{md:3},{default:o(()=>[s(e(q),{modelValue:N.value.status,"onUpdate:modelValue":l[8]||(l[8]=a=>N.value.status=a),onChange:k,class:"filter-select"},{default:o(()=>[r("option",Us,n(e(t)("common.status")),1),r("option",Ds,n(e(t)("memberships.active")),1),r("option",$s,n(e(t)("memberships.expired")),1),r("option",Ts,n(e(t)("memberships.cancelled")||"Cancelled"),1)]),_:1},8,["modelValue"])]),_:1}),s(e(_),{md:9},{default:o(()=>[s(e(Oe),{class:"search-input-group"},{default:o(()=>[s(e(Qe),{class:"search-icon-wrapper"},{default:o(()=>[s(e(u),{icon:"cil-magnifying-glass"})]),_:1}),s(e(C),{modelValue:N.value.search,"onUpdate:modelValue":l[9]||(l[9]=a=>N.value.search=a),placeholder:e(t)("memberships.searchCustomer")||"Search customer...",onInput:Ae,class:"filter-input search-input"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),s(e(_),{md:3},{default:o(()=>[s(e(g),{color:"secondary",variant:"outline",onClick:Ue,class:"w-100 reset-btn"},{default:o(()=>[s(e(u),{icon:"cil-reload",class:"me-1"}),p(" "+n(e(t)("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"]),J.value?(m(),D(we,{key:0,text:e(t)("common.loading")},null,8,["text"])):A.value.length===0?(m(),D(Ce,{key:1,title:e(t)("common.noData"),description:e(t)("memberships.noMembers")||e(t)("common.noData"),"icon-color":"gray"},{action:o(()=>[s(e(g),{color:"primary",class:"btn-primary-custom",onClick:he},{default:o(()=>[s(e(u),{icon:"cil-user-follow",class:"me-2"}),p(" "+n(e(t)("memberships.assign")||"Assign Membership"),1)]),_:1})]),_:1},8,["title","description"])):(m(),v("div",Fs,[s(e(ge),{hover:"",responsive:"",class:"table-modern memberships-table"},{default:o(()=>[r("thead",null,[r("tr",Ws,[r("th",Is,n(e(t)("memberships.customer")),1),r("th",Rs,n(e(t)("memberships.plan")),1),r("th",Es,n(e(t)("memberships.startDate"))+" / "+n(e(t)("memberships.endDate")),1),r("th",Ls,n(e(t)("memberships.servicesUsed")||"Services Used"),1),r("th",Bs,n(e(t)("common.status")),1),r("th",zs,n(e(t)("common.actions")),1)])]),r("tbody",null,[(m(!0),v(L,null,B(A.value,a=>(m(),v("tr",{key:a.id,class:"table-row member-row"},[r("td",js,[r("div",Hs,[r("strong",qs,n(a.customer_name||"—"),1),a.customer_phone?(m(),v("a",{key:0,class:"customer-phone",href:`tel:${a.customer_phone}`},n(a.customer_phone),9,Gs)):E("",!0)])]),r("td",Ks,[r("strong",null,n(a.plan_name_ar||a.plan_name||"—"),1)]),r("td",Os,[r("div",Qs,[r("span",null,n(de(a.start_date)),1),r("span",Ys,n(de(a.end_date)),1)])]),r("td",Zs,[s(e(x),{class:"unified-badge badge-info"},{default:o(()=>[s(e(u),{icon:"cil-spreadsheet",class:"badge-icon"}),r("span",null,n(a.services_used||0)+" / "+n(a.services_limit??"∞"),1)]),_:2},1024)]),r("td",Js,[s(e(x),{class:ye(["unified-badge",Se(a.status)])},{default:o(()=>[s(e(u),{icon:Ne(a.status),class:"badge-icon"},null,8,["icon"]),r("span",null,n(Pe(a.status)),1)]),_:2},1032,["class"])]),r("td",Xs,[r("div",et,[r("button",{class:"action-btn",type:"button",onClick:y=>Fe(a),title:e(t)("memberships.renew")||"Renew"},[s(e(u),{icon:"cil-clock"})],8,st),r("button",{class:"action-btn",type:"button",onClick:y=>Ee(a),title:e(t)("memberships.cancel")||"Cancel"},[s(e(u),{icon:"cil-ban"})],8,tt)])])]))),128))])]),_:1})])),h.value.total_pages>1?(m(),v("div",at,[r("div",lt,n(e(t)("common.view"))+" "+n((h.value.current_page-1)*h.value.per_page+1)+" "+n(e(t)("common.to"))+" "+n(Math.min(h.value.current_page*h.value.per_page,h.value.total))+" "+n(e(t)("common.of"))+" "+n(h.value.total),1),s(e(Ye),{pages:h.value.total_pages,"active-page":h.value.current_page,"onUpdate:activePage":xe},null,8,["pages","active-page"])])):E("",!0)]))]),_:1})]),_:1}),s(e(H),{visible:X.value,onClose:oe,size:"lg"},{default:o(()=>[s(e(G),null,{default:o(()=>[s(e(K),null,{default:o(()=>[s(e(u),{icon:U.value?"cil-pencil":"cil-plus",class:"me-2"},null,8,["icon"]),p(" "+n(U.value?e(t)("memberships.editPlan")||"Edit Plan":e(t)("memberships.newPlan")||"New Plan"),1)]),_:1})]),_:1}),s(e(O),null,{default:o(()=>[s(e(z),{class:"g-3"},{default:o(()=>[s(e(_),{md:6},{default:o(()=>[s(e(C),{modelValue:c.value.name,"onUpdate:modelValue":l[10]||(l[10]=a=>c.value.name=a),label:e(t)("memberships.planName")||"Name",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(_),{md:6},{default:o(()=>[s(e(C),{modelValue:c.value.name_ar,"onUpdate:modelValue":l[11]||(l[11]=a=>c.value.name_ar=a),label:e(t)("memberships.planNameAr")||"Arabic Name",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(_),{md:12},{default:o(()=>[s(e(C),{modelValue:c.value.description,"onUpdate:modelValue":l[12]||(l[12]=a=>c.value.description=a),label:e(t)("memberships.description")||"Description",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(_),{md:4},{default:o(()=>[s(e(C),{modelValue:c.value.price,"onUpdate:modelValue":l[13]||(l[13]=a=>c.value.price=a),modelModifiers:{number:!0},type:"number",min:"0",step:"0.001",label:e(t)("memberships.price")||"Price",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(_),{md:4},{default:o(()=>[s(e(C),{modelValue:c.value.duration_months,"onUpdate:modelValue":l[14]||(l[14]=a=>c.value.duration_months=a),modelModifiers:{number:!0},type:"number",min:"1",step:"1",label:e(t)("memberships.durationMonths")||"Duration (months)",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(_),{md:4},{default:o(()=>[s(e(C),{modelValue:c.value.discount_percentage,"onUpdate:modelValue":l[15]||(l[15]=a=>c.value.discount_percentage=a),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",label:e(t)("memberships.discount")||"Discount (%)",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(_),{md:4},{default:o(()=>[s(e(C),{modelValue:c.value.free_services_count,"onUpdate:modelValue":l[16]||(l[16]=a=>c.value.free_services_count=a),modelModifiers:{number:!0},type:"number",min:"0",step:"1",label:e(t)("memberships.freeServices")||"Free Services",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(_),{md:4},{default:o(()=>[s(e(C),{modelValue:c.value.points_multiplier,"onUpdate:modelValue":l[17]||(l[17]=a=>c.value.points_multiplier=a),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",label:e(t)("memberships.pointsMultiplier")||"Points Multiplier",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(_),{md:4,class:"d-flex align-items-center"},{default:o(()=>[s(e(ce),{modelValue:c.value.priority_booking,"onUpdate:modelValue":l[18]||(l[18]=a=>c.value.priority_booking=a),label:e(t)("memberships.priorityBooking")||"Priority booking"},null,8,["modelValue","label"])]),_:1}),s(e(_),{md:4,class:"d-flex align-items-center"},{default:o(()=>[s(e(ce),{modelValue:c.value.is_active,"onUpdate:modelValue":l[19]||(l[19]=a=>c.value.is_active=a),label:e(t)("common.active")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),s(e(Q),null,{default:o(()=>[s(e(g),{color:"secondary",onClick:oe},{default:o(()=>[p(n(e(t)("common.cancel")),1)]),_:1}),s(e(g),{color:"primary",class:"btn-primary-custom",disabled:T.value,onClick:De},{default:o(()=>[s(e(u),{icon:"cil-save",class:"me-2"}),p(" "+n(T.value?e(t)("common.saving"):e(t)("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["visible"]),s(e(H),{visible:ee.value,onClose:ie,size:"lg"},{default:o(()=>[s(e(G),null,{default:o(()=>[s(e(K),null,{default:o(()=>[s(e(u),{icon:"cil-user-follow",class:"me-2"}),p(" "+n(e(t)("memberships.assign")||"Assign Membership"),1)]),_:1})]),_:1}),s(e(O),null,{default:o(()=>[s(e(z),{class:"g-3"},{default:o(()=>[s(e(_),{md:6},{default:o(()=>[s(e(q),{modelValue:f.value.customer_id,"onUpdate:modelValue":l[20]||(l[20]=a=>f.value.customer_id=a),label:e(t)("memberships.customer"),class:"filter-select"},{default:o(()=>[r("option",ot,n(e(t)("common.select")),1),(m(!0),v(L,null,B(Me.value,a=>(m(),v("option",{key:a.id,value:String(a.id)},n(a.name)+" ("+n(a.phone)+")",9,it))),128))]),_:1},8,["modelValue","label"])]),_:1}),s(e(_),{md:6},{default:o(()=>[s(e(q),{modelValue:f.value.membership_plan_id,"onUpdate:modelValue":l[21]||(l[21]=a=>f.value.membership_plan_id=a),label:e(t)("memberships.plan"),class:"filter-select"},{default:o(()=>[r("option",nt,n(e(t)("common.select")),1),(m(!0),v(L,null,B(P.value,a=>(m(),v("option",{key:a.id,value:String(a.id)},n(a.name_ar||a.name),9,rt))),128))]),_:1},8,["modelValue","label"])]),_:1}),s(e(_),{md:6},{default:o(()=>[s(e(C),{modelValue:f.value.duration_months,"onUpdate:modelValue":l[22]||(l[22]=a=>f.value.duration_months=a),modelModifiers:{number:!0},type:"number",min:"1",step:"1",label:e(t)("memberships.durationMonths")||"Duration (months)",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(_),{md:6,class:"d-flex align-items-center"},{default:o(()=>[s(e(ce),{modelValue:f.value.auto_renew,"onUpdate:modelValue":l[23]||(l[23]=a=>f.value.auto_renew=a),label:e(t)("memberships.autoRenew")||"Auto renew"},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),s(e(Q),null,{default:o(()=>[s(e(g),{color:"secondary",onClick:ie},{default:o(()=>[p(n(e(t)("common.cancel")),1)]),_:1}),s(e(g),{color:"primary",class:"btn-primary-custom",disabled:F.value,onClick:Te},{default:o(()=>[s(e(u),{icon:"cil-check",class:"me-2"}),p(" "+n(F.value?e(t)("common.saving"):e(t)("memberships.assign")||"Assign"),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["visible"]),s(e(H),{visible:se.value,onClose:ne,size:"lg"},{default:o(()=>[s(e(G),null,{default:o(()=>[s(e(K),null,{default:o(()=>[s(e(u),{icon:"cil-clock",class:"me-2"}),p(" "+n(e(t)("memberships.renew")||"Renew Membership"),1)]),_:1})]),_:1}),s(e(O),null,{default:o(()=>[s(e(z),{class:"g-3"},{default:o(()=>[s(e(_),{md:6},{default:o(()=>[s(e(C),{modelValue:S.value.months,"onUpdate:modelValue":l[24]||(l[24]=a=>S.value.months=a),modelModifiers:{number:!0},type:"number",min:"1",step:"1",label:e(t)("memberships.monthsToExtend")||"Months",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(_),{md:6},{default:o(()=>[s(e(C),{modelValue:S.value.amount_paid,"onUpdate:modelValue":l[25]||(l[25]=a=>S.value.amount_paid=a),modelModifiers:{number:!0},type:"number",min:"0",step:"0.001",label:e(t)("memberships.amountPaid")||"Amount paid",class:"filter-input"},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),s(e(Q),null,{default:o(()=>[s(e(g),{color:"secondary",onClick:ne},{default:o(()=>[p(n(e(t)("common.cancel")),1)]),_:1}),s(e(g),{color:"primary",class:"btn-primary-custom",disabled:W.value,onClick:We},{default:o(()=>[s(e(u),{icon:"cil-check",class:"me-2"}),p(" "+n(W.value?e(t)("common.saving"):e(t)("memberships.renew")||"Renew"),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["visible"]),s(e(H),{visible:te.value,onClose:re,size:"lg"},{default:o(()=>[s(e(G),null,{default:o(()=>[s(e(K),null,{default:o(()=>[s(e(u),{icon:"cil-wallet",class:"me-2"}),p(" "+n(e(t)("memberships.addToAppleWallet")||"أضف إلى Apple Wallet"),1)]),_:1})]),_:1}),s(e(O),null,{default:o(()=>[s(e(z),{class:"g-3"},{default:o(()=>[s(e(_),{md:12},{default:o(()=>[s(e(q),{modelValue:M.value.customer_id,"onUpdate:modelValue":l[26]||(l[26]=a=>M.value.customer_id=a),label:e(t)("memberships.selectCustomer")||"Select Customer",class:"filter-select"},{default:o(()=>[r("option",ut,n(e(t)("common.select")),1),(m(!0),v(L,null,B($.value,a=>(m(),v("option",{key:a.id,value:String(a.id)},n(a.name)+" ("+n(a.phone||a.email)+") ",9,ct))),128))]),_:1},8,["modelValue","label"])]),_:1}),M.value.customer_id?(m(),D(e(_),{key:0,md:12},{default:o(()=>[r("div",mt,[s(e(u),{icon:"cil-info",class:"me-2"}),p(" "+n(e(t)("memberships.appleWalletInfo")||"سيتم إنشاء بطاقة Apple Wallet تحتوي على نقاط الولاء والعضوية و QR Code لسكان النقاط"),1)])]),_:1})):E("",!0)]),_:1})]),_:1}),s(e(Q),null,{default:o(()=>[s(e(g),{color:"secondary",onClick:re},{default:o(()=>[p(n(e(t)("common.cancel")),1)]),_:1}),s(e(g),{color:"success",class:"btn-primary-custom",disabled:I.value||!M.value.customer_id,onClick:Re},{default:o(()=>[s(e(u),{icon:"cil-wallet",class:"me-2"}),p(" "+n(I.value?e(t)("common.loading")||"Loading...":e(t)("memberships.createPass")||"إنشاء البطاقة"),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["visible"])]))}},Pt=es(dt,[["__scopeId","data-v-8772cb23"]]);export{Pt as default};
