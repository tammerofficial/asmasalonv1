import{f as v,j as O,c as u,o as r,b as e,d as t,t as n,u as s,w as o,Y as S,s as Y,a as k,x as _,C as i,Z,h as P,F as V,g as D,$ as q,l as J,P as d,z as N,a1 as $,a2 as M,aa as Q,ab as X,a3 as ee,a4 as se}from"../chunk-vendor-vue-BKzcbwC-.js";import{u as te,a as B}from"../chunk-component-NotificationsBell-CyBx4swB.js";import"../chunk-view-AppleWallet/Simulator-WLH8OaYC.js";import{H as ae}from"../chunk-component-HelpSection-B1vxldAY.js";import{_ as le}from"../chunk-component-Card-D7ddNvJz.js";import"../chunk-vendor-Ltsl4QyH.js";import"../chunk-vendor-pinia-CsGkbfJ3.js";import"../chunk-vendor-axios-B9ygI19o.js";import"../chunk-component-PageHeader-CI_3JpQM.js";const oe={class:"memberships-page p-4"},ne={class:"pos-header-top d-flex justify-content-between align-items-center mb-4"},ie={class:"header-left d-flex align-items-center gap-3"},ce={class:"mb-0 fw-bold text-primary"},re={class:"header-right d-flex gap-2"},de={class:"nano-stats-bar mb-4"},ue={class:"stat-icon-bg plans"},me={class:"stat-info"},ve={class:"stat-value"},pe={class:"stat-icon-bg members"},_e={class:"stat-info"},be={class:"stat-value text-info"},fe={class:"stat-card-nano"},ge={class:"stat-icon-bg revenue"},he={class:"stat-card-nano"},ye={class:"stat-icon-bg expiring"},ke={class:"nano-panel"},xe={key:0},Ce={key:0,class:"text-center p-5"},we={key:1,class:"nano-grid"},Se=["onClick"],Me={class:"plan-badge"},Te={class:"plan-icon"},Ie={class:"fw-bold mb-2"},Fe={class:"plan-price text-primary h2 fw-bold mb-3"},Ae={class:"plan-features d-flex flex-column gap-2 mb-4"},Pe={class:"feature-item"},Ve={class:"feature-item"},De={key:0,class:"feature-item"},Ne={key:1},$e={class:"nano-filters-bar p-3 bg-tertiary rounded-4 mb-4"},Be={key:0,class:"text-center p-5"},Ee={key:1,class:"nano-table-container"},Le={class:"nano-table w-100"},Re={class:"text-start fw-bold"},We={__name:"Index",setup(ze){const{t:f}=te(),E=J(),p=v("plans"),x=v(!1),C=v(!1),g=v([]),h=v([]),T=v(null),I=v({total:0,active:0}),F=v({total:0,active:0}),b=v({search:"",status:""}),L=v({current_page:1,total_pages:1}),R=async()=>{var m,a,l;x.value=!0;try{const c=await B.get("/memberships/plans");g.value=((a=(m=c.data)==null?void 0:m.data)==null?void 0:a.items)||((l=c.data)==null?void 0:l.items)||[],I.value={total:g.value.length,active:g.value.filter(w=>w.is_active).length}}catch(c){console.error("Failed to load plans:",c)}finally{x.value=!1}},y=async()=>{var m,a,l;C.value=!0;try{const c=await B.get("/memberships/members",{params:{...b.value,page:L.current_page}});h.value=((a=(m=c.data)==null?void 0:m.data)==null?void 0:a.items)||((l=c.data)==null?void 0:l.items)||[],F.value={total:h.value.length,active:h.value.filter(w=>w.status==="active").length}}catch(c){console.error("Failed to load members:",c)}finally{C.value=!1}},W=()=>{clearTimeout(window.mSearchTimer),window.searchTimer=setTimeout(y,500)},z=()=>{b.value={search:"",status:""},y()},U=m=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:3}).format(m||0),A=(m=null)=>{},j=()=>{},G=()=>E.push("/settings/memberships"),H=()=>{},K=m=>{T.value=m.id};return O(()=>{R(),y()}),(m,a)=>(r(),u("div",oe,[e("div",ne,[e("div",ie,[e("h2",ce,n(s(f)("memberships.title")),1),t(s(S),{color:"gold",shape:"rounded-pill",class:"px-3 py-2 fw-bold text-dark"},{default:o(()=>[t(s(i),{icon:"cil-credit-card",class:"me-1"}),a[7]||(a[7]=d(" Premium Access ",-1))]),_:1})]),e("div",re,[T.value?(r(),Y(s(_),{key:0,color:"success",class:"nano-btn-success",onClick:H},{default:o(()=>[t(s(i),{icon:"cil-wallet",class:"me-2"}),d(n(s(f)("memberships.addToAppleWallet")),1)]),_:1})):k("",!0),t(s(_),{color:"primary",variant:"outline",class:"nano-btn-outline",onClick:j},{default:o(()=>[t(s(i),{icon:"cil-user-follow",class:"me-2"}),a[8]||(a[8]=d("Assign ",-1))]),_:1}),t(s(_),{color:"primary",class:"nano-btn",onClick:a[0]||(a[0]=l=>A())},{default:o(()=>[t(s(i),{icon:"cil-plus",class:"me-2"}),d(n(s(f)("memberships.newPlan")),1)]),_:1}),t(s(_),{color:"secondary",variant:"ghost",onClick:G},{default:o(()=>[t(s(i),{icon:"cil-settings"})]),_:1})])]),e("div",de,[e("div",{class:"stat-card-nano clickable",onClick:a[1]||(a[1]=l=>p.value="plans")},[e("div",ue,[t(s(i),{icon:"cil-layers"})]),e("div",me,[e("div",ve,n(I.value.total),1),a[9]||(a[9]=e("div",{class:"stat-label"},"Active Plans",-1))])]),e("div",{class:"stat-card-nano clickable",onClick:a[2]||(a[2]=l=>p.value="members")},[e("div",pe,[t(s(i),{icon:"cil-people"})]),e("div",_e,[e("div",be,n(F.value.total),1),a[10]||(a[10]=e("div",{class:"stat-label"},"Total Members",-1))])]),e("div",fe,[e("div",ge,[t(s(i),{icon:"cil-money"})]),a[11]||(a[11]=e("div",{class:"stat-info"},[e("div",{class:"stat-value text-success"},"1,250"),e("div",{class:"stat-label"},"Membership Revenue")],-1))]),e("div",he,[e("div",ye,[t(s(i),{icon:"cil-clock"})]),a[12]||(a[12]=e("div",{class:"stat-info"},[e("div",{class:"stat-value text-warning"},"12"),e("div",{class:"stat-label"},"Expiring Soon")],-1))])]),t(s(Z),{variant:"pills",class:"nano-tabs mb-4"},{default:o(()=>[t(s(N),null,{default:o(()=>[t(s($),{active:p.value==="plans",onClick:a[3]||(a[3]=l=>p.value="plans"),class:"nano-tab-link"},{default:o(()=>[t(s(i),{icon:"cil-layers",class:"me-2"}),d(n(s(f)("memberships.plansTab")),1)]),_:1},8,["active"])]),_:1}),t(s(N),null,{default:o(()=>[t(s($),{active:p.value==="members",onClick:a[4]||(a[4]=l=>p.value="members"),class:"nano-tab-link"},{default:o(()=>[t(s(i),{icon:"cil-people",class:"me-2"}),d(n(s(f)("memberships.membersTab")),1)]),_:1},8,["active"])]),_:1})]),_:1}),e("div",ke,[p.value==="plans"?(r(),u("div",xe,[x.value?(r(),u("div",Ce,[t(s(P),{color:"primary"})])):(r(),u("div",we,[(r(!0),u(V,null,D(g.value,l=>(r(),u("div",{key:l.id,class:"membership-plan-card",onClick:c=>A(l)},[e("div",Me,n(l.is_active?"Active":"Inactive"),1),e("div",Te,[t(s(i),{icon:"cil-gem",size:"xl"})]),e("h4",Ie,n(l.name_ar||l.name),1),e("div",Fe,n(U(l.price||0)),1),e("div",Ae,[e("div",Pe,[t(s(i),{icon:"cil-check-circle",class:"text-success me-2"}),d(" "+n(l.duration_months)+" Months",1)]),e("div",Ve,[t(s(i),{icon:"cil-check-circle",class:"text-success me-2"}),d(" "+n(l.discount_percent)+"% Off Services",1)]),l.free_services_count>0?(r(),u("div",De,[t(s(i),{icon:"cil-check-circle",class:"text-success me-2"}),d(" "+n(l.free_services_count)+" Free Services",1)])):k("",!0)]),t(s(_),{color:"primary",variant:"ghost",class:"w-100 mt-auto"},{default:o(()=>[...a[13]||(a[13]=[d("Edit Plan",-1)])]),_:1})],8,Se))),128))]))])):k("",!0),p.value==="members"?(r(),u("div",Ne,[e("div",$e,[t(s(q),{class:"g-3 align-items-center"},{default:o(()=>[t(s(M),{md:"6"},{default:o(()=>[t(s(Q),null,{default:o(()=>[t(s(X),{class:"bg-transparent border-0"},{default:o(()=>[t(s(i),{icon:"cil-magnifying-glass"})]),_:1}),t(s(ee),{modelValue:b.value.search,"onUpdate:modelValue":a[5]||(a[5]=l=>b.value.search=l),placeholder:"Search members...",onInput:W,class:"border-0 bg-transparent"},null,8,["modelValue"])]),_:1})]),_:1}),t(s(M),{md:"3"},{default:o(()=>[t(s(se),{modelValue:b.value.status,"onUpdate:modelValue":a[6]||(a[6]=l=>b.value.status=l),onChange:y,class:"rounded-3"},{default:o(()=>[...a[14]||(a[14]=[e("option",{value:""},"All Members",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"expired"},"Expired",-1)])]),_:1},8,["modelValue"])]),_:1}),t(s(M),{md:"3"},{default:o(()=>[t(s(_),{color:"secondary",variant:"ghost",class:"w-100",onClick:z},{default:o(()=>[...a[15]||(a[15]=[d("Reset",-1)])]),_:1})]),_:1})]),_:1})]),C.value?(r(),u("div",Be,[t(s(P),{color:"primary"})])):(r(),u("div",Ee,[e("table",Le,[a[16]||(a[16]=e("thead",null,[e("tr",null,[e("th",{class:"text-start"},"Customer"),e("th",null,"Plan"),e("th",null,"Start Date"),e("th",null,"Expiry Date"),e("th",null,"Status"),e("th",null,"Actions")])],-1)),e("tbody",null,[(r(!0),u(V,null,D(h.value,l=>(r(),u("tr",{key:l.id,class:"nano-table-row"},[e("td",Re,n(l.customer_name),1),e("td",null,[t(s(S),{color:"primary",shape:"rounded-pill"},{default:o(()=>[d(n(l.plan_name),1)]),_:2},1024)]),e("td",null,n(new Date(l.start_date).toLocaleDateString()),1),e("td",null,n(new Date(l.expiry_date).toLocaleDateString()),1),e("td",null,[t(s(S),{color:l.status==="active"?"success":"danger"},{default:o(()=>{var c;return[d(n((c=l.status)==null?void 0:c.toUpperCase()),1)]}),_:2},1032,["color"])]),e("td",null,[t(s(_),{size:"sm",color:"info",variant:"ghost",onClick:c=>K(l)},{default:o(()=>[t(s(i),{icon:"cil-info"})]),_:1},8,["onClick"])])]))),128))])])]))])):k("",!0)]),t(ae,{"page-key":"memberships"})]))}},Je=le(We,[["__scopeId","data-v-4d62240f"]]);export{Je as default};
