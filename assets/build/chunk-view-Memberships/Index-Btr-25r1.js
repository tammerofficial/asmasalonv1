import{f as d,g as Z,w as Te,i as Ae,c as v,o as m,d as s,b as n,p as i,u as e,af as Re,a5 as J,h as Ie,v as g,O as b,C as c,t as r,ag as Le,ah as Be,y as de,ai as Ee,q as A,a2 as pe,F as R,k as I,a as Q,X as N,n as _e,Y as L,Z as p,_ as ee,a0 as ze,a1 as qe,$ as y,a4 as He,a6 as se,a7 as te,a8 as ae,a3 as le,a9 as oe}from"../chunk-vendor-vue-DxcSX1Jd.js";import{u as Oe,a as k}from"../chunk-component-NotificationsBell-eCwis6PW.js";import{a as je}from"../chunk-view-Bookings/BookingAppearance-CtCwBfZ1.js";import{P as Ge}from"../chunk-component-PageHeader-BsA6C9en.js";import{S as B}from"../chunk-component-StatCard-AHk13FwB.js";import{_ as Ke,C as We}from"../chunk-component-Card-BWbCGpFM.js";import{E as be}from"../chunk-component-EmptyState-B78c8qVh.js";import{L as ve}from"../chunk-component-LoadingSpinner-PYO1Yq7-.js";import"../chunk-vendor-BwxB3d-x.js";import"../chunk-vendor-charts-CNHMDSF7.js";import"../chunk-vendor-pinia-DRDRCEXO.js";import"../chunk-vendor-axios-B9ygI19o.js";import"../chunk-component-Sidebar-DOq58Wm8.js";import"../chunk-view-Bookings/BookingFormPreview-BJuYIHYB.js";const Xe={class:"memberships-page"},Ye={class:"stats-grid"},Ze={key:0},Je={key:2,class:"table-wrapper"},Qe={class:"table-header-row"},es={class:"th-name"},ss={class:"th-price"},ts={class:"th-duration"},as={class:"th-discount"},ls={class:"th-free"},os={class:"th-mult"},is={class:"th-status"},ns={class:"th-actions"},rs={class:"td-name"},us={class:"name-cell"},cs={class:"plan-name"},ms={key:0,class:"text-muted"},ds={class:"td-price"},ps={class:"unified-amount"},_s={class:"td-duration"},bs={class:"td-discount"},vs={class:"td-free"},hs={class:"td-mult"},fs={class:"td-status"},gs={class:"td-actions"},ys={class:"actions-group"},Cs=["onClick","title"],ws=["onClick","title"],ks={key:1},Vs={value:""},Ms={value:"active"},Ps={value:"expired"},Ns={value:"cancelled"},xs={key:2,class:"table-wrapper"},Ss={class:"table-header-row"},Us={class:"th-customer"},Ds={class:"th-plan"},$s={class:"th-dates"},Fs={class:"th-usage"},Ts={class:"th-status"},As={class:"th-actions"},Rs={class:"td-customer"},Is={class:"customer-cell"},Ls={class:"customer-name"},Bs=["href"],Es={class:"td-plan"},zs={class:"td-dates"},qs={class:"date-stack"},Hs={class:"text-muted"},Os={class:"td-usage"},js={class:"td-status"},Gs={class:"td-actions"},Ks={class:"actions-group"},Ws=["onClick","title"],Xs=["onClick","title"],Ys={key:3,class:"d-flex justify-content-between align-items-center mt-3"},Zs={class:"text-muted"},Js={value:""},Qs=["value"],et={value:""},st=["value"],tt={__name:"Index",setup(at){const{t}=Oe(),f=je(),he=Ie(),C=d("plans"),V=d([]),x=d([]),E=d([]),z=d(!1),q=d(!1),H=d(!1),S=d(null),D=d(!1),O=d(!1),$=d(!1),j=d(!1),F=d(!1),T=d(null),M=d({status:"",search:""}),_=d({current_page:1,per_page:20,total:0,total_pages:0}),u=d({name:"",name_ar:"",description:"",price:0,duration_months:1,discount_percentage:0,free_services_count:0,priority_booking:!1,points_multiplier:1,is_active:!0}),h=d({customer_id:"",membership_plan_id:"",duration_months:1,auto_renew:!1}),P=d({months:1,amount_paid:0}),fe=o=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:3}).format(o||0),ie=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"—",ne=Z(()=>({total:V.value.length,active:V.value.filter(o=>Number(o.is_active)===1).length})),re=Z(()=>({total:x.value.length,active:x.value.filter(o=>String(o.status)==="active").length})),ge=Z(()=>E.value||[]),ye=o=>{const l=String(o||"");return l==="active"?t("memberships.active"):l==="expired"?t("memberships.expired"):l==="cancelled"?t("memberships.cancelled")||"Cancelled":l||"—"},Ce=o=>{const l=String(o||"");return l==="active"?"cil-check-circle":l==="expired"?"cil-x-circle":l==="cancelled"?"cil-ban":"cil-info"},we=o=>{const l=String(o||"");return l==="active"?"status-active":l==="expired"?"status-expired":l==="cancelled"?"status-inactive":"status-other"},G=async()=>{var o;z.value=!0;try{const l=await k.get("/memberships/plans",{noCache:!0});V.value=((o=l.data)==null?void 0:o.data)||[]}catch{V.value=[],f.error(t("common.errorLoading"))}finally{z.value=!1}},w=async()=>{var o;q.value=!0;try{const l={page:_.value.current_page,per_page:_.value.per_page,...M.value};Object.keys(l).forEach(me=>{l[me]===""&&delete l[me]});const a=await k.get("/memberships/members",{params:l,noCache:!0}),U=((o=a.data)==null?void 0:o.data)||a.data||{};x.value=U.items||[],_.value=U.pagination||_.value}catch{x.value=[],f.error(t("common.errorLoading"))}finally{q.value=!1}},ke=async()=>{var o;try{const l=await k.get("/customers",{params:{per_page:200},noCache:!0}),a=((o=l.data)==null?void 0:o.data)||l.data||{};E.value=a.items||a||[]}catch{E.value=[]}},Ve=o=>{_.value.current_page=o,w()};let ue;const Me=()=>{clearTimeout(ue),ue=setTimeout(()=>{_.value.current_page=1,w()},500)},Pe=()=>{M.value={status:"",search:""},_.value.current_page=1,w()},K=(o=null)=>{S.value=o,u.value={name:(o==null?void 0:o.name)||"",name_ar:(o==null?void 0:o.name_ar)||"",description:(o==null?void 0:o.description)||"",price:Number((o==null?void 0:o.price)||0),duration_months:Number((o==null?void 0:o.duration_months)||1),discount_percentage:Number((o==null?void 0:o.discount_percentage)||0),free_services_count:Number((o==null?void 0:o.free_services_count)||0),priority_booking:!!Number((o==null?void 0:o.priority_booking)||0),points_multiplier:Number((o==null?void 0:o.points_multiplier)||1),is_active:o?!!Number((o==null?void 0:o.is_active)||0):!0},H.value=!0},W=()=>{H.value=!1,D.value=!1,S.value=null},Ne=async()=>{var o;if(!u.value.name){f.error(t("memberships.planNameRequired")||"Name is required");return}D.value=!0;try{const l={...u.value,price:Number(u.value.price||0),duration_months:Number(u.value.duration_months||1),discount_percentage:Number(u.value.discount_percentage||0),free_services_count:Number(u.value.free_services_count||0),points_multiplier:Number(u.value.points_multiplier||1),priority_booking:u.value.priority_booking?1:0,is_active:u.value.is_active?1:0};(o=S.value)!=null&&o.id?await k.put(`/memberships/plans/${S.value.id}`,l):await k.post("/memberships/plans",l),f.success(t("memberships.saved")||t("common.save")),W(),await G()}catch(l){console.error("Save plan error:",l),f.error(t("memberships.saveError")||t("common.errorLoading"))}finally{D.value=!1}},xe=async o=>{if(confirm(`${t("memberships.deletePlanConfirm")||"Delete plan?"} ${(o==null?void 0:o.name_ar)||(o==null?void 0:o.name)||""}`))try{await k.delete(`/memberships/plans/${o.id}`),f.success(t("common.delete")),await G()}catch{f.error(t("common.errorLoading"))}},ce=()=>{O.value=!0,h.value={customer_id:"",membership_plan_id:"",duration_months:1,auto_renew:!1}},X=()=>{O.value=!1,$.value=!1},Se=async()=>{if(!h.value.customer_id||!h.value.membership_plan_id){f.error(t("memberships.selectCustomerPlan")||"Select customer and plan");return}$.value=!0;try{await k.post("/memberships",{customer_id:Number(h.value.customer_id),membership_plan_id:Number(h.value.membership_plan_id),duration_months:Number(h.value.duration_months||1),auto_renew:h.value.auto_renew?1:0}),f.success(t("memberships.assigned")||"Assigned"),X(),C.value="members",await w()}catch(o){console.error("Assign membership error:",o),f.error(t("memberships.assignError")||t("common.errorLoading"))}finally{$.value=!1}},Ue=o=>{T.value=o,P.value={months:1,amount_paid:0},j.value=!0},Y=()=>{j.value=!1,F.value=!1,T.value=null},De=async()=>{var o;if((o=T.value)!=null&&o.id){F.value=!0;try{await k.post(`/memberships/${T.value.id}/renew`,{months:Number(P.value.months||1),amount_paid:Number(P.value.amount_paid||0)}),f.success(t("memberships.renewed")||"Renewed"),Y(),await w()}catch(l){console.error("Renew membership error:",l),f.error(t("memberships.renewError")||t("common.errorLoading"))}finally{F.value=!1}}},$e=async o=>{if(confirm(`${t("memberships.cancelConfirm")||"Cancel membership?"} ${(o==null?void 0:o.customer_name)||""}`))try{await k.delete(`/memberships/${o.id}`),f.success(t("memberships.cancelled")||"Cancelled"),await w()}catch{f.error(t("common.errorLoading"))}},Fe=()=>{he.push("/programs/settings")};return Te(()=>C.value,o=>{o==="members"&&w()}),Ae(async()=>{await Promise.all([G(),ke(),w()])}),(o,l)=>(m(),v("div",Xe,[s(Ge,{title:e(t)("memberships.title"),subtitle:e(t)("memberships.subtitle")||e(t)("memberships.title")+" - "+e(t)("dashboard.subtitle")},{icon:i(()=>[s(e(c),{icon:"cil-credit-card"})]),actions:i(()=>[s(e(g),{color:"secondary",variant:"outline",class:"me-2 settings-btn",onClick:Fe},{default:i(()=>[s(e(c),{icon:"cil-settings",class:"me-2"}),b(" "+r(e(t)("nav.programsSettings")),1)]),_:1}),s(e(g),{color:"secondary",variant:"outline",class:"me-2",onClick:ce},{default:i(()=>[s(e(c),{icon:"cil-user-follow",class:"me-2"}),b(" "+r(e(t)("memberships.assign")||"Assign Membership"),1)]),_:1}),s(e(g),{color:"primary",class:"btn-primary-custom",onClick:l[0]||(l[0]=a=>K())},{default:i(()=>[s(e(c),{icon:"cil-plus",class:"me-2"}),b(" "+r(e(t)("memberships.newPlan")||"New Plan"),1)]),_:1})]),_:1},8,["title","subtitle"]),n("div",Ye,[s(B,{label:e(t)("memberships.plans")||"Plans",value:ne.value.total,"badge-variant":"info",color:"gold",clickable:!0,onClick:l[1]||(l[1]=()=>C.value="plans")},{icon:i(()=>[s(e(c),{icon:"cil-layers"})]),_:1},8,["label","value"]),s(B,{label:e(t)("memberships.activePlans")||"Active Plans",value:ne.value.active,"badge-variant":"success",color:"gold",clickable:!0,onClick:l[2]||(l[2]=()=>C.value="plans")},{icon:i(()=>[s(e(c),{icon:"cil-check-circle"})]),_:1},8,["label","value"]),s(B,{label:e(t)("memberships.members")||"Members",value:re.value.total,"badge-variant":"info",color:"gold",clickable:!0,onClick:l[3]||(l[3]=()=>C.value="members")},{icon:i(()=>[s(e(c),{icon:"cil-people"})]),_:1},8,["label","value"]),s(B,{label:e(t)("memberships.active"),value:re.value.active,"badge-variant":"success",color:"gold",clickable:!0,onClick:l[4]||(l[4]=()=>{C.value="members",M.value.status="active",_.value.current_page=1,w()})},{icon:i(()=>[s(e(c),{icon:"cil-user"})]),_:1},8,["label","value"])]),s(e(Re),{class:"tabs-card"},{default:i(()=>[s(e(Le),null,{default:i(()=>[s(e(Be),{variant:"tabs"},{default:i(()=>[s(e(de),{active:C.value==="plans",onClick:l[5]||(l[5]=a=>C.value="plans")},{default:i(()=>[b(r(e(t)("memberships.plansTab")||"Plans"),1)]),_:1},8,["active"]),s(e(de),{active:C.value==="members",onClick:l[6]||(l[6]=a=>C.value="members")},{default:i(()=>[b(r(e(t)("memberships.membersTab")||"Members"),1)]),_:1},8,["active"])]),_:1})]),_:1}),s(e(Ee),null,{default:i(()=>[C.value==="plans"?(m(),v("div",Ze,[z.value?(m(),A(ve,{key:0,text:e(t)("common.loading")},null,8,["text"])):V.value.length===0?(m(),A(be,{key:1,title:e(t)("common.noData"),description:e(t)("memberships.noPlans")||e(t)("common.noData"),"icon-color":"gray"},{action:i(()=>[s(e(g),{color:"primary",class:"btn-primary-custom",onClick:l[7]||(l[7]=a=>K())},{default:i(()=>[s(e(c),{icon:"cil-plus",class:"me-2"}),b(" "+r(e(t)("memberships.newPlan")||"New Plan"),1)]),_:1})]),_:1},8,["title","description"])):(m(),v("div",Je,[s(e(pe),{hover:"",responsive:"",class:"table-modern memberships-table"},{default:i(()=>[n("thead",null,[n("tr",Qe,[n("th",es,r(e(t)("memberships.plan")),1),n("th",ss,r(e(t)("memberships.price")||"Price"),1),n("th",ts,r(e(t)("memberships.durationMonths")||"Duration"),1),n("th",as,r(e(t)("memberships.discount")||"Discount"),1),n("th",ls,r(e(t)("memberships.freeServices")||"Free Services"),1),n("th",os,r(e(t)("memberships.pointsMultiplier")||"Points Multiplier"),1),n("th",is,r(e(t)("common.status")),1),n("th",ns,r(e(t)("common.actions")),1)])]),n("tbody",null,[(m(!0),v(R,null,I(V.value,a=>(m(),v("tr",{key:a.id,class:"table-row plan-row"},[n("td",rs,[n("div",us,[n("strong",cs,r(a.name_ar||a.name),1),a.description?(m(),v("small",ms,r(a.description),1)):Q("",!0)])]),n("td",ds,[n("strong",ps,r(fe(a.price||0)),1)]),n("td",_s,[s(e(N),{class:"unified-badge badge-info"},{default:i(()=>[s(e(c),{icon:"cil-calendar",class:"badge-icon"}),n("span",null,r(a.duration_months||1)+" "+r(e(t)("memberships.months")||"months"),1)]),_:2},1024)]),n("td",bs,[s(e(N),{class:"unified-badge badge-rate"},{default:i(()=>[s(e(c),{icon:"cil-percent",class:"badge-icon"}),n("span",null,r(a.discount_percentage||0)+"%",1)]),_:2},1024)]),n("td",vs,[s(e(N),{class:"unified-badge badge-bonus"},{default:i(()=>[s(e(c),{icon:"cil-spreadsheet",class:"badge-icon"}),n("span",null,r(a.free_services_count||0),1)]),_:2},1024)]),n("td",hs,[s(e(N),{class:"unified-badge badge-info"},{default:i(()=>[s(e(c),{icon:"cil-star",class:"badge-icon"}),n("span",null,"x"+r(a.points_multiplier||1),1)]),_:2},1024)]),n("td",fs,[s(e(N),{class:_e(["unified-badge",a.is_active?"status-active":"status-inactive"])},{default:i(()=>[s(e(c),{icon:a.is_active?"cil-check-circle":"cil-x-circle",class:"badge-icon"},null,8,["icon"]),n("span",null,r(a.is_active?e(t)("common.active"):e(t)("common.inactive")),1)]),_:2},1032,["class"])]),n("td",gs,[n("div",ys,[n("button",{class:"action-btn",type:"button",onClick:U=>K(a),title:e(t)("common.edit")},[s(e(c),{icon:"cil-pencil"})],8,Cs),n("button",{class:"action-btn",type:"button",onClick:U=>xe(a),title:e(t)("common.delete")},[s(e(c),{icon:"cil-trash"})],8,ws)])])]))),128))])]),_:1})]))])):(m(),v("div",ks,[s(We,{title:e(t)("common.filter"),icon:"cil-filter",class:"filters-card"},{default:i(()=>[s(e(L),{class:"g-3"},{default:i(()=>[s(e(p),{md:3},{default:i(()=>[s(e(ee),{modelValue:M.value.status,"onUpdate:modelValue":l[8]||(l[8]=a=>M.value.status=a),onChange:w,class:"filter-select"},{default:i(()=>[n("option",Vs,r(e(t)("common.status")),1),n("option",Ms,r(e(t)("memberships.active")),1),n("option",Ps,r(e(t)("memberships.expired")),1),n("option",Ns,r(e(t)("memberships.cancelled")||"Cancelled"),1)]),_:1},8,["modelValue"])]),_:1}),s(e(p),{md:9},{default:i(()=>[s(e(ze),{class:"search-input-group"},{default:i(()=>[s(e(qe),{class:"search-icon-wrapper"},{default:i(()=>[s(e(c),{icon:"cil-magnifying-glass"})]),_:1}),s(e(y),{modelValue:M.value.search,"onUpdate:modelValue":l[9]||(l[9]=a=>M.value.search=a),placeholder:e(t)("memberships.searchCustomer")||"Search customer...",onInput:Me,class:"filter-input search-input"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),s(e(p),{md:3},{default:i(()=>[s(e(g),{color:"secondary",variant:"outline",onClick:Pe,class:"w-100 reset-btn"},{default:i(()=>[s(e(c),{icon:"cil-reload",class:"me-1"}),b(" "+r(e(t)("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"]),q.value?(m(),A(ve,{key:0,text:e(t)("common.loading")},null,8,["text"])):x.value.length===0?(m(),A(be,{key:1,title:e(t)("common.noData"),description:e(t)("memberships.noMembers")||e(t)("common.noData"),"icon-color":"gray"},{action:i(()=>[s(e(g),{color:"primary",class:"btn-primary-custom",onClick:ce},{default:i(()=>[s(e(c),{icon:"cil-user-follow",class:"me-2"}),b(" "+r(e(t)("memberships.assign")||"Assign Membership"),1)]),_:1})]),_:1},8,["title","description"])):(m(),v("div",xs,[s(e(pe),{hover:"",responsive:"",class:"table-modern memberships-table"},{default:i(()=>[n("thead",null,[n("tr",Ss,[n("th",Us,r(e(t)("memberships.customer")),1),n("th",Ds,r(e(t)("memberships.plan")),1),n("th",$s,r(e(t)("memberships.startDate"))+" / "+r(e(t)("memberships.endDate")),1),n("th",Fs,r(e(t)("memberships.servicesUsed")||"Services Used"),1),n("th",Ts,r(e(t)("common.status")),1),n("th",As,r(e(t)("common.actions")),1)])]),n("tbody",null,[(m(!0),v(R,null,I(x.value,a=>(m(),v("tr",{key:a.id,class:"table-row member-row"},[n("td",Rs,[n("div",Is,[n("strong",Ls,r(a.customer_name||"—"),1),a.customer_phone?(m(),v("a",{key:0,class:"customer-phone",href:`tel:${a.customer_phone}`},r(a.customer_phone),9,Bs)):Q("",!0)])]),n("td",Es,[n("strong",null,r(a.plan_name_ar||a.plan_name||"—"),1)]),n("td",zs,[n("div",qs,[n("span",null,r(ie(a.start_date)),1),n("span",Hs,r(ie(a.end_date)),1)])]),n("td",Os,[s(e(N),{class:"unified-badge badge-info"},{default:i(()=>[s(e(c),{icon:"cil-spreadsheet",class:"badge-icon"}),n("span",null,r(a.services_used||0)+" / "+r(a.services_limit??"∞"),1)]),_:2},1024)]),n("td",js,[s(e(N),{class:_e(["unified-badge",we(a.status)])},{default:i(()=>[s(e(c),{icon:Ce(a.status),class:"badge-icon"},null,8,["icon"]),n("span",null,r(ye(a.status)),1)]),_:2},1032,["class"])]),n("td",Gs,[n("div",Ks,[n("button",{class:"action-btn",type:"button",onClick:U=>Ue(a),title:e(t)("memberships.renew")||"Renew"},[s(e(c),{icon:"cil-clock"})],8,Ws),n("button",{class:"action-btn",type:"button",onClick:U=>$e(a),title:e(t)("memberships.cancel")||"Cancel"},[s(e(c),{icon:"cil-ban"})],8,Xs)])])]))),128))])]),_:1})])),_.value.total_pages>1?(m(),v("div",Ys,[n("div",Zs,r(e(t)("common.view"))+" "+r((_.value.current_page-1)*_.value.per_page+1)+" "+r(e(t)("common.to"))+" "+r(Math.min(_.value.current_page*_.value.per_page,_.value.total))+" "+r(e(t)("common.of"))+" "+r(_.value.total),1),s(e(He),{pages:_.value.total_pages,"active-page":_.value.current_page,"onUpdate:activePage":Ve},null,8,["pages","active-page"])])):Q("",!0)]))]),_:1})]),_:1}),s(e(J),{visible:H.value,onClose:W,size:"lg"},{default:i(()=>[s(e(se),null,{default:i(()=>[s(e(te),null,{default:i(()=>[s(e(c),{icon:S.value?"cil-pencil":"cil-plus",class:"me-2"},null,8,["icon"]),b(" "+r(S.value?e(t)("memberships.editPlan")||"Edit Plan":e(t)("memberships.newPlan")||"New Plan"),1)]),_:1})]),_:1}),s(e(ae),null,{default:i(()=>[s(e(L),{class:"g-3"},{default:i(()=>[s(e(p),{md:6},{default:i(()=>[s(e(y),{modelValue:u.value.name,"onUpdate:modelValue":l[10]||(l[10]=a=>u.value.name=a),label:e(t)("memberships.planName")||"Name",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(p),{md:6},{default:i(()=>[s(e(y),{modelValue:u.value.name_ar,"onUpdate:modelValue":l[11]||(l[11]=a=>u.value.name_ar=a),label:e(t)("memberships.planNameAr")||"Arabic Name",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(p),{md:12},{default:i(()=>[s(e(y),{modelValue:u.value.description,"onUpdate:modelValue":l[12]||(l[12]=a=>u.value.description=a),label:e(t)("memberships.description")||"Description",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(p),{md:4},{default:i(()=>[s(e(y),{modelValue:u.value.price,"onUpdate:modelValue":l[13]||(l[13]=a=>u.value.price=a),modelModifiers:{number:!0},type:"number",min:"0",step:"0.001",label:e(t)("memberships.price")||"Price",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(p),{md:4},{default:i(()=>[s(e(y),{modelValue:u.value.duration_months,"onUpdate:modelValue":l[14]||(l[14]=a=>u.value.duration_months=a),modelModifiers:{number:!0},type:"number",min:"1",step:"1",label:e(t)("memberships.durationMonths")||"Duration (months)",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(p),{md:4},{default:i(()=>[s(e(y),{modelValue:u.value.discount_percentage,"onUpdate:modelValue":l[15]||(l[15]=a=>u.value.discount_percentage=a),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",label:e(t)("memberships.discount")||"Discount (%)",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(p),{md:4},{default:i(()=>[s(e(y),{modelValue:u.value.free_services_count,"onUpdate:modelValue":l[16]||(l[16]=a=>u.value.free_services_count=a),modelModifiers:{number:!0},type:"number",min:"0",step:"1",label:e(t)("memberships.freeServices")||"Free Services",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(p),{md:4},{default:i(()=>[s(e(y),{modelValue:u.value.points_multiplier,"onUpdate:modelValue":l[17]||(l[17]=a=>u.value.points_multiplier=a),modelModifiers:{number:!0},type:"number",min:"0",step:"0.01",label:e(t)("memberships.pointsMultiplier")||"Points Multiplier",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(p),{md:4,class:"d-flex align-items-center"},{default:i(()=>[s(e(le),{modelValue:u.value.priority_booking,"onUpdate:modelValue":l[18]||(l[18]=a=>u.value.priority_booking=a),label:e(t)("memberships.priorityBooking")||"Priority booking"},null,8,["modelValue","label"])]),_:1}),s(e(p),{md:4,class:"d-flex align-items-center"},{default:i(()=>[s(e(le),{modelValue:u.value.is_active,"onUpdate:modelValue":l[19]||(l[19]=a=>u.value.is_active=a),label:e(t)("common.active")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),s(e(oe),null,{default:i(()=>[s(e(g),{color:"secondary",onClick:W},{default:i(()=>[b(r(e(t)("common.cancel")),1)]),_:1}),s(e(g),{color:"primary",class:"btn-primary-custom",disabled:D.value,onClick:Ne},{default:i(()=>[s(e(c),{icon:"cil-save",class:"me-2"}),b(" "+r(D.value?e(t)("common.saving"):e(t)("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["visible"]),s(e(J),{visible:O.value,onClose:X,size:"lg"},{default:i(()=>[s(e(se),null,{default:i(()=>[s(e(te),null,{default:i(()=>[s(e(c),{icon:"cil-user-follow",class:"me-2"}),b(" "+r(e(t)("memberships.assign")||"Assign Membership"),1)]),_:1})]),_:1}),s(e(ae),null,{default:i(()=>[s(e(L),{class:"g-3"},{default:i(()=>[s(e(p),{md:6},{default:i(()=>[s(e(ee),{modelValue:h.value.customer_id,"onUpdate:modelValue":l[20]||(l[20]=a=>h.value.customer_id=a),label:e(t)("memberships.customer"),class:"filter-select"},{default:i(()=>[n("option",Js,r(e(t)("common.select")),1),(m(!0),v(R,null,I(ge.value,a=>(m(),v("option",{key:a.id,value:String(a.id)},r(a.name)+" ("+r(a.phone)+")",9,Qs))),128))]),_:1},8,["modelValue","label"])]),_:1}),s(e(p),{md:6},{default:i(()=>[s(e(ee),{modelValue:h.value.membership_plan_id,"onUpdate:modelValue":l[21]||(l[21]=a=>h.value.membership_plan_id=a),label:e(t)("memberships.plan"),class:"filter-select"},{default:i(()=>[n("option",et,r(e(t)("common.select")),1),(m(!0),v(R,null,I(V.value,a=>(m(),v("option",{key:a.id,value:String(a.id)},r(a.name_ar||a.name),9,st))),128))]),_:1},8,["modelValue","label"])]),_:1}),s(e(p),{md:6},{default:i(()=>[s(e(y),{modelValue:h.value.duration_months,"onUpdate:modelValue":l[22]||(l[22]=a=>h.value.duration_months=a),modelModifiers:{number:!0},type:"number",min:"1",step:"1",label:e(t)("memberships.durationMonths")||"Duration (months)",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(p),{md:6,class:"d-flex align-items-center"},{default:i(()=>[s(e(le),{modelValue:h.value.auto_renew,"onUpdate:modelValue":l[23]||(l[23]=a=>h.value.auto_renew=a),label:e(t)("memberships.autoRenew")||"Auto renew"},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),s(e(oe),null,{default:i(()=>[s(e(g),{color:"secondary",onClick:X},{default:i(()=>[b(r(e(t)("common.cancel")),1)]),_:1}),s(e(g),{color:"primary",class:"btn-primary-custom",disabled:$.value,onClick:Se},{default:i(()=>[s(e(c),{icon:"cil-check",class:"me-2"}),b(" "+r($.value?e(t)("common.saving"):e(t)("memberships.assign")||"Assign"),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["visible"]),s(e(J),{visible:j.value,onClose:Y,size:"lg"},{default:i(()=>[s(e(se),null,{default:i(()=>[s(e(te),null,{default:i(()=>[s(e(c),{icon:"cil-clock",class:"me-2"}),b(" "+r(e(t)("memberships.renew")||"Renew Membership"),1)]),_:1})]),_:1}),s(e(ae),null,{default:i(()=>[s(e(L),{class:"g-3"},{default:i(()=>[s(e(p),{md:6},{default:i(()=>[s(e(y),{modelValue:P.value.months,"onUpdate:modelValue":l[24]||(l[24]=a=>P.value.months=a),modelModifiers:{number:!0},type:"number",min:"1",step:"1",label:e(t)("memberships.monthsToExtend")||"Months",class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(p),{md:6},{default:i(()=>[s(e(y),{modelValue:P.value.amount_paid,"onUpdate:modelValue":l[25]||(l[25]=a=>P.value.amount_paid=a),modelModifiers:{number:!0},type:"number",min:"0",step:"0.001",label:e(t)("memberships.amountPaid")||"Amount paid",class:"filter-input"},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),s(e(oe),null,{default:i(()=>[s(e(g),{color:"secondary",onClick:Y},{default:i(()=>[b(r(e(t)("common.cancel")),1)]),_:1}),s(e(g),{color:"primary",class:"btn-primary-custom",disabled:F.value,onClick:De},{default:i(()=>[s(e(c),{icon:"cil-check",class:"me-2"}),b(" "+r(F.value?e(t)("common.saving"):e(t)("memberships.renew")||"Renew"),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["visible"])]))}},ft=Ke(tt,[["__scopeId","data-v-f49f9700"]]);export{ft as default};
