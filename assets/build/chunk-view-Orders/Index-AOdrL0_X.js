import{f as g,j as W,c as _,o as u,b as t,d as o,t as s,u as e,w as n,Y as k,x as y,C as i,$ as H,h as q,a as F,F as M,g as N,ae as G,a0 as L,l as E,P as m,n as Y,a2 as V,aa as A,ab as J,a3 as Q,a4 as X,s as Z,a5 as tt,a6 as et,a7 as st,a8 as ot}from"../chunk-vendor-vue-VAxhpvd9.js";import{u as at,a as U}from"../chunk-component-NotificationsBell-CTLJWkW4.js";import{u as lt}from"../chunk-view-AppleWallet/Simulator-BwS6bEkK.js";import{H as nt}from"../chunk-component-HelpSection-NeetTt3d.js";import{_ as ct}from"../chunk-component-Card-DPM96EeB.js";import"../chunk-vendor-Ltsl4QyH.js";import"../chunk-vendor-pinia-CjQxP09R.js";import"../chunk-vendor-axios-B9ygI19o.js";import"../chunk-component-PageHeader-CMYNL4hu.js";const dt={class:"orders-page p-4"},it={class:"pos-header-top d-flex justify-content-between align-items-center mb-4"},rt={class:"header-left d-flex align-items-center gap-3"},ut={class:"mb-0 fw-bold text-primary"},_t={class:"header-right d-flex gap-2"},mt={class:"nano-stats-bar mb-4"},pt={class:"stat-icon-bg orders"},vt={class:"stat-info"},ht={class:"stat-value"},ft={class:"stat-label"},bt={class:"stat-icon-bg pending"},gt={class:"stat-info"},yt={class:"stat-value text-warning"},xt={class:"stat-label"},Ct={class:"stat-icon-bg completed"},wt={class:"stat-info"},kt={class:"stat-value text-success"},It={class:"stat-label"},Ft={class:"stat-card-nano"},Vt={class:"stat-icon-bg revenue"},St={class:"stat-info"},Tt={class:"stat-value text-info"},Ot={class:"stat-label"},jt={class:"nano-filters-bar p-3 bg-secondary rounded-4 mb-4 shadow-sm border border-light"},Mt={value:""},Nt={value:"pending"},Ut={value:"processing"},$t={value:"completed"},Bt={value:"cancelled"},Rt={class:"nano-panel"},Dt={key:0,class:"text-center p-5"},zt={key:1,class:"text-center p-5 text-muted opacity-50"},Pt={key:2},Kt={class:"nano-table-container"},Wt={class:"nano-table w-100"},Ht={class:"text-start"},qt={class:"text-end"},Gt={class:"text-start"},Lt={class:"text-primary"},Et={class:"fw-bold"},Yt={class:"small text-muted"},At={class:"text-end fw-bold text-success"},Jt={class:"d-flex gap-2 justify-content-center"},Qt={key:0,class:"d-flex justify-content-center mt-5"},Xt={class:"d-flex justify-content-between mb-4"},Zt={class:"small text-muted fw-bold mb-1"},te={class:"fw-bold"},ee={class:"text-end"},se={class:"small text-muted fw-bold mb-1"},oe={class:"items-table-wrapper rounded-4 border bg-tertiary overflow-hidden mb-4"},ae={class:"table mb-0"},le={class:"bg-secondary"},ne={class:"border-0"},ce={class:"border-0 text-center"},de={class:"border-0 text-end"},ie={class:"border-0 text-end"},re={class:"text-center"},ue={class:"text-end"},_e={class:"text-end fw-bold"},me={class:"order-summary-box p-3 bg-secondary rounded-4"},pe={class:"d-flex justify-content-between mb-2"},ve={class:"text-muted"},he={class:"fw-bold"},fe={key:0,class:"d-flex justify-content-between mb-2 text-danger"},be={class:"d-flex justify-content-between mt-2 pt-2 border-top"},ge={class:"fw-bold mb-0"},ye={class:"fw-bold text-primary mb-0"},xe={__name:"Index",setup(Ce){const{t:a}=at(),$=lt(),B=E(),C=g(!1),I=g([]),f=g({total:0,pending:0,completed:0,totalRevenue:0}),p=g({current_page:1,per_page:15,total:0,total_pages:0}),v=g({search:"",status:""}),w=g(!1),r=g(null),h=async()=>{var d,c;C.value=!0;try{const l=await U.get("/orders",{params:{page:p.value.current_page,per_page:p.value.per_page,...v.value}}),b=((d=l.data)==null?void 0:d.data)||l.data;I.value=b.items||[],p.value=b.pagination||p.value;const j=await U.get("/orders/stats");f.value=((c=j.data)==null?void 0:c.data)||j.data||f.value}catch(l){console.error("Failed to load orders:",l)}finally{C.value=!1}},R=()=>{clearTimeout(window.oSearchTimer),window.searchTimer=setTimeout(h,500)},S=()=>{v.value={search:"",status:""},h()},D=d=>{p.value.current_page=d,h()},T=d=>{switch(d){case"pending":return"warning";case"processing":return"info";case"completed":return"success";case"cancelled":return"danger";default:return"secondary"}},x=d=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:3}).format(d||0),z=d=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",notation:"compact",minimumFractionDigits:1}).format(d||0),P=d=>{r.value=d,w.value=!0},O=d=>{$.info(a("orders.sendingToPrinter"))},K=()=>B.push("/pos");return W(()=>{h()}),(d,c)=>(u(),_("div",dt,[t("div",it,[t("div",rt,[t("h2",ut,s(e(a)("orders.title")),1),o(e(k),{color:"gold",shape:"rounded-pill",class:"px-3 py-2 fw-bold text-dark"},{default:n(()=>[o(e(i),{icon:"cil-cart",class:"me-1"}),m(" "+s(f.value.total||0)+" "+s(e(a)("orders.totalOrders")),1)]),_:1})]),t("div",_t,[o(e(y),{color:"primary",class:"nano-btn",onClick:K},{default:n(()=>[o(e(i),{icon:"cil-plus",class:"me-2"}),m(s(e(a)("orders.addNew")),1)]),_:1}),o(e(y),{color:"secondary",variant:"ghost",onClick:h,disabled:C.value},{default:n(()=>[o(e(i),{icon:"cil-reload",class:Y({spinning:C.value})},null,8,["class"])]),_:1},8,["disabled"])])]),t("div",mt,[t("div",{class:"stat-card-nano clickable",onClick:S},[t("div",pt,[o(e(i),{icon:"cil-cart"})]),t("div",vt,[t("div",ht,s(f.value.total||0),1),t("div",ft,s(e(a)("orders.totalOrders")),1)])]),t("div",{class:"stat-card-nano clickable",onClick:c[0]||(c[0]=l=>{v.value.status="pending",h()})},[t("div",bt,[o(e(i),{icon:"cil-clock"})]),t("div",gt,[t("div",yt,s(f.value.pending||0),1),t("div",xt,s(e(a)("orders.pendingOrders")),1)])]),t("div",{class:"stat-card-nano clickable",onClick:c[1]||(c[1]=l=>{v.value.status="completed",h()})},[t("div",Ct,[o(e(i),{icon:"cil-check-circle"})]),t("div",wt,[t("div",kt,s(f.value.completed||0),1),t("div",It,s(e(a)("status.completed")),1)])]),t("div",Ft,[t("div",Vt,[o(e(i),{icon:"cil-money"})]),t("div",St,[t("div",Tt,s(z(f.value.totalRevenue||0)),1),t("div",Ot,s(e(a)("reports.totalRevenue")),1)])])]),t("div",jt,[o(e(H),{class:"g-3 align-items-center"},{default:n(()=>[o(e(V),{md:"4"},{default:n(()=>[o(e(A),null,{default:n(()=>[o(e(J),{class:"bg-transparent border-0"},{default:n(()=>[o(e(i),{icon:"cil-magnifying-glass"})]),_:1}),o(e(Q),{modelValue:v.value.search,"onUpdate:modelValue":c[2]||(c[2]=l=>v.value.search=l),placeholder:e(a)("common.search"),onInput:R,class:"border-0 bg-transparent"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),o(e(V),{md:"3"},{default:n(()=>[o(e(X),{modelValue:v.value.status,"onUpdate:modelValue":c[3]||(c[3]=l=>v.value.status=l),onChange:h,class:"rounded-3"},{default:n(()=>[t("option",Mt,s(e(a)("orders.allStatuses")),1),t("option",Nt,s(e(a)("status.pending")),1),t("option",Ut,s(e(a)("status.processing")),1),t("option",$t,s(e(a)("status.completed")),1),t("option",Bt,s(e(a)("status.cancelled")),1)]),_:1},8,["modelValue"])]),_:1}),o(e(V),{md:"3"},{default:n(()=>[o(e(y),{color:"primary",variant:"ghost",class:"w-100",onClick:S},{default:n(()=>[o(e(i),{icon:"cil-filter-x",class:"me-1"}),m(s(e(a)("common.reset")),1)]),_:1})]),_:1})]),_:1})]),t("div",Rt,[C.value?(u(),_("div",Dt,[o(e(q),{color:"primary"})])):I.value.length===0?(u(),_("div",zt,[o(e(i),{icon:"cil-inbox",size:"xl",class:"mb-3"}),t("p",null,s(e(a)("orders.noOrders")),1)])):(u(),_("div",Pt,[t("div",Kt,[t("table",Wt,[t("thead",null,[t("tr",null,[t("th",Ht,s(e(a)("orders.orderNumber")),1),t("th",null,s(e(a)("common.customer")),1),t("th",null,s(e(a)("common.items")),1),t("th",qt,s(e(a)("common.total")),1),t("th",null,s(e(a)("common.status")),1),t("th",null,s(e(a)("common.date")),1),t("th",null,s(e(a)("common.actions")),1)])]),t("tbody",null,[(u(!0),_(M,null,N(I.value,l=>(u(),_("tr",{key:l.id,class:"nano-table-row"},[t("td",Gt,[t("strong",Lt,"#"+s(l.id),1)]),t("td",null,[t("div",Et,s(l.customer_name||e(a)("common.walkIn")),1),t("div",Yt,s(l.customer_phone),1)]),t("td",null,[o(e(k),{color:"secondary",shape:"rounded-pill"},{default:n(()=>[m(s(l.item_count||0)+" "+s(e(a)("common.items")),1)]),_:2},1024)]),t("td",At,s(x(l.total||0)),1),t("td",null,[o(e(k),{color:T(l.status),shape:"rounded-pill",class:"px-3"},{default:n(()=>{var b;return[m(s((b=l.status)==null?void 0:b.toUpperCase()),1)]}),_:2},1032,["color"])]),t("td",null,s(new Date(l.created_at).toLocaleString()),1),t("td",null,[t("div",Jt,[o(e(y),{size:"sm",color:"info",variant:"ghost",onClick:b=>P(l)},{default:n(()=>[o(e(i),{icon:"cil-external-link"})]),_:1},8,["onClick"]),o(e(y),{size:"sm",color:"primary",variant:"ghost",onClick:b=>O()},{default:n(()=>[o(e(i),{icon:"cil-print"})]),_:1},8,["onClick"])])])]))),128))])])]),p.value.total_pages>1?(u(),_("div",Qt,[o(e(G),{pages:p.value.total_pages,"active-page":p.value.current_page,"onUpdate:activePage":D},null,8,["pages","active-page"])])):F("",!0)]))]),o(e(L),{visible:w.value,onClose:c[6]||(c[6]=l=>w.value=!1),size:"lg",alignment:"center"},{default:n(()=>[o(e(tt),null,{default:n(()=>[o(e(et),null,{default:n(()=>{var l;return[o(e(i),{icon:"cil-cart",class:"me-2"}),m("Order #"+s((l=r.value)==null?void 0:l.id),1)]}),_:1})]),_:1}),r.value?(u(),Z(e(st),{key:0,class:"p-4"},{default:n(()=>[t("div",Xt,[t("div",null,[t("div",Zt,s(e(a)("common.customer").toUpperCase()),1),t("h4",te,s(r.value.customer_name||e(a)("common.walkIn")),1)]),t("div",ee,[t("div",se,s(e(a)("common.status").toUpperCase()),1),o(e(k),{color:T(r.value.status),shape:"rounded-pill",class:"px-3 py-2 fs-6"},{default:n(()=>{var l;return[m(s((l=r.value.status)==null?void 0:l.toUpperCase()),1)]}),_:1},8,["color"])])]),t("div",oe,[t("table",ae,[t("thead",le,[t("tr",null,[t("th",ne,s(e(a)("common.item")),1),t("th",ce,s(e(a)("common.qty")),1),t("th",de,s(e(a)("common.price")),1),t("th",ie,s(e(a)("common.total")),1)])]),t("tbody",null,[(u(!0),_(M,null,N(r.value.items,l=>(u(),_("tr",{key:l.id},[t("td",null,s(l.name),1),t("td",re,s(l.quantity),1),t("td",ue,s(x(l.unit_price)),1),t("td",_e,s(x(l.total)),1)]))),128))])])]),t("div",me,[t("div",pe,[t("span",ve,s(e(a)("common.subtotal")),1),t("span",he,s(x(r.value.subtotal)),1)]),r.value.discount>0?(u(),_("div",fe,[t("span",null,s(e(a)("common.discount")),1),t("span",null,"-"+s(x(r.value.discount)),1)])):F("",!0),t("div",be,[t("h4",ge,s(e(a)("common.total").toUpperCase()),1),t("h4",ye,s(x(r.value.total)),1)])])]),_:1})):F("",!0),o(e(ot),null,{default:n(()=>[o(e(y),{color:"secondary",variant:"ghost",onClick:c[4]||(c[4]=l=>w.value=!1)},{default:n(()=>[m(s(e(a)("common.close")),1)]),_:1}),o(e(y),{color:"primary",class:"nano-btn",onClick:c[5]||(c[5]=l=>O(r.value))},{default:n(()=>[o(e(i),{icon:"cil-print",class:"me-2"}),m(s(e(a)("orders.printReceipt")),1)]),_:1})]),_:1})]),_:1},8,["visible"]),o(nt,{"page-key":"orders"})]))}},Me=ct(xe,[["__scopeId","data-v-98e7d052"]]);export{Me as default};
