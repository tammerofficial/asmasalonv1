import{f as b,j as A,c as u,o as c,b as t,d as a,t as o,u as s,w as n,Y as k,x as h,C as i,$ as K,h as H,a as S,F as P,g as j,ae as L,a0 as E,l as G,P as p,n as q,a2 as I,aa as Q,ab as Y,a3 as J,a4 as X,s as Z,a5 as tt,a6 as et,a7 as st,a8 as at}from"../chunk-vendor-vue-BKzcbwC-.js";import{u as lt,a as D}from"../chunk-component-NotificationsBell-BXS18BTB.js";import{u as ot}from"../chunk-view-AppleWallet/Simulator-DWRUiMHd.js";import{H as nt}from"../chunk-component-HelpSection-B1vxldAY.js";import{_ as dt}from"../chunk-component-Card-D7ddNvJz.js";import"../chunk-vendor-Ltsl4QyH.js";import"../chunk-vendor-pinia-CsGkbfJ3.js";import"../chunk-vendor-axios-B9ygI19o.js";import"../chunk-component-PageHeader-CI_3JpQM.js";const it={class:"orders-page p-4"},rt={class:"pos-header-top d-flex justify-content-between align-items-center mb-4"},ct={class:"header-left d-flex align-items-center gap-3"},ut={class:"mb-0 fw-bold text-primary"},pt={class:"header-right d-flex gap-2"},mt={class:"nano-stats-bar mb-4"},vt={class:"stat-icon-bg orders"},_t={class:"stat-info"},ft={class:"stat-value"},gt={class:"stat-icon-bg pending"},bt={class:"stat-info"},ht={class:"stat-value text-warning"},yt={class:"stat-icon-bg completed"},xt={class:"stat-info"},Ct={class:"stat-value text-success"},wt={class:"stat-card-nano"},kt={class:"stat-icon-bg revenue"},Tt={class:"stat-info"},St={class:"stat-value text-info"},It={class:"nano-filters-bar p-3 bg-secondary rounded-4 mb-4 shadow-sm border border-light"},Ft={class:"nano-panel"},Ot={key:0,class:"text-center p-5"},Vt={key:1,class:"text-center p-5 text-muted opacity-50"},Mt={key:2},Pt={class:"nano-table-container"},jt={class:"nano-table w-100"},Dt={class:"text-start"},Nt={class:"text-primary"},Rt={class:"fw-bold"},$t={class:"small text-muted"},Bt={class:"text-end fw-bold text-success"},Ut={class:"d-flex gap-2 justify-content-center"},Wt={key:0,class:"d-flex justify-content-center mt-5"},zt={class:"d-flex justify-content-between mb-4"},At={class:"fw-bold"},Kt={class:"text-end"},Ht={class:"items-table-wrapper rounded-4 border bg-tertiary overflow-hidden mb-4"},Lt={class:"table mb-0"},Et={class:"text-center"},Gt={class:"text-end"},qt={class:"text-end fw-bold"},Qt={class:"order-summary-box p-3 bg-secondary rounded-4"},Yt={class:"d-flex justify-content-between mb-2"},Jt={class:"fw-bold"},Xt={key:0,class:"d-flex justify-content-between mb-2 text-danger"},Zt={class:"d-flex justify-content-between mt-2 pt-2 border-top"},te={class:"fw-bold text-primary mb-0"},ee={__name:"Index",setup(se){const{t:x}=lt(),N=ot(),R=G(),C=b(!1),T=b([]),f=b({total:0,pending:0,completed:0,totalRevenue:0}),m=b({current_page:1,per_page:15,total:0,total_pages:0}),v=b({search:"",status:""}),w=b(!1),r=b(null),_=async()=>{var d,e;C.value=!0;try{const l=await D.get("/orders",{params:{page:m.value.current_page,per_page:m.value.per_page,...v.value}}),g=((d=l.data)==null?void 0:d.data)||l.data;T.value=g.items||[],m.value=g.pagination||m.value;const M=await D.get("/orders/stats");f.value=((e=M.data)==null?void 0:e.data)||M.data||f.value}catch(l){console.error("Failed to load orders:",l)}finally{C.value=!1}},$=()=>{clearTimeout(window.oSearchTimer),window.searchTimer=setTimeout(_,500)},F=()=>{v.value={search:"",status:""},_()},B=d=>{m.value.current_page=d,_()},O=d=>{switch(d){case"pending":return"warning";case"processing":return"info";case"completed":return"success";case"cancelled":return"danger";default:return"secondary"}},y=d=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:3}).format(d||0),U=d=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",notation:"compact",minimumFractionDigits:1}).format(d||0),W=d=>{r.value=d,w.value=!0},V=d=>{N.info("Sending to printer...")},z=()=>R.push("/pos");return A(()=>{_()}),(d,e)=>(c(),u("div",it,[t("div",rt,[t("div",ct,[t("h2",ut,o(s(x)("orders.title")),1),a(s(k),{color:"gold",shape:"rounded-pill",class:"px-3 py-2 fw-bold text-dark"},{default:n(()=>[a(s(i),{icon:"cil-cart",class:"me-1"}),p(" "+o(f.value.total||0)+" Total Orders ",1)]),_:1})]),t("div",pt,[a(s(h),{color:"primary",class:"nano-btn",onClick:z},{default:n(()=>[a(s(i),{icon:"cil-plus",class:"me-2"}),p(o(s(x)("orders.addNew")),1)]),_:1}),a(s(h),{color:"secondary",variant:"ghost",onClick:_,disabled:C.value},{default:n(()=>[a(s(i),{icon:"cil-reload",class:q({spinning:C.value})},null,8,["class"])]),_:1},8,["disabled"])])]),t("div",mt,[t("div",{class:"stat-card-nano clickable",onClick:F},[t("div",vt,[a(s(i),{icon:"cil-cart"})]),t("div",_t,[t("div",ft,o(f.value.total||0),1),e[7]||(e[7]=t("div",{class:"stat-label"},"Total Orders",-1))])]),t("div",{class:"stat-card-nano clickable",onClick:e[0]||(e[0]=l=>{v.value.status="pending",_()})},[t("div",gt,[a(s(i),{icon:"cil-clock"})]),t("div",bt,[t("div",ht,o(f.value.pending||0),1),e[8]||(e[8]=t("div",{class:"stat-label"},"Pending Orders",-1))])]),t("div",{class:"stat-card-nano clickable",onClick:e[1]||(e[1]=l=>{v.value.status="completed",_()})},[t("div",yt,[a(s(i),{icon:"cil-check-circle"})]),t("div",xt,[t("div",Ct,o(f.value.completed||0),1),e[9]||(e[9]=t("div",{class:"stat-label"},"Completed",-1))])]),t("div",wt,[t("div",kt,[a(s(i),{icon:"cil-money"})]),t("div",Tt,[t("div",St,o(U(f.value.totalRevenue||0)),1),e[10]||(e[10]=t("div",{class:"stat-label"},"Total Revenue",-1))])])]),t("div",It,[a(s(K),{class:"g-3 align-items-center"},{default:n(()=>[a(s(I),{md:"4"},{default:n(()=>[a(s(Q),null,{default:n(()=>[a(s(Y),{class:"bg-transparent border-0"},{default:n(()=>[a(s(i),{icon:"cil-magnifying-glass"})]),_:1}),a(s(J),{modelValue:v.value.search,"onUpdate:modelValue":e[2]||(e[2]=l=>v.value.search=l),placeholder:s(x)("common.search"),onInput:$,class:"border-0 bg-transparent"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),a(s(I),{md:"3"},{default:n(()=>[a(s(X),{modelValue:v.value.status,"onUpdate:modelValue":e[3]||(e[3]=l=>v.value.status=l),onChange:_,class:"rounded-3"},{default:n(()=>[...e[11]||(e[11]=[t("option",{value:""},"All Statuses",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"processing"},"Processing",-1),t("option",{value:"completed"},"Completed",-1),t("option",{value:"cancelled"},"Cancelled",-1)])]),_:1},8,["modelValue"])]),_:1}),a(s(I),{md:"3"},{default:n(()=>[a(s(h),{color:"primary",variant:"ghost",class:"w-100",onClick:F},{default:n(()=>[a(s(i),{icon:"cil-filter-x",class:"me-1"}),p(o(s(x)("common.reset")),1)]),_:1})]),_:1})]),_:1})]),t("div",Ft,[C.value?(c(),u("div",Ot,[a(s(H),{color:"primary"})])):T.value.length===0?(c(),u("div",Vt,[a(s(i),{icon:"cil-inbox",size:"xl",class:"mb-3"}),e[12]||(e[12]=t("p",null,"No orders found matching your criteria",-1))])):(c(),u("div",Mt,[t("div",Pt,[t("table",jt,[e[13]||(e[13]=t("thead",null,[t("tr",null,[t("th",{class:"text-start"},"Order #"),t("th",null,"Customer"),t("th",null,"Items"),t("th",{class:"text-end"},"Total"),t("th",null,"Status"),t("th",null,"Date"),t("th",null,"Actions")])],-1)),t("tbody",null,[(c(!0),u(P,null,j(T.value,l=>(c(),u("tr",{key:l.id,class:"nano-table-row"},[t("td",Dt,[t("strong",Nt,"#"+o(l.id),1)]),t("td",null,[t("div",Rt,o(l.customer_name||"Walk-in"),1),t("div",$t,o(l.customer_phone),1)]),t("td",null,[a(s(k),{color:"secondary",shape:"rounded-pill"},{default:n(()=>[p(o(l.item_count||0)+" Items",1)]),_:2},1024)]),t("td",Bt,o(y(l.total||0)),1),t("td",null,[a(s(k),{color:O(l.status),shape:"rounded-pill",class:"px-3"},{default:n(()=>{var g;return[p(o((g=l.status)==null?void 0:g.toUpperCase()),1)]}),_:2},1032,["color"])]),t("td",null,o(new Date(l.created_at).toLocaleString()),1),t("td",null,[t("div",Ut,[a(s(h),{size:"sm",color:"info",variant:"ghost",onClick:g=>W(l)},{default:n(()=>[a(s(i),{icon:"cil-external-link"})]),_:1},8,["onClick"]),a(s(h),{size:"sm",color:"primary",variant:"ghost",onClick:g=>V()},{default:n(()=>[a(s(i),{icon:"cil-print"})]),_:1},8,["onClick"])])])]))),128))])])]),m.value.total_pages>1?(c(),u("div",Wt,[a(s(L),{pages:m.value.total_pages,"active-page":m.value.current_page,"onUpdate:activePage":B},null,8,["pages","active-page"])])):S("",!0)]))]),a(s(E),{visible:w.value,onClose:e[6]||(e[6]=l=>w.value=!1),size:"lg",alignment:"center"},{default:n(()=>[a(s(tt),null,{default:n(()=>[a(s(et),null,{default:n(()=>{var l;return[a(s(i),{icon:"cil-cart",class:"me-2"}),p("Order #"+o((l=r.value)==null?void 0:l.id),1)]}),_:1})]),_:1}),r.value?(c(),Z(s(st),{key:0,class:"p-4"},{default:n(()=>[t("div",zt,[t("div",null,[e[14]||(e[14]=t("div",{class:"small text-muted fw-bold mb-1"},"CUSTOMER",-1)),t("h4",At,o(r.value.customer_name||"Walk-in"),1)]),t("div",Kt,[e[15]||(e[15]=t("div",{class:"small text-muted fw-bold mb-1"},"STATUS",-1)),a(s(k),{color:O(r.value.status),shape:"rounded-pill",class:"px-3 py-2 fs-6"},{default:n(()=>{var l;return[p(o((l=r.value.status)==null?void 0:l.toUpperCase()),1)]}),_:1},8,["color"])])]),t("div",Ht,[t("table",Lt,[e[16]||(e[16]=t("thead",{class:"bg-secondary"},[t("tr",null,[t("th",{class:"border-0"},"Item"),t("th",{class:"border-0 text-center"},"Qty"),t("th",{class:"border-0 text-end"},"Price"),t("th",{class:"border-0 text-end"},"Total")])],-1)),t("tbody",null,[(c(!0),u(P,null,j(r.value.items,l=>(c(),u("tr",{key:l.id},[t("td",null,o(l.name),1),t("td",Et,o(l.quantity),1),t("td",Gt,o(y(l.unit_price)),1),t("td",qt,o(y(l.total)),1)]))),128))])])]),t("div",Qt,[t("div",Yt,[e[17]||(e[17]=t("span",{class:"text-muted"},"Subtotal",-1)),t("span",Jt,o(y(r.value.subtotal)),1)]),r.value.discount>0?(c(),u("div",Xt,[e[18]||(e[18]=t("span",null,"Discount",-1)),t("span",null,"-"+o(y(r.value.discount)),1)])):S("",!0),t("div",Zt,[e[19]||(e[19]=t("h4",{class:"fw-bold mb-0"},"TOTAL",-1)),t("h4",te,o(y(r.value.total)),1)])])]),_:1})):S("",!0),a(s(at),null,{default:n(()=>[a(s(h),{color:"secondary",variant:"ghost",onClick:e[4]||(e[4]=l=>w.value=!1)},{default:n(()=>[p(o(s(x)("common.close")),1)]),_:1}),a(s(h),{color:"primary",class:"nano-btn",onClick:e[5]||(e[5]=l=>V(r.value))},{default:n(()=>[a(s(i),{icon:"cil-print",class:"me-2"}),e[20]||(e[20]=p("Print Receipt ",-1))]),_:1})]),_:1})]),_:1},8,["visible"]),a(nt,{"page-key":"orders"})]))}},pe=dt(ee,[["__scopeId","data-v-14054b1d"]]);export{pe as default};
