import{f as w,i as $e,c as h,o as m,d as s,b as a,p as r,u as e,a5 as _e,v as V,O as b,C as c,t as o,Y as ve,Z as x,a0 as De,a1 as Fe,$,_ as N,q as B,a2 as he,F as ee,k as te,a as P,X as D,n as z,a4 as Ie,a6 as fe,a7 as ge,a8 as ye,a9 as be}from"../chunk-vendor-vue-DxcSX1Jd.js";import{u as Re,a as S}from"../chunk-component-NotificationsBell-eCwis6PW.js";import{P as je}from"../chunk-component-PageHeader-BsA6C9en.js";import{S as H}from"../chunk-component-StatCard-AHk13FwB.js";import{_ as Ke,C as xe}from"../chunk-component-Card-BWbCGpFM.js";import{E as Le}from"../chunk-component-EmptyState-B78c8qVh.js";import{L as we}from"../chunk-component-LoadingSpinner-PYO1Yq7-.js";import{a as Be}from"../chunk-view-Bookings/BookingAppearance-CtCwBfZ1.js";import"../chunk-vendor-BwxB3d-x.js";import"../chunk-vendor-charts-CNHMDSF7.js";import"../chunk-vendor-pinia-DRDRCEXO.js";import"../chunk-vendor-axios-B9ygI19o.js";import"../chunk-component-Sidebar-DOq58Wm8.js";import"../chunk-view-Bookings/BookingFormPreview-BJuYIHYB.js";const ze={class:"orders-page"},He={class:"stats-grid"},We={value:""},qe={value:"pending"},Ae={value:"completed"},Ge={value:"cancelled"},Ye={value:""},Xe={value:"unpaid"},Ze={value:"partial"},Je={value:"paid"},Qe={value:""},et={value:"cash"},tt={value:"card"},at={key:2,class:"table-wrapper"},st={class:"table-header-row"},ot={class:"th-order"},lt={class:"th-customer"},nt={class:"th-staff"},rt={class:"th-total"},dt={class:"th-status"},it={class:"th-payment"},ct={class:"th-date"},ut={class:"th-actions"},mt={class:"td-order"},pt={class:"order-number"},_t={class:"td-customer"},vt={class:"order-customer-cell"},ht={class:"customer-name"},ft=["href"],gt={class:"td-staff"},yt={class:"td-total"},bt={class:"unified-amount"},xt={class:"td-status"},wt={class:"td-payment"},Ct={class:"td-date"},kt={class:"date-cell"},Vt={class:"td-actions"},Pt={class:"actions-group"},St=["onClick","title"],Ot=["onClick","title"],Et=["onClick","title"],Mt=["onClick","title"],Nt={key:0,class:"d-flex justify-content-between align-items-center"},Tt={class:"text-muted"},Ut={key:1,class:"order-details"},$t={class:"order-details-header"},Dt={class:"order-details-title"},Ft={class:"mb-0"},It={class:"order-details-meta"},Rt={class:"meta-item"},jt={key:0,class:"meta-item"},Kt={class:"order-details-actions"},Lt={class:"details-grid"},Bt={class:"detail-row"},zt={class:"k"},Ht={class:"v"},Wt={key:0,class:"detail-row"},qt={class:"k"},At={class:"v"},Gt={class:"detail-row"},Yt={class:"k"},Xt={class:"v"},Zt={class:"detail-row"},Jt={class:"k"},Qt={class:"v"},ea={key:1,class:"detail-row"},ta={class:"k"},aa={class:"v"},sa={class:"order-details-stats"},oa={class:"stat-item"},la={class:"stat-content"},na={class:"stat-label"},ra={class:"stat-value"},da={class:"stat-item"},ia={class:"stat-content"},ca={class:"stat-label"},ua={class:"stat-value"},ma={class:"stat-item"},pa={class:"stat-content"},_a={class:"stat-label"},va={class:"stat-value"},ha={class:"stat-item stat-item-highlight"},fa={class:"stat-content"},ga={class:"stat-label"},ya={class:"stat-value"},ba={key:0,class:"detail-row"},xa={class:"k"},wa={class:"v"},Ca={class:"mt-4"},ka={class:"mb-2"},Va={key:0,class:"text-muted"},Pa={class:"fw-semibold"},Sa={class:"text-muted small"},Oa={value:""},Ea=["value"],Ma={value:"pending"},Na={value:"completed"},Ta={value:"cancelled"},Ua={value:"unpaid"},$a={value:"partial"},Da={value:"paid"},Fa={value:"cash"},Ia={value:"card"},Ra={class:"text-muted small mt-2"},ja={__name:"Index",setup(Ka){const{t}=Re(),C=Be(),F=w([]),W=w(!1),q=w(!1),I=w(!1),A=w(!1),G=w(!1),i=w(null),R=w([]),v=w({search:"",status:"",payment_status:"",payment_method:"",date_from:"",date_to:""}),p=w({current_page:1,per_page:20,total:0,total_pages:0}),O=w({total:0,pending:0,completed:0,totalRevenue:0}),y=d=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:3}).format(d||0),Ce=d=>{if(!d&&d!==0)return"0 KWD";const n=parseFloat(d);return n>=1e3?`${(n/1e3).toFixed(1)}K KWD`:`${n.toFixed(0)} KWD`},ae=d=>d?new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",Y=d=>({pending:t("orders.pending"),completed:t("orders.completed"),cancelled:t("orders.cancelled")})[d]||d,se=d=>({unpaid:t("invoices.unpaid"),partial:t("orders.partiallyPaid")||"Partially Paid",paid:t("invoices.paid")})[d]||d,ke=d=>({cash:t("payments.cash"),card:t("payments.card"),knet:"KNET",online:"Online"})[d]||d,oe=d=>({pending:"cil-clock",completed:"cil-check-circle",cancelled:"cil-x-circle"})[d]||"cil-info",le=d=>({unpaid:"cil-x-circle",partial:"cil-clock",paid:"cil-check-circle"})[d]||"cil-info",g=async()=>{var d;W.value=!0;try{const n={page:p.value.current_page,per_page:p.value.per_page,...v.value};Object.keys(n).forEach(E=>{n[E]===""&&delete n[E]});const l=await S.get("/orders",{params:n,noCache:!0}),u=((d=l.data)==null?void 0:d.data)||l.data||{};F.value=u.items||[],p.value=u.pagination||p.value,O.value=u.stats||O.value}catch(n){console.error("Error loading orders:",n),F.value=[],O.value={total:0,pending:0,completed:0,totalRevenue:0},p.value={current_page:1,per_page:20,total:0,total_pages:0},C.error(t("common.errorLoading")||"Error loading data")}finally{W.value=!1}},Ve=d=>{p.value.current_page=d,g()},Pe=()=>{Ue()},Se=d=>{Ne(d)},ne=async d=>{var n;try{const l=await S.get(`/orders/${d.id}`,{noCache:!0}),u=((n=l.data)==null?void 0:n.data)||l.data||d,E=Array.isArray(u.items)?u.items:[],j=u.customer_name||"Customer",K=u.order_number||u.id,J=u.created_at||"",Q=Y(u.status);let U="";E.length>0&&(U="<table><thead><tr><th>Ø§Ù„Ø¹Ù†ØµØ±</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th></tr></thead><tbody>"+E.map(T=>"<tr><td>"+(T.item_name||"â€”").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</td><td>"+(T.quantity||0)+"</td><td>"+y(T.unit_price||0)+"</td><td>"+y(T.total||0)+"</td></tr>").join("")+"</tbody></table>");const M=u.notes?'<div style="margin-top: 30px; padding: 15px; background: #f9f9f9; border-radius: 8px;"><strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> '+u.notes.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div>":"",f='<!DOCTYPE html><html dir="rtl" lang="ar"><head><meta charset="UTF-8"><title>Order '+K+'</title><style>* { margin: 0; padding: 0; box-sizing: border-box; }body { font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; padding: 40px; direction: rtl; }.header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #000; padding-bottom: 20px; }.header h1 { font-size: 24px; margin-bottom: 10px; }.order-info { display: flex; justify-content: space-between; margin-bottom: 30px; }.info-item { flex: 1; }.info-label { font-weight: bold; color: #666; }.info-value { font-size: 18px; margin-top: 5px; }table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }th, td { padding: 12px; text-align: right; border-bottom: 1px solid #ddd; }th { background: #f5f5f5; font-weight: bold; }.totals { margin-top: 20px; text-align: left; }.total-row { display: flex; justify-content: space-between; padding: 8px 0; }.total-row.final { font-size: 20px; font-weight: bold; border-top: 2px solid #000; padding-top: 15px; margin-top: 10px; }@media print { body { padding: 20px; } .no-print { display: none; } }</style></head><body><div class="header"><h1>ðŸ›’ Ø·Ù„Ø¨ #'+K+'</h1><p>ØµØ§Ù„ÙˆÙ† Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø¬Ø§Ø±Ø§Ù„Ù„Ù‡</p></div><div class="order-info"><div class="info-item"><div class="info-label">Ø§Ù„Ø¹Ù…ÙŠÙ„:</div><div class="info-value">'+j.replace(/</g,"&lt;").replace(/>/g,"&gt;")+'</div></div><div class="info-item"><div class="info-label">Ø§Ù„ØªØ§Ø±ÙŠØ®:</div><div class="info-value">'+J+'</div></div><div class="info-item"><div class="info-label">Ø§Ù„Ø­Ø§Ù„Ø©:</div><div class="info-value">'+Q+"</div></div></div>"+U+'<div class="totals"><div class="total-row"><span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span><span>'+y(u.subtotal||0)+'</span></div><div class="total-row"><span>Ø§Ù„Ø®ØµÙ…:</span><span>'+y(u.discount||0)+'</span></div><div class="total-row"><span>Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:</span><span>'+y(u.tax||0)+'</span></div><div class="total-row final"><span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</span><span>'+y(u.total||0)+"</span></div></div>"+M+"<script>window.onload = function() { window.print(); }<\/script></body></html>",k=window.open("","_blank");if(!k){C.error("Popup blocked");return}k.document.open(),k.document.write(f),k.document.close(),setTimeout(()=>{try{k.focus(),k.print()}catch{}},250)}catch(l){console.error("Print error:",l),C.error(t("common.error")||"Error")}},Oe=async d=>{if(confirm(t("orders.deleteConfirm")+" "+d.order_number+"?"))try{await S.delete(`/orders/${d.id}`),C.success(t("common.deleted")||"Deleted"),g()}catch(n){console.error("Error deleting order:",n),C.error(t("orders.deleteError")||"Error deleting order")}},Ee=async d=>{if(confirm(`Complete order ${d.order_number}?`))try{await S.post(`/orders/${d.id}/complete`),C.success(t("orders.completed")||"Completed"),g()}catch(n){console.error("Error completing order:",n),C.error(t("common.error")||"Error")}},re=()=>{v.value={search:"",status:"",payment_status:"",payment_method:"",date_from:"",date_to:""},p.value.current_page=1,g()};let X=null;const Me=()=>{X&&clearTimeout(X),X=setTimeout(()=>{p.value.current_page=1,g()},400)},de=async()=>{var d;try{const n=await S.get("/customers",{params:{per_page:200,page:1},noCache:!0}),l=((d=n.data)==null?void 0:d.data)||n.data||{};R.value=l.items||[]}catch{R.value=[]}},Ne=async d=>{var n;A.value=!0,i.value=null,G.value=!0;try{const l=await S.get(`/orders/${d.id}`,{noCache:!0}),u=((n=l.data)==null?void 0:n.data)||l.data;i.value=u||null}catch{i.value=d}finally{G.value=!1}},ie=()=>{A.value=!1,i.value=null},ce=async()=>{q.value=!0,R.value.length===0&&await de()},Z=()=>{q.value=!1,I.value=!1,_.value={customer_id:"",total:"",status:"completed",payment_status:"paid",payment_method:"cash",notes:"Manual Order"}},_=w({customer_id:"",total:"",status:"completed",payment_status:"paid",payment_method:"cash",notes:"Manual Order"}),Te=async()=>{I.value=!0;try{const d=parseFloat(_.value.total||"0");if(!_.value.customer_id||!d){C.error(t("common.error")||"Error");return}const n={customer_id:Number(_.value.customer_id),subtotal:d,discount:0,tax:0,total:d,status:_.value.status,payment_status:_.value.payment_status,payment_method:_.value.payment_method,notes:_.value.notes,items:[]};await S.post("/orders",n),C.success(t("common.saved")||"Saved"),Z(),p.value.current_page=1,await g()}catch(d){console.error(d),C.error(t("orders.saveError")||"Error saving order")}finally{I.value=!1}},Ue=async()=>{var d;try{let l=1,u=[];for(;;){const f={page:l,per_page:100,...v.value};Object.keys(f).forEach(pe=>{f[pe]===""&&delete f[pe]});const k=await S.get("/orders",{params:f,noCache:!0}),L=((d=k.data)==null?void 0:d.data)||k.data||{},T=L.items||[],ue=L.pagination||{};u=u.concat(T);const me=Number(ue.total_pages||0);if(!me||l>=me)break;l+=1}const E=[t("orders.orderNumber"),t("orders.customer"),t("orders.total"),t("orders.status"),t("orders.paymentStatus"),t("orders.paymentMethod"),t("orders.date")],j=f=>`"${String(f??"").replaceAll('"','""')}"`,K=u.map(f=>[f.order_number,f.customer_name,f.total,f.status,f.payment_status,f.payment_method,f.created_at].map(j).join(",")),J=[E.map(j).join(","),...K].join(`
`),Q=new Blob([J],{type:"text/csv;charset=utf-8;"}),U=URL.createObjectURL(Q),M=document.createElement("a");M.href=U,M.download=`orders-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(M),M.click(),M.remove(),URL.revokeObjectURL(U)}catch(n){console.error(n),C.error(t("common.error")||"Error")}};return $e(async()=>{await Promise.all([g(),de()])}),(d,n)=>(m(),h("div",ze,[s(je,{title:e(t)("orders.title"),subtitle:e(t)("orders.subtitle")||e(t)("orders.title")+" - "+e(t)("dashboard.subtitle")},{icon:r(()=>[s(e(c),{icon:"cil-cart"})]),actions:r(()=>[s(e(V),{color:"secondary",variant:"outline",onClick:Pe,class:"me-2 export-btn"},{default:r(()=>[s(e(c),{icon:"cil-cloud-download",class:"me-2"}),b(" "+o(e(t)("common.export")),1)]),_:1}),s(e(V),{color:"primary",class:"btn-primary-custom",onClick:ce},{default:r(()=>[s(e(c),{icon:"cil-plus",class:"me-2"}),b(" "+o(e(t)("orders.addNew")),1)]),_:1})]),_:1},8,["title","subtitle"]),a("div",He,[s(H,{label:e(t)("orders.title"),value:O.value.total,"badge-variant":"info",color:"gold",clickable:!0,onClick:n[0]||(n[0]=()=>{re()})},{icon:r(()=>[s(e(c),{icon:"cil-cart"})]),_:1},8,["label","value"]),s(H,{label:e(t)("orders.pending"),value:O.value.pending,"badge-variant":"warning",color:"gold",clickable:!0,onClick:n[1]||(n[1]=()=>{v.value.status="pending",p.value.current_page=1,g()})},{icon:r(()=>[s(e(c),{icon:"cil-clock"})]),_:1},8,["label","value"]),s(H,{label:e(t)("orders.completed"),value:O.value.completed,"badge-variant":"success",color:"gold",clickable:!0,onClick:n[2]||(n[2]=()=>{v.value.status="completed",p.value.current_page=1,g()})},{icon:r(()=>[s(e(c),{icon:"cil-check-circle"})]),_:1},8,["label","value"]),s(H,{label:e(t)("orders.totalRevenue")||"Total Revenue",value:Ce(O.value.totalRevenue),"badge-variant":"info",color:"gold"},{icon:r(()=>[s(e(c),{icon:"cil-money"})]),_:1},8,["label","value"])]),s(xe,{title:e(t)("common.filter"),icon:"cil-filter",class:"filters-card"},{default:r(()=>[s(e(ve),{class:"g-3"},{default:r(()=>[s(e(x),{md:4},{default:r(()=>[s(e(De),{class:"search-input-group"},{default:r(()=>[s(e(Fe),{class:"search-icon-wrapper"},{default:r(()=>[s(e(c),{icon:"cil-magnifying-glass"})]),_:1}),s(e($),{modelValue:v.value.search,"onUpdate:modelValue":n[3]||(n[3]=l=>v.value.search=l),placeholder:e(t)("orders.searchPlaceholder")||e(t)("common.search")+"...",onInput:Me,class:"filter-input search-input"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),s(e(x),{md:3},{default:r(()=>[s(e(N),{modelValue:v.value.status,"onUpdate:modelValue":n[4]||(n[4]=l=>v.value.status=l),onChange:g,class:"filter-select"},{default:r(()=>[a("option",We,o(e(t)("common.status")),1),a("option",qe,o(e(t)("orders.pending")),1),a("option",Ae,o(e(t)("orders.completed")),1),a("option",Ge,o(e(t)("orders.cancelled")),1)]),_:1},8,["modelValue"])]),_:1}),s(e(x),{md:3},{default:r(()=>[s(e(N),{modelValue:v.value.payment_status,"onUpdate:modelValue":n[5]||(n[5]=l=>v.value.payment_status=l),onChange:g,class:"filter-select"},{default:r(()=>[a("option",Ye,o(e(t)("orders.paymentStatus")||"Payment Status"),1),a("option",Xe,o(e(t)("invoices.unpaid")),1),a("option",Ze,o(e(t)("orders.partiallyPaid")||"Partially Paid"),1),a("option",Je,o(e(t)("invoices.paid")),1)]),_:1},8,["modelValue"])]),_:1}),s(e(x),{md:3},{default:r(()=>[s(e(N),{modelValue:v.value.payment_method,"onUpdate:modelValue":n[6]||(n[6]=l=>v.value.payment_method=l),onChange:g,class:"filter-select"},{default:r(()=>[a("option",Qe,o(e(t)("orders.paymentMethod")||"Payment Method"),1),a("option",et,o(e(t)("payments.cash")),1),a("option",tt,o(e(t)("payments.card")),1),n[16]||(n[16]=a("option",{value:"knet"},"KNET",-1)),n[17]||(n[17]=a("option",{value:"online"},"Online",-1))]),_:1},8,["modelValue"])]),_:1}),s(e(x),{md:2},{default:r(()=>[s(e($),{modelValue:v.value.date_from,"onUpdate:modelValue":n[7]||(n[7]=l=>v.value.date_from=l),type:"date",label:e(t)("reports.fromDate"),onChange:g,class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(x),{md:2},{default:r(()=>[s(e($),{modelValue:v.value.date_to,"onUpdate:modelValue":n[8]||(n[8]=l=>v.value.date_to=l),type:"date",label:e(t)("reports.toDate"),onChange:g,class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(x),{md:2},{default:r(()=>[s(e(V),{color:"secondary",variant:"outline",onClick:re,class:"w-100 reset-btn"},{default:r(()=>[s(e(c),{icon:"cil-reload",class:"me-1"}),b(" "+o(e(t)("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"]),s(xe,{title:e(t)("orders.title"),icon:"cil-list"},{footer:r(()=>[p.value.total_pages>1?(m(),h("div",Nt,[a("div",Tt,o(e(t)("common.view"))+" "+o((p.value.current_page-1)*p.value.per_page+1)+" "+o(e(t)("common.to"))+" "+o(Math.min(p.value.current_page*p.value.per_page,p.value.total))+" "+o(e(t)("common.of"))+" "+o(p.value.total),1),s(e(Ie),{pages:p.value.total_pages,"active-page":p.value.current_page,"onUpdate:activePage":Ve},null,8,["pages","active-page"])])):P("",!0)]),default:r(()=>[W.value?(m(),B(we,{key:0,text:e(t)("common.loading")},null,8,["text"])):F.value.length===0?(m(),B(Le,{key:1,title:e(t)("orders.noOrders")||e(t)("common.noData"),description:e(t)("orders.noOrdersFound")||e(t)("orders.title")+" - "+e(t)("common.noData"),"icon-color":"gray"},{action:r(()=>[s(e(V),{color:"primary",class:"btn-primary-custom",onClick:ce},{default:r(()=>[s(e(c),{icon:"cil-plus",class:"me-2"}),b(" "+o(e(t)("orders.addNew")),1)]),_:1})]),_:1},8,["title","description"])):(m(),h("div",at,[s(e(he),{hover:"",responsive:"",class:"table-modern orders-table"},{default:r(()=>[a("thead",null,[a("tr",st,[a("th",ot,o(e(t)("orders.orderNumber")),1),a("th",lt,o(e(t)("orders.customer")),1),a("th",nt,o(e(t)("staff.title")),1),a("th",rt,o(e(t)("orders.total")),1),a("th",dt,o(e(t)("common.status")),1),a("th",it,o(e(t)("orders.paymentStatus")||"Payment Status"),1),a("th",ct,o(e(t)("orders.date")),1),a("th",ut,o(e(t)("common.actions")),1)])]),a("tbody",null,[(m(!0),h(ee,null,te(F.value,l=>(m(),h("tr",{key:l.id,class:"table-row"},[a("td",mt,[a("strong",pt,"#"+o(l.order_number||l.id),1)]),a("td",_t,[a("div",vt,[a("strong",ht,o(l.customer_name||"â€”"),1),l.customer_phone?(m(),h("a",{key:0,href:`tel:${l.customer_phone}`,class:"phone-link"},[s(e(c),{icon:"cil-phone",class:"phone-icon"}),a("span",null,o(l.customer_phone),1)],8,ft)):P("",!0)])]),a("td",gt,[s(e(D),{class:"unified-badge secondary-badge"},{default:r(()=>[s(e(c),{icon:"cil-user",class:"badge-icon"}),a("span",null,o(l.staff_name||"-"),1)]),_:2},1024)]),a("td",yt,[a("strong",bt,[s(e(c),{icon:"cil-money",class:"money-icon"}),b(" "+o(y(l.total||0)),1)])]),a("td",xt,[s(e(D),{class:z(["unified-badge status-badge",`status-${l.status||"pending"}`])},{default:r(()=>[s(e(c),{icon:oe(l.status),class:"badge-icon"},null,8,["icon"]),a("span",null,o(Y(l.status)),1)]),_:2},1032,["class"])]),a("td",wt,[s(e(D),{class:z(["unified-badge payment-badge",`payment-${l.payment_status||"unpaid"}`])},{default:r(()=>[s(e(c),{icon:le(l.payment_status),class:"badge-icon"},null,8,["icon"]),a("span",null,o(se(l.payment_status)),1)]),_:2},1032,["class"])]),a("td",Ct,[a("div",kt,[s(e(c),{icon:"cil-calendar",class:"date-icon"}),a("span",null,o(ae(l.created_at)),1)])]),a("td",Vt,[a("div",Pt,[a("button",{class:"action-btn",onClick:u=>Se(l),title:e(t)("common.view")},[s(e(c),{icon:"cil-info"})],8,St),a("button",{class:"action-btn",onClick:u=>ne(l),title:e(t)("orders.print")||e(t)("common.print")},[s(e(c),{icon:"cil-print"})],8,Ot),l.status==="pending"?(m(),h("button",{key:0,class:"action-btn",onClick:u=>Ee(l),title:e(t)("orders.completed")},[s(e(c),{icon:"cil-check"})],8,Et)):P("",!0),a("button",{class:"action-btn action-btn-danger",onClick:u=>Oe(l),title:e(t)("common.delete")},[s(e(c),{icon:"cil-trash"})],8,Mt)])])]))),128))])]),_:1})]))]),_:1},8,["title"]),s(e(_e),{visible:A.value,onClose:ie,size:"lg"},{default:r(()=>[s(e(fe),null,{default:r(()=>[s(e(ge),null,{default:r(()=>{var l,u;return[s(e(c),{icon:"cil-cart",class:"me-2"}),b(" "+o(e(t)("orders.orderNumber"))+" "+o(((l=i.value)==null?void 0:l.order_number)||((u=i.value)==null?void 0:u.id)||""),1)]}),_:1})]),_:1}),s(e(ye),null,{default:r(()=>[G.value?(m(),B(we,{key:0,text:e(t)("common.loading")},null,8,["text"])):i.value?(m(),h("div",Ut,[a("div",$t,[a("div",Dt,[a("h5",Ft,o(e(t)("orders.orderNumber"))+" "+o(i.value.order_number||i.value.id),1),a("div",It,[a("span",Rt,[s(e(c),{icon:"cil-calendar",class:"me-1"}),b(" "+o(ae(i.value.created_at)),1)]),i.value.customer_phone?(m(),h("span",jt,[s(e(c),{icon:"cil-phone",class:"me-1"}),b(" "+o(i.value.customer_phone),1)])):P("",!0)])]),a("div",Kt,[s(e(V),{color:"primary",class:"btn-primary-custom",onClick:n[9]||(n[9]=l=>ne(i.value))},{default:r(()=>[s(e(c),{icon:"cil-print",class:"me-2"}),b(" "+o(e(t)("orders.print")||e(t)("common.print")),1)]),_:1})])]),a("div",Lt,[a("div",Bt,[a("span",zt,o(e(t)("orders.customer")),1),a("span",Ht,o(i.value.customer_name||"â€”"),1)]),i.value.staff_name?(m(),h("div",Wt,[a("span",qt,o(e(t)("staff.title")),1),a("span",At,o(i.value.staff_name),1)])):P("",!0),a("div",Gt,[a("span",Yt,o(e(t)("orders.status")),1),a("span",Xt,[s(e(D),{class:z(["unified-badge status-badge",`status-${i.value.status||"pending"}`])},{default:r(()=>[s(e(c),{icon:oe(i.value.status),class:"badge-icon"},null,8,["icon"]),a("span",null,o(Y(i.value.status)),1)]),_:1},8,["class"])])]),a("div",Zt,[a("span",Jt,o(e(t)("orders.paymentStatus")),1),a("span",Qt,[s(e(D),{class:z(["unified-badge payment-badge",`payment-${i.value.payment_status||"unpaid"}`])},{default:r(()=>[s(e(c),{icon:le(i.value.payment_status),class:"badge-icon"},null,8,["icon"]),a("span",null,o(se(i.value.payment_status)),1)]),_:1},8,["class"])])]),i.value.payment_method?(m(),h("div",ea,[a("span",ta,o(e(t)("orders.paymentMethod")),1),a("span",aa,o(ke(i.value.payment_method)),1)])):P("",!0)]),a("div",sa,[a("div",oa,[s(e(c),{icon:"cil-money",class:"stat-icon"}),a("div",la,[a("div",na,o(e(t)("orders.subtotal")),1),a("div",ra,o(y(i.value.subtotal||0)),1)])]),a("div",da,[s(e(c),{icon:"cil-tag",class:"stat-icon"}),a("div",ia,[a("div",ca,o(e(t)("orders.discount")),1),a("div",ua,o(y(i.value.discount||0)),1)])]),a("div",ma,[s(e(c),{icon:"cil-calculator",class:"stat-icon"}),a("div",pa,[a("div",_a,o(e(t)("orders.tax")),1),a("div",va,o(y(i.value.tax||0)),1)])]),a("div",ha,[s(e(c),{icon:"cil-dollar",class:"stat-icon"}),a("div",fa,[a("div",ga,o(e(t)("orders.total")),1),a("div",ya,o(y(i.value.total||0)),1)])])]),i.value.notes?(m(),h("div",ba,[a("span",xa,o(e(t)("orders.notes")),1),a("span",wa,o(i.value.notes),1)])):P("",!0),a("div",Ca,[a("h6",ka,o(e(t)("orders.items")),1),(i.value.items||[]).length===0?(m(),h("div",Va,o(e(t)("orders.noItems")),1)):(m(),B(e(he),{key:1,hover:"",responsive:"",class:"table-modern"},{default:r(()=>[a("thead",null,[a("tr",null,[a("th",null,o(e(t)("orders.itemName")),1),a("th",null,o(e(t)("orders.quantity")),1),a("th",null,o(e(t)("orders.unitPrice")),1),a("th",null,o(e(t)("orders.total")),1)])]),a("tbody",null,[(m(!0),h(ee,null,te(i.value.items,l=>(m(),h("tr",{key:l.id},[a("td",null,[a("div",Pa,o(l.item_name),1),a("div",Sa,o(l.item_type),1)]),a("td",null,o(l.quantity),1),a("td",null,o(y(l.unit_price)),1),a("td",null,o(y(l.total)),1)]))),128))])]),_:1}))])])):P("",!0)]),_:1}),s(e(be),null,{default:r(()=>[s(e(V),{color:"secondary",onClick:ie},{default:r(()=>[b(o(e(t)("common.close")),1)]),_:1})]),_:1})]),_:1},8,["visible"]),s(e(_e),{visible:q.value,onClose:Z,size:"lg"},{default:r(()=>[s(e(fe),null,{default:r(()=>[s(e(ge),null,{default:r(()=>[s(e(c),{icon:"cil-plus",class:"me-2"}),b(" "+o(e(t)("orders.addNew")),1)]),_:1})]),_:1}),s(e(ye),null,{default:r(()=>[s(e(ve),{class:"g-3"},{default:r(()=>[s(e(x),{md:6},{default:r(()=>[s(e(N),{modelValue:_.value.customer_id,"onUpdate:modelValue":n[10]||(n[10]=l=>_.value.customer_id=l),label:e(t)("orders.customer"),class:"filter-select"},{default:r(()=>[a("option",Oa,o(e(t)("common.select")||"Select"),1),(m(!0),h(ee,null,te(R.value,l=>(m(),h("option",{key:l.id,value:l.id},o(l.name)+" ("+o(l.phone)+") ",9,Ea))),128))]),_:1},8,["modelValue","label"])]),_:1}),s(e(x),{md:6},{default:r(()=>[s(e($),{modelValue:_.value.total,"onUpdate:modelValue":n[11]||(n[11]=l=>_.value.total=l),type:"number",step:"0.001",label:e(t)("orders.total"),class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(x),{md:4},{default:r(()=>[s(e(N),{modelValue:_.value.status,"onUpdate:modelValue":n[12]||(n[12]=l=>_.value.status=l),label:e(t)("orders.status"),class:"filter-select"},{default:r(()=>[a("option",Ma,o(e(t)("orders.pending")),1),a("option",Na,o(e(t)("orders.completed")),1),a("option",Ta,o(e(t)("orders.cancelled")),1)]),_:1},8,["modelValue","label"])]),_:1}),s(e(x),{md:4},{default:r(()=>[s(e(N),{modelValue:_.value.payment_status,"onUpdate:modelValue":n[13]||(n[13]=l=>_.value.payment_status=l),label:e(t)("orders.paymentStatus"),class:"filter-select"},{default:r(()=>[a("option",Ua,o(e(t)("invoices.unpaid")),1),a("option",$a,o(e(t)("orders.partiallyPaid")),1),a("option",Da,o(e(t)("invoices.paid")),1)]),_:1},8,["modelValue","label"])]),_:1}),s(e(x),{md:4},{default:r(()=>[s(e(N),{modelValue:_.value.payment_method,"onUpdate:modelValue":n[14]||(n[14]=l=>_.value.payment_method=l),label:e(t)("orders.paymentMethod"),class:"filter-select"},{default:r(()=>[a("option",Fa,o(e(t)("payments.cash")),1),a("option",Ia,o(e(t)("payments.card")),1),n[18]||(n[18]=a("option",{value:"knet"},"KNET",-1)),n[19]||(n[19]=a("option",{value:"online"},"Online",-1))]),_:1},8,["modelValue","label"])]),_:1}),s(e(x),{md:12},{default:r(()=>[s(e($),{modelValue:_.value.notes,"onUpdate:modelValue":n[15]||(n[15]=l=>_.value.notes=l),label:e(t)("orders.notes"),class:"filter-input"},null,8,["modelValue","label"])]),_:1})]),_:1}),a("div",Ra,o(e(t)("orders.createHint")||"Tip: For detailed items (products/services), create orders from POS."),1)]),_:1}),s(e(be),null,{default:r(()=>[s(e(V),{color:"secondary",onClick:Z},{default:r(()=>[b(o(e(t)("common.cancel")),1)]),_:1}),s(e(V),{color:"primary",class:"btn-primary-custom",disabled:I.value,onClick:Te},{default:r(()=>[s(e(c),{icon:"cil-save",class:"me-2"}),b(" "+o(e(t)("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["visible"])]))}},ts=Ke(ja,[["__scopeId","data-v-89823f19"]]);export{ts as default};
