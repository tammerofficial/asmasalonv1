import{f as x,i as Ue,c as h,o as m,d as s,b as a,p as r,u as e,Z as _e,x as V,P as y,C as d,t as o,_ as ve,$ as w,a2 as De,a3 as Fe,a1 as U,a0 as N,s as D,a4 as he,F as ee,k as te,a as P,Y as F,n as B,a6 as Ie,a7 as fe,a8 as ge,a9 as ye,aa as be}from"../chunk-vendor-vue-CVODRAc9.js";import{u as Re,a as S}from"../chunk-component-NotificationsBell-Bqoxw3gb.js";import{P as je}from"../chunk-component-PageHeader-DIMefZ9l.js";import{S as W}from"../chunk-component-StatCard-CUh-yMQt.js";import{_ as Ke,C as we}from"../chunk-component-Card-DAbGoLxt.js";import{E as Le}from"../chunk-component-EmptyState-B8o9iOHP.js";import{L as xe}from"../chunk-component-LoadingSpinner-DYzABkFM.js";import{a as ze}from"../chunk-view-Bookings/BookingAppearance-bsKTQ7Gu.js";import"../chunk-vendor-6xaPOP3o.js";import"../chunk-vendor-charts-C66rl4lP.js";import"../chunk-vendor-pinia-DSPKUyr1.js";import"../chunk-vendor-axios-B9ygI19o.js";import"../chunk-component-Sidebar-EPa-hzVC.js";import"../chunk-view-Bookings/BookingFormPreview-CDH9ZIF-.js";const Be={class:"orders-page"},We={class:"stats-grid"},He={value:""},qe={value:"pending"},Ae={value:"completed"},Ge={value:"cancelled"},Ye={value:""},Ze={value:"unpaid"},Je={value:"partial"},Qe={value:"paid"},Xe={value:""},et={value:"cash"},tt={value:"card"},at={key:2,class:"table-wrapper"},st={class:"table-header-row"},ot={class:"th-order"},lt={class:"th-customer"},nt={class:"th-staff"},rt={class:"th-total"},it={class:"th-status"},dt={class:"th-payment"},ct={class:"th-date"},ut={class:"th-actions"},mt={class:"td-order"},pt={class:"d-flex align-items-center gap-2"},_t={class:"order-number"},vt={class:"td-customer"},ht={class:"order-customer-cell"},ft={class:"customer-name"},gt=["href"],yt={class:"td-staff"},bt={class:"td-total"},wt={class:"unified-amount"},xt={class:"td-status"},kt={class:"td-payment"},Ct={class:"td-date"},Vt={class:"date-cell"},Pt={class:"td-actions"},St={class:"actions-group"},Ot=["onClick","title"],Et=["onClick","title"],Mt=["onClick","title"],Nt=["onClick","title"],Tt={key:0,class:"d-flex justify-content-between align-items-center"},$t={class:"text-muted"},Ut={key:1,class:"order-details"},Dt={class:"order-details-header"},Ft={class:"order-details-title"},It={class:"mb-0"},Rt={class:"order-details-meta"},jt={class:"meta-item"},Kt={key:0,class:"meta-item"},Lt={class:"order-details-actions"},zt={class:"details-grid"},Bt={class:"detail-row"},Wt={class:"k"},Ht={class:"v"},qt={key:0,class:"detail-row"},At={class:"k"},Gt={class:"v"},Yt={class:"detail-row"},Zt={class:"k"},Jt={class:"v"},Qt={class:"detail-row"},Xt={class:"k"},ea={class:"v"},ta={key:1,class:"detail-row"},aa={class:"k"},sa={class:"v"},oa={class:"order-details-stats"},la={class:"stat-item"},na={class:"stat-content"},ra={class:"stat-label"},ia={class:"stat-value"},da={class:"stat-item"},ca={class:"stat-content"},ua={class:"stat-label"},ma={class:"stat-value"},pa={class:"stat-item"},_a={class:"stat-content"},va={class:"stat-label"},ha={class:"stat-value"},fa={class:"stat-item stat-item-highlight"},ga={class:"stat-content"},ya={class:"stat-label"},ba={class:"stat-value"},wa={key:0,class:"detail-row"},xa={class:"k"},ka={class:"v"},Ca={class:"mt-4"},Va={class:"mb-2"},Pa={key:0,class:"text-muted"},Sa={class:"fw-semibold"},Oa={class:"text-muted small"},Ea={value:""},Ma=["value"],Na={value:"pending"},Ta={value:"completed"},$a={value:"cancelled"},Ua={value:"unpaid"},Da={value:"partial"},Fa={value:"paid"},Ia={value:"cash"},Ra={value:"card"},ja={class:"text-muted small mt-2"},Ka={__name:"Index",setup(La){const{t}=Re(),k=ze(),I=x([]),H=x(!1),q=x(!1),R=x(!1),A=x(!1),G=x(!1),c=x(null),j=x([]),v=x({search:"",status:"",payment_status:"",payment_method:"",date_from:"",date_to:""}),p=x({current_page:1,per_page:20,total:0,total_pages:0}),O=x({total:0,pending:0,completed:0,totalRevenue:0}),b=i=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:3}).format(i||0),ke=i=>{if(!i&&i!==0)return"0 KWD";const n=parseFloat(i);return n>=1e3?`${(n/1e3).toFixed(1)}K KWD`:`${n.toFixed(0)} KWD`},ae=i=>i?new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",Y=i=>({pending:t("orders.pending"),completed:t("orders.completed"),cancelled:t("orders.cancelled")})[i]||i,se=i=>({unpaid:t("invoices.unpaid"),partial:t("orders.partiallyPaid")||"Partially Paid",paid:t("invoices.paid")})[i]||i,Ce=i=>({cash:t("payments.cash"),card:t("payments.card"),knet:"KNET",online:"Online"})[i]||i,oe=i=>({pending:"cil-clock",completed:"cil-check-circle",cancelled:"cil-x-circle"})[i]||"cil-info",le=i=>({unpaid:"cil-x-circle",partial:"cil-clock",paid:"cil-check-circle"})[i]||"cil-info",g=async()=>{var i;H.value=!0;try{const n={page:p.value.current_page,per_page:p.value.per_page,...v.value};Object.keys(n).forEach(E=>{n[E]===""&&delete n[E]});const l=await S.get("/orders",{params:n,noCache:!0}),u=((i=l.data)==null?void 0:i.data)||l.data||{};I.value=u.items||[],p.value=u.pagination||p.value,O.value=u.stats||O.value}catch(n){console.error("Error loading orders:",n),I.value=[],O.value={total:0,pending:0,completed:0,totalRevenue:0},p.value={current_page:1,per_page:20,total:0,total_pages:0},k.error(t("common.errorLoading")||"Error loading data")}finally{H.value=!1}},Ve=i=>{p.value.current_page=i,g()},Pe=()=>{$e()},Se=i=>{Ne(i)},ne=async i=>{var n;try{const l=await S.get(`/orders/${i.id}`,{noCache:!0}),u=((n=l.data)==null?void 0:n.data)||l.data||i,E=Array.isArray(u.items)?u.items:[],K=u.customer_name||"Customer",L=u.order_number||u.id,Q=u.created_at||"",X=Y(u.status);let $="";E.length>0&&($="<table><thead><tr><th>Ø§Ù„Ø¹Ù†ØµØ±</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th></tr></thead><tbody>"+E.map(T=>"<tr><td>"+(T.item_name||"â€”").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</td><td>"+(T.quantity||0)+"</td><td>"+b(T.unit_price||0)+"</td><td>"+b(T.total||0)+"</td></tr>").join("")+"</tbody></table>");const M=u.notes?'<div style="margin-top: 30px; padding: 15px; background: #f9f9f9; border-radius: 8px;"><strong>Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> '+u.notes.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</div>":"",f='<!DOCTYPE html><html dir="rtl" lang="ar"><head><meta charset="UTF-8"><title>Order '+L+'</title><style>* { margin: 0; padding: 0; box-sizing: border-box; }body { font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; padding: 40px; direction: rtl; }.header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #000; padding-bottom: 20px; }.header h1 { font-size: 24px; margin-bottom: 10px; }.order-info { display: flex; justify-content: space-between; margin-bottom: 30px; }.info-item { flex: 1; }.info-label { font-weight: bold; color: #666; }.info-value { font-size: 18px; margin-top: 5px; }table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }th, td { padding: 12px; text-align: right; border-bottom: 1px solid #ddd; }th { background: #f5f5f5; font-weight: bold; }.totals { margin-top: 20px; text-align: left; }.total-row { display: flex; justify-content: space-between; padding: 8px 0; }.total-row.final { font-size: 20px; font-weight: bold; border-top: 2px solid #000; padding-top: 15px; margin-top: 10px; }@media print { body { padding: 20px; } .no-print { display: none; } }</style></head><body><div class="header"><h1>ðŸ›’ Ø·Ù„Ø¨ #'+L+'</h1><p>ØµØ§Ù„ÙˆÙ† Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø¬Ø§Ø±Ø§Ù„Ù„Ù‡</p></div><div class="order-info"><div class="info-item"><div class="info-label">Ø§Ù„Ø¹Ù…ÙŠÙ„:</div><div class="info-value">'+K.replace(/</g,"&lt;").replace(/>/g,"&gt;")+'</div></div><div class="info-item"><div class="info-label">Ø§Ù„ØªØ§Ø±ÙŠØ®:</div><div class="info-value">'+Q+'</div></div><div class="info-item"><div class="info-label">Ø§Ù„Ø­Ø§Ù„Ø©:</div><div class="info-value">'+X+"</div></div></div>"+$+'<div class="totals"><div class="total-row"><span>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹:</span><span>'+b(u.subtotal||0)+'</span></div><div class="total-row"><span>Ø§Ù„Ø®ØµÙ…:</span><span>'+b(u.discount||0)+'</span></div><div class="total-row"><span>Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:</span><span>'+b(u.tax||0)+'</span></div><div class="total-row final"><span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:</span><span>'+b(u.total||0)+"</span></div></div>"+M+"<script>window.onload = function() { window.print(); }<\/script></body></html>",C=window.open("","_blank");if(!C){k.error("Popup blocked");return}C.document.open(),C.document.write(f),C.document.close(),setTimeout(()=>{try{C.focus(),C.print()}catch{}},250)}catch(l){console.error("Print error:",l),k.error(t("common.error")||"Error")}},Oe=async i=>{if(confirm(t("orders.deleteConfirm")+" "+i.order_number+"?"))try{await S.delete(`/orders/${i.id}`),k.success(t("common.deleted")||"Deleted"),g()}catch(n){console.error("Error deleting order:",n),k.error(t("orders.deleteError")||"Error deleting order")}},Ee=async i=>{if(confirm(`Complete order ${i.order_number}?`))try{await S.post(`/orders/${i.id}/complete`),k.success(t("orders.completed")||"Completed"),g()}catch(n){console.error("Error completing order:",n),k.error(t("common.error")||"Error")}},re=()=>{v.value={search:"",status:"",payment_status:"",payment_method:"",date_from:"",date_to:""},p.value.current_page=1,g()};let Z=null;const Me=()=>{Z&&clearTimeout(Z),Z=setTimeout(()=>{p.value.current_page=1,g()},400)},ie=async()=>{var i;try{const n=await S.get("/customers",{params:{per_page:200,page:1},noCache:!0}),l=((i=n.data)==null?void 0:i.data)||n.data||{};j.value=l.items||[]}catch{j.value=[]}},Ne=async i=>{var n;A.value=!0,c.value=null,G.value=!0;try{const l=await S.get(`/orders/${i.id}`,{noCache:!0}),u=((n=l.data)==null?void 0:n.data)||l.data;c.value=u||null}catch{c.value=i}finally{G.value=!1}},de=()=>{A.value=!1,c.value=null},ce=async()=>{q.value=!0,j.value.length===0&&await ie()},J=()=>{q.value=!1,R.value=!1,_.value={customer_id:"",total:"",status:"completed",payment_status:"paid",payment_method:"cash",notes:"Manual Order"}},_=x({customer_id:"",total:"",status:"completed",payment_status:"paid",payment_method:"cash",notes:"Manual Order"}),Te=async()=>{R.value=!0;try{const i=parseFloat(_.value.total||"0");if(!_.value.customer_id||!i){k.error(t("common.error")||"Error");return}const n={customer_id:Number(_.value.customer_id),subtotal:i,discount:0,tax:0,total:i,status:_.value.status,payment_status:_.value.payment_status,payment_method:_.value.payment_method,notes:_.value.notes,items:[]};await S.post("/orders",n),k.success(t("common.saved")||"Saved"),J(),p.value.current_page=1,await g()}catch(i){console.error(i),k.error(t("orders.saveError")||"Error saving order")}finally{R.value=!1}},$e=async()=>{var i;try{let l=1,u=[];for(;;){const f={page:l,per_page:100,...v.value};Object.keys(f).forEach(pe=>{f[pe]===""&&delete f[pe]});const C=await S.get("/orders",{params:f,noCache:!0}),z=((i=C.data)==null?void 0:i.data)||C.data||{},T=z.items||[],ue=z.pagination||{};u=u.concat(T);const me=Number(ue.total_pages||0);if(!me||l>=me)break;l+=1}const E=[t("orders.orderNumber"),t("orders.customer"),t("orders.total"),t("orders.status"),t("orders.paymentStatus"),t("orders.paymentMethod"),t("orders.date")],K=f=>`"${String(f??"").replaceAll('"','""')}"`,L=u.map(f=>[f.order_number,f.customer_name,f.total,f.status,f.payment_status,f.payment_method,f.created_at].map(K).join(",")),Q=[E.map(K).join(","),...L].join(`
`),X=new Blob([Q],{type:"text/csv;charset=utf-8;"}),$=URL.createObjectURL(X),M=document.createElement("a");M.href=$,M.download=`orders-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(M),M.click(),M.remove(),URL.revokeObjectURL($)}catch(n){console.error(n),k.error(t("common.error")||"Error")}};return Ue(async()=>{await Promise.all([g(),ie()])}),(i,n)=>(m(),h("div",Be,[s(je,{title:e(t)("orders.title"),subtitle:e(t)("orders.subtitle")||e(t)("orders.title")+" - "+e(t)("dashboard.subtitle")},{icon:r(()=>[s(e(d),{icon:"cil-cart"})]),actions:r(()=>[s(e(V),{color:"secondary",variant:"outline",onClick:Pe,class:"me-2 export-btn"},{default:r(()=>[s(e(d),{icon:"cil-cloud-download",class:"me-2"}),y(" "+o(e(t)("common.export")),1)]),_:1}),s(e(V),{color:"primary",class:"btn-primary-custom",onClick:ce},{default:r(()=>[s(e(d),{icon:"cil-plus",class:"me-2"}),y(" "+o(e(t)("orders.addNew")),1)]),_:1})]),_:1},8,["title","subtitle"]),a("div",We,[s(W,{label:e(t)("orders.title"),value:O.value.total,"badge-variant":"info",color:"gold",clickable:!0,onClick:n[0]||(n[0]=()=>{re()})},{icon:r(()=>[s(e(d),{icon:"cil-cart"})]),_:1},8,["label","value"]),s(W,{label:e(t)("orders.pending"),value:O.value.pending,"badge-variant":"warning",color:"gold",clickable:!0,onClick:n[1]||(n[1]=()=>{v.value.status="pending",p.value.current_page=1,g()})},{icon:r(()=>[s(e(d),{icon:"cil-clock"})]),_:1},8,["label","value"]),s(W,{label:e(t)("orders.completed"),value:O.value.completed,"badge-variant":"success",color:"gold",clickable:!0,onClick:n[2]||(n[2]=()=>{v.value.status="completed",p.value.current_page=1,g()})},{icon:r(()=>[s(e(d),{icon:"cil-check-circle"})]),_:1},8,["label","value"]),s(W,{label:e(t)("orders.totalRevenue")||"Total Revenue",value:ke(O.value.totalRevenue),"badge-variant":"info",color:"gold"},{icon:r(()=>[s(e(d),{icon:"cil-money"})]),_:1},8,["label","value"])]),s(we,{title:e(t)("common.filter"),icon:"cil-filter",class:"filters-card"},{default:r(()=>[s(e(ve),{class:"g-3"},{default:r(()=>[s(e(w),{md:4},{default:r(()=>[s(e(De),{class:"search-input-group"},{default:r(()=>[s(e(Fe),{class:"search-icon-wrapper"},{default:r(()=>[s(e(d),{icon:"cil-magnifying-glass"})]),_:1}),s(e(U),{modelValue:v.value.search,"onUpdate:modelValue":n[3]||(n[3]=l=>v.value.search=l),placeholder:e(t)("orders.searchPlaceholder")||e(t)("common.search")+"...",onInput:Me,class:"filter-input search-input"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),s(e(w),{md:3},{default:r(()=>[s(e(N),{modelValue:v.value.status,"onUpdate:modelValue":n[4]||(n[4]=l=>v.value.status=l),onChange:g,class:"filter-select"},{default:r(()=>[a("option",He,o(e(t)("common.status")),1),a("option",qe,o(e(t)("orders.pending")),1),a("option",Ae,o(e(t)("orders.completed")),1),a("option",Ge,o(e(t)("orders.cancelled")),1)]),_:1},8,["modelValue"])]),_:1}),s(e(w),{md:3},{default:r(()=>[s(e(N),{modelValue:v.value.payment_status,"onUpdate:modelValue":n[5]||(n[5]=l=>v.value.payment_status=l),onChange:g,class:"filter-select"},{default:r(()=>[a("option",Ye,o(e(t)("orders.paymentStatus")||"Payment Status"),1),a("option",Ze,o(e(t)("invoices.unpaid")),1),a("option",Je,o(e(t)("orders.partiallyPaid")||"Partially Paid"),1),a("option",Qe,o(e(t)("invoices.paid")),1)]),_:1},8,["modelValue"])]),_:1}),s(e(w),{md:3},{default:r(()=>[s(e(N),{modelValue:v.value.payment_method,"onUpdate:modelValue":n[6]||(n[6]=l=>v.value.payment_method=l),onChange:g,class:"filter-select"},{default:r(()=>[a("option",Xe,o(e(t)("orders.paymentMethod")||"Payment Method"),1),a("option",et,o(e(t)("payments.cash")),1),a("option",tt,o(e(t)("payments.card")),1),n[16]||(n[16]=a("option",{value:"knet"},"KNET",-1)),n[17]||(n[17]=a("option",{value:"online"},"Online",-1))]),_:1},8,["modelValue"])]),_:1}),s(e(w),{md:2},{default:r(()=>[s(e(U),{modelValue:v.value.date_from,"onUpdate:modelValue":n[7]||(n[7]=l=>v.value.date_from=l),type:"date",label:e(t)("reports.fromDate"),onChange:g,class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(w),{md:2},{default:r(()=>[s(e(U),{modelValue:v.value.date_to,"onUpdate:modelValue":n[8]||(n[8]=l=>v.value.date_to=l),type:"date",label:e(t)("reports.toDate"),onChange:g,class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(w),{md:2},{default:r(()=>[s(e(V),{color:"secondary",variant:"outline",onClick:re,class:"w-100 reset-btn"},{default:r(()=>[s(e(d),{icon:"cil-reload",class:"me-1"}),y(" "+o(e(t)("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"]),s(we,{title:e(t)("orders.title"),icon:"cil-list"},{footer:r(()=>[p.value.total_pages>1?(m(),h("div",Tt,[a("div",$t,o(e(t)("common.view"))+" "+o((p.value.current_page-1)*p.value.per_page+1)+" "+o(e(t)("common.to"))+" "+o(Math.min(p.value.current_page*p.value.per_page,p.value.total))+" "+o(e(t)("common.of"))+" "+o(p.value.total),1),s(e(Ie),{pages:p.value.total_pages,"active-page":p.value.current_page,"onUpdate:activePage":Ve},null,8,["pages","active-page"])])):P("",!0)]),default:r(()=>[H.value?(m(),D(xe,{key:0,text:e(t)("common.loading")},null,8,["text"])):I.value.length===0?(m(),D(Le,{key:1,title:e(t)("orders.noOrders")||e(t)("common.noData"),description:e(t)("orders.noOrdersFound")||e(t)("orders.title")+" - "+e(t)("common.noData"),"icon-color":"gray"},{action:r(()=>[s(e(V),{color:"primary",class:"btn-primary-custom",onClick:ce},{default:r(()=>[s(e(d),{icon:"cil-plus",class:"me-2"}),y(" "+o(e(t)("orders.addNew")),1)]),_:1})]),_:1},8,["title","description"])):(m(),h("div",at,[s(e(he),{hover:"",responsive:"",class:"table-modern orders-table"},{default:r(()=>[a("thead",null,[a("tr",st,[a("th",ot,o(e(t)("orders.orderNumber")),1),a("th",lt,o(e(t)("orders.customer")),1),a("th",nt,o(e(t)("staff.title")),1),a("th",rt,o(e(t)("orders.total")),1),a("th",it,o(e(t)("common.status")),1),a("th",dt,o(e(t)("orders.paymentStatus")||"Payment Status"),1),a("th",ct,o(e(t)("orders.date")),1),a("th",ut,o(e(t)("common.actions")),1)])]),a("tbody",null,[(m(!0),h(ee,null,te(I.value,l=>(m(),h("tr",{key:l.id,class:"table-row"},[a("td",mt,[a("div",pt,[a("strong",_t,"#"+o(l.order_number||l.id),1),l.wc_order_id?(m(),D(e(V),{key:0,color:"success",size:"sm",variant:"outline",href:`/wp-admin/post.php?post=${l.wc_order_id}&action=edit`,target:"_blank",title:"WooCommerce Order #"+l.wc_order_id,class:"wc-link-btn"},{default:r(()=>[s(e(d),{icon:"cil-cart",class:"me-1"}),n[18]||(n[18]=y(" WC ",-1))]),_:1},8,["href","title"])):P("",!0)])]),a("td",vt,[a("div",ht,[a("strong",ft,o(l.customer_name||"â€”"),1),l.customer_phone?(m(),h("a",{key:0,href:`tel:${l.customer_phone}`,class:"phone-link"},[s(e(d),{icon:"cil-phone",class:"phone-icon"}),a("span",null,o(l.customer_phone),1)],8,gt)):P("",!0)])]),a("td",yt,[s(e(F),{class:"unified-badge secondary-badge"},{default:r(()=>[s(e(d),{icon:"cil-user",class:"badge-icon"}),a("span",null,o(l.staff_name||"-"),1)]),_:2},1024)]),a("td",bt,[a("strong",wt,[s(e(d),{icon:"cil-money",class:"money-icon"}),y(" "+o(b(l.total||0)),1)])]),a("td",xt,[s(e(F),{class:B(["unified-badge status-badge",`status-${l.status||"pending"}`])},{default:r(()=>[s(e(d),{icon:oe(l.status),class:"badge-icon"},null,8,["icon"]),a("span",null,o(Y(l.status)),1)]),_:2},1032,["class"])]),a("td",kt,[s(e(F),{class:B(["unified-badge payment-badge",`payment-${l.payment_status||"unpaid"}`])},{default:r(()=>[s(e(d),{icon:le(l.payment_status),class:"badge-icon"},null,8,["icon"]),a("span",null,o(se(l.payment_status)),1)]),_:2},1032,["class"])]),a("td",Ct,[a("div",Vt,[s(e(d),{icon:"cil-calendar",class:"date-icon"}),a("span",null,o(ae(l.created_at)),1)])]),a("td",Pt,[a("div",St,[a("button",{class:"action-btn",onClick:u=>Se(l),title:e(t)("common.view")},[s(e(d),{icon:"cil-info"})],8,Ot),a("button",{class:"action-btn",onClick:u=>ne(l),title:e(t)("orders.print")||e(t)("common.print")},[s(e(d),{icon:"cil-print"})],8,Et),l.status==="pending"?(m(),h("button",{key:0,class:"action-btn",onClick:u=>Ee(l),title:e(t)("orders.completed")},[s(e(d),{icon:"cil-check"})],8,Mt)):P("",!0),a("button",{class:"action-btn action-btn-danger",onClick:u=>Oe(l),title:e(t)("common.delete")},[s(e(d),{icon:"cil-trash"})],8,Nt)])])]))),128))])]),_:1})]))]),_:1},8,["title"]),s(e(_e),{visible:A.value,onClose:de,size:"lg"},{default:r(()=>[s(e(fe),null,{default:r(()=>[s(e(ge),null,{default:r(()=>{var l,u;return[s(e(d),{icon:"cil-cart",class:"me-2"}),y(" "+o(e(t)("orders.orderNumber"))+" "+o(((l=c.value)==null?void 0:l.order_number)||((u=c.value)==null?void 0:u.id)||""),1)]}),_:1})]),_:1}),s(e(ye),null,{default:r(()=>[G.value?(m(),D(xe,{key:0,text:e(t)("common.loading")},null,8,["text"])):c.value?(m(),h("div",Ut,[a("div",Dt,[a("div",Ft,[a("h5",It,o(e(t)("orders.orderNumber"))+" "+o(c.value.order_number||c.value.id),1),a("div",Rt,[a("span",jt,[s(e(d),{icon:"cil-calendar",class:"me-1"}),y(" "+o(ae(c.value.created_at)),1)]),c.value.customer_phone?(m(),h("span",Kt,[s(e(d),{icon:"cil-phone",class:"me-1"}),y(" "+o(c.value.customer_phone),1)])):P("",!0)])]),a("div",Lt,[s(e(V),{color:"primary",class:"btn-primary-custom",onClick:n[9]||(n[9]=l=>ne(c.value))},{default:r(()=>[s(e(d),{icon:"cil-print",class:"me-2"}),y(" "+o(e(t)("orders.print")||e(t)("common.print")),1)]),_:1})])]),a("div",zt,[a("div",Bt,[a("span",Wt,o(e(t)("orders.customer")),1),a("span",Ht,o(c.value.customer_name||"â€”"),1)]),c.value.staff_name?(m(),h("div",qt,[a("span",At,o(e(t)("staff.title")),1),a("span",Gt,o(c.value.staff_name),1)])):P("",!0),a("div",Yt,[a("span",Zt,o(e(t)("orders.status")),1),a("span",Jt,[s(e(F),{class:B(["unified-badge status-badge",`status-${c.value.status||"pending"}`])},{default:r(()=>[s(e(d),{icon:oe(c.value.status),class:"badge-icon"},null,8,["icon"]),a("span",null,o(Y(c.value.status)),1)]),_:1},8,["class"])])]),a("div",Qt,[a("span",Xt,o(e(t)("orders.paymentStatus")),1),a("span",ea,[s(e(F),{class:B(["unified-badge payment-badge",`payment-${c.value.payment_status||"unpaid"}`])},{default:r(()=>[s(e(d),{icon:le(c.value.payment_status),class:"badge-icon"},null,8,["icon"]),a("span",null,o(se(c.value.payment_status)),1)]),_:1},8,["class"])])]),c.value.payment_method?(m(),h("div",ta,[a("span",aa,o(e(t)("orders.paymentMethod")),1),a("span",sa,o(Ce(c.value.payment_method)),1)])):P("",!0)]),a("div",oa,[a("div",la,[s(e(d),{icon:"cil-money",class:"stat-icon"}),a("div",na,[a("div",ra,o(e(t)("orders.subtotal")),1),a("div",ia,o(b(c.value.subtotal||0)),1)])]),a("div",da,[s(e(d),{icon:"cil-tag",class:"stat-icon"}),a("div",ca,[a("div",ua,o(e(t)("orders.discount")),1),a("div",ma,o(b(c.value.discount||0)),1)])]),a("div",pa,[s(e(d),{icon:"cil-calculator",class:"stat-icon"}),a("div",_a,[a("div",va,o(e(t)("orders.tax")),1),a("div",ha,o(b(c.value.tax||0)),1)])]),a("div",fa,[s(e(d),{icon:"cil-dollar",class:"stat-icon"}),a("div",ga,[a("div",ya,o(e(t)("orders.total")),1),a("div",ba,o(b(c.value.total||0)),1)])])]),c.value.notes?(m(),h("div",wa,[a("span",xa,o(e(t)("orders.notes")),1),a("span",ka,o(c.value.notes),1)])):P("",!0),a("div",Ca,[a("h6",Va,o(e(t)("orders.items")),1),(c.value.items||[]).length===0?(m(),h("div",Pa,o(e(t)("orders.noItems")),1)):(m(),D(e(he),{key:1,hover:"",responsive:"",class:"table-modern"},{default:r(()=>[a("thead",null,[a("tr",null,[a("th",null,o(e(t)("orders.itemName")),1),a("th",null,o(e(t)("orders.quantity")),1),a("th",null,o(e(t)("orders.unitPrice")),1),a("th",null,o(e(t)("orders.total")),1)])]),a("tbody",null,[(m(!0),h(ee,null,te(c.value.items,l=>(m(),h("tr",{key:l.id},[a("td",null,[a("div",Sa,o(l.item_name),1),a("div",Oa,o(l.item_type),1)]),a("td",null,o(l.quantity),1),a("td",null,o(b(l.unit_price)),1),a("td",null,o(b(l.total)),1)]))),128))])]),_:1}))])])):P("",!0)]),_:1}),s(e(be),null,{default:r(()=>[s(e(V),{color:"secondary",onClick:de},{default:r(()=>[y(o(e(t)("common.close")),1)]),_:1})]),_:1})]),_:1},8,["visible"]),s(e(_e),{visible:q.value,onClose:J,size:"lg"},{default:r(()=>[s(e(fe),null,{default:r(()=>[s(e(ge),null,{default:r(()=>[s(e(d),{icon:"cil-plus",class:"me-2"}),y(" "+o(e(t)("orders.addNew")),1)]),_:1})]),_:1}),s(e(ye),null,{default:r(()=>[s(e(ve),{class:"g-3"},{default:r(()=>[s(e(w),{md:6},{default:r(()=>[s(e(N),{modelValue:_.value.customer_id,"onUpdate:modelValue":n[10]||(n[10]=l=>_.value.customer_id=l),label:e(t)("orders.customer"),class:"filter-select"},{default:r(()=>[a("option",Ea,o(e(t)("common.select")||"Select"),1),(m(!0),h(ee,null,te(j.value,l=>(m(),h("option",{key:l.id,value:l.id},o(l.name)+" ("+o(l.phone)+") ",9,Ma))),128))]),_:1},8,["modelValue","label"])]),_:1}),s(e(w),{md:6},{default:r(()=>[s(e(U),{modelValue:_.value.total,"onUpdate:modelValue":n[11]||(n[11]=l=>_.value.total=l),type:"number",step:"0.001",label:e(t)("orders.total"),class:"filter-input"},null,8,["modelValue","label"])]),_:1}),s(e(w),{md:4},{default:r(()=>[s(e(N),{modelValue:_.value.status,"onUpdate:modelValue":n[12]||(n[12]=l=>_.value.status=l),label:e(t)("orders.status"),class:"filter-select"},{default:r(()=>[a("option",Na,o(e(t)("orders.pending")),1),a("option",Ta,o(e(t)("orders.completed")),1),a("option",$a,o(e(t)("orders.cancelled")),1)]),_:1},8,["modelValue","label"])]),_:1}),s(e(w),{md:4},{default:r(()=>[s(e(N),{modelValue:_.value.payment_status,"onUpdate:modelValue":n[13]||(n[13]=l=>_.value.payment_status=l),label:e(t)("orders.paymentStatus"),class:"filter-select"},{default:r(()=>[a("option",Ua,o(e(t)("invoices.unpaid")),1),a("option",Da,o(e(t)("orders.partiallyPaid")),1),a("option",Fa,o(e(t)("invoices.paid")),1)]),_:1},8,["modelValue","label"])]),_:1}),s(e(w),{md:4},{default:r(()=>[s(e(N),{modelValue:_.value.payment_method,"onUpdate:modelValue":n[14]||(n[14]=l=>_.value.payment_method=l),label:e(t)("orders.paymentMethod"),class:"filter-select"},{default:r(()=>[a("option",Ia,o(e(t)("payments.cash")),1),a("option",Ra,o(e(t)("payments.card")),1),n[19]||(n[19]=a("option",{value:"knet"},"KNET",-1)),n[20]||(n[20]=a("option",{value:"online"},"Online",-1))]),_:1},8,["modelValue","label"])]),_:1}),s(e(w),{md:12},{default:r(()=>[s(e(U),{modelValue:_.value.notes,"onUpdate:modelValue":n[15]||(n[15]=l=>_.value.notes=l),label:e(t)("orders.notes"),class:"filter-input"},null,8,["modelValue","label"])]),_:1})]),_:1}),a("div",ja,o(e(t)("orders.createHint")||"Tip: For detailed items (products/services), create orders from POS."),1)]),_:1}),s(e(be),null,{default:r(()=>[s(e(V),{color:"secondary",onClick:J},{default:r(()=>[y(o(e(t)("common.cancel")),1)]),_:1}),s(e(V),{color:"primary",class:"btn-primary-custom",disabled:R.value,onClick:Te},{default:r(()=>[s(e(d),{icon:"cil-save",class:"me-2"}),y(" "+o(e(t)("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["visible"])]))}},as=Ke(Ka,[["__scopeId","data-v-1cd54503"]]);export{as as default};
