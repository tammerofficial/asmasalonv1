import{u as F}from"../../chunk-component-NotificationsBell-CTLJWkW4.js";import{e as f,c as m,a as v,o as l,b as t,d as c,u as s,C as r,t as o,w as h,x as g,s as y,P as _,Y as b,F as C,g as x}from"../../chunk-vendor-vue-VAxhpvd9.js";import{_ as T}from"../../chunk-component-Card-DPM96EeB.js";const W={key:0,class:"customer-quick-view"},j={class:"customer-header"},z={class:"customer-avatar"},I={class:"customer-main-info"},K={class:"customer-name"},L={class:"customer-phone"},M={class:"customer-actions"},P={class:"customer-stats"},S={class:"stat-box loyalty"},O={class:"stat-icon"},Q={class:"stat-info"},q={class:"stat-label"},E={class:"stat-value"},Y={class:"stat-box visits"},G={class:"stat-icon"},H={class:"stat-info"},J={class:"stat-label"},R={class:"stat-value"},U={class:"stat-box spent"},X={class:"stat-icon"},Z={class:"stat-info"},tt={class:"stat-label"},st={class:"stat-value text-nowrap"},et={key:0,class:"customer-badges"},at={key:1,class:"customer-preferences mt-2 d-flex flex-wrap gap-1"},ot={key:2,class:"customer-alerts mt-3"},it={key:3,class:"last-visit-box mt-3"},ct={class:"last-visit-header"},lt={class:"last-visit-label"},nt={class:"last-visit-date"},rt={class:"last-visit-content"},dt={class:"last-visit-services"},ut={class:"last-visit-footer"},mt={class:"staff-name"},vt={class:"total-spent"},ht={__name:"CustomerQuickView",props:{customer:{type:Object,default:null},customerAlerts:{type:Array,default:()=>[]},lastVisit:{type:Object,default:()=>({})}},setup(a){const{t:d}=F(),u=a,D=f(()=>{var e;return((e=u.customer)==null?void 0:e.loyalty_points)||0}),A=f(()=>{var e;return((e=u.customer)==null?void 0:e.total_visits)||0}),B=f(()=>{var e;return((e=u.customer)==null?void 0:e.total_spent)||0}),k=f(()=>{var e;return(e=u.customer)==null?void 0:e.has_active_membership}),p=f(()=>{var n;if(!((n=u.customer)!=null&&n.date_of_birth))return!1;const e=new Date,i=new Date(u.customer.date_of_birth);return e.getDate()===i.getDate()&&e.getMonth()===i.getMonth()}),w=f(()=>{var e;if(!((e=u.customer)!=null&&e.preferences))return[];try{const i=u.customer.preferences;return typeof i=="string"?i.split(",").map(n=>n.trim()).filter(Boolean):Array.isArray(i)?i:[]}catch{return[]}});function V(e){return new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:3}).format(e||0)}function $(e){return e?new Date(e).toLocaleDateString("ar-KW",{day:"numeric",month:"short"}):""}return(e,i)=>a.customer?(l(),m("div",W,[t("div",j,[t("div",z,[c(s(r),{icon:"cil-user"})]),t("div",I,[t("div",K,o(a.customer.name||a.customer.customer_name),1),t("div",L,o(a.customer.phone||a.customer.customer_phone),1)]),t("div",M,[c(s(g),{size:"sm",color:"info",variant:"ghost",class:"me-1",onClick:i[0]||(i[0]=n=>e.$emit("view-history",a.customer.id))},{default:h(()=>[c(s(r),{icon:"cil-history"})]),_:1}),c(s(g),{size:"sm",color:"primary",variant:"ghost",onClick:i[1]||(i[1]=n=>e.$emit("view-profile",a.customer.id))},{default:h(()=>[c(s(r),{icon:"cil-external-link"})]),_:1})])]),t("div",P,[t("div",S,[t("div",O,[c(s(r),{icon:"cil-star"})]),t("div",Q,[t("div",q,o(s(d)("loyalty.points")),1),t("div",E,o(D.value),1)])]),t("div",Y,[t("div",G,[c(s(r),{icon:"cil-calendar-check"})]),t("div",H,[t("div",J,o(s(d)("customers.totalVisits")||"Ø§Ù„Ø²ÙŠØ§Ø±Ø§Øª"),1),t("div",R,o(A.value),1)])]),t("div",U,[t("div",X,[c(s(r),{icon:"cil-money"})]),t("div",Z,[t("div",tt,o(s(d)("customers.totalSpent")||"Ø§Ù„Ø¥Ù†ÙØ§Ù‚"),1),t("div",st,o(V(B.value)),1)])])]),k.value||a.customer.apple_wallet_status||p.value?(l(),m("div",et,[p.value?(l(),y(s(b),{key:0,color:"danger",shape:"rounded-pill",class:"pulse-birthday me-1"},{default:h(()=>[c(s(r),{icon:"cil-birthday-cake",class:"me-1"}),_(" "+o(s(d)("customers.birthdayToday")||"ÙŠÙˆÙ… Ù…ÙŠÙ„Ø§Ø¯ Ø³Ø¹ÙŠØ¯! ðŸŽ‰"),1)]),_:1})):v("",!0),k.value?(l(),y(s(b),{key:1,color:"warning",shape:"rounded-pill",class:"me-1"},{default:h(()=>[c(s(r),{icon:"cil-gem",class:"me-1"}),_(" "+o(s(d)("memberships.active")||"Ø¹Ø¶ÙˆÙŠØ© Ù†Ø´Ø·Ø©"),1)]),_:1})):v("",!0),a.customer.apple_wallet_status==="active"?(l(),y(s(b),{key:2,color:"success",shape:"rounded-pill"},{default:h(()=>[c(s(r),{icon:"cil-wallet",class:"me-1"}),_(" "+o(s(d)("loyalty.walletLinked")||"Ù…Ø­ÙØ¸Ø© Ù†Ø´Ø·Ø©"),1)]),_:1})):a.customer?(l(),y(s(g),{key:3,size:"sm",color:"info",variant:"outline",class:"badge-btn ms-auto",onClick:i[2]||(i[2]=n=>e.$emit("send-wallet-pass",a.customer.id))},{default:h(()=>[c(s(r),{icon:"cil-send",class:"me-1"}),_(" "+o(s(d)("loyalty.sendWalletPass")||"Ø¥Ø±Ø³Ø§Ù„ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ø­ÙØ¸Ø©"),1)]),_:1})):v("",!0)])):v("",!0),w.value.length>0?(l(),m("div",at,[(l(!0),m(C,null,x(w.value,n=>(l(),y(s(b),{key:n,color:"light",variant:"outline",shape:"rounded-pill",class:"preference-tag"},{default:h(()=>[_(o(n),1)]),_:2},1024))),128))])):v("",!0),a.customerAlerts&&a.customerAlerts.length>0?(l(),m("div",ot,[(l(!0),m(C,null,x(a.customerAlerts,(n,N)=>(l(),m("div",{key:N,class:"alert-item"},[c(s(r),{icon:"cil-warning",class:"me-2 text-danger"}),_(" "+o(n),1)]))),128))])):v("",!0),a.lastVisit&&a.lastVisit.date?(l(),m("div",it,[t("div",ct,[t("span",lt,o(s(d)("customers.lastVisit")||"Ø¢Ø®Ø± Ø²ÙŠØ§Ø±Ø©"),1),t("span",nt,o($(a.lastVisit.date)),1)]),t("div",rt,[t("div",dt,o(a.lastVisit.services.join(" + ")),1),t("div",ut,[t("span",mt,[c(s(r),{icon:"cil-user",class:"me-1"}),_(" "+o(a.lastVisit.staff_name),1)]),t("span",vt,o(V(a.lastVisit.total)),1)])])])):v("",!0)])):v("",!0)}},bt=T(ht,[["__scopeId","data-v-621101b7"]]);export{bt as C};
