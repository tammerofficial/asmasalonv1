import{u as B}from"../../chunk-component-NotificationsBell-BXS18BTB.js";import{e as y,c as d,a as u,o as l,b as t,d as i,u as s,C as c,t as o,w as m,x as f,s as k,P as v,Y as V,F as D,g as $}from"../../chunk-vendor-vue-BKzcbwC-.js";import{_ as N}from"../../chunk-component-Card-D7ddNvJz.js";const F={key:0,class:"customer-quick-view"},W={class:"customer-header"},j={class:"customer-avatar"},z={class:"customer-main-info"},I={class:"customer-name"},K={class:"customer-phone"},L={class:"customer-actions"},P={class:"customer-stats"},S={class:"stat-box loyalty"},O={class:"stat-icon"},Q={class:"stat-info"},T={class:"stat-label"},q={class:"stat-value"},E={class:"stat-box visits"},M={class:"stat-icon"},Y={class:"stat-info"},G={class:"stat-label"},H={class:"stat-value"},J={class:"stat-box spent"},R={class:"stat-icon"},U={class:"stat-info"},X={class:"stat-label"},Z={class:"stat-value text-nowrap"},tt={key:0,class:"customer-badges"},st={key:1,class:"customer-alerts mt-3"},et={key:2,class:"last-visit-box mt-3"},at={class:"last-visit-header"},ot={class:"last-visit-label"},it={class:"last-visit-date"},ct={class:"last-visit-content"},lt={class:"last-visit-services"},nt={class:"last-visit-footer"},rt={class:"staff-name"},dt={class:"total-spent"},ut={__name:"CustomerQuickView",props:{customer:{type:Object,default:null},customerAlerts:{type:Array,default:()=>[]},lastVisit:{type:Object,default:()=>({})}},setup(e){const{t:n}=B(),h=e,g=y(()=>{var a;return((a=h.customer)==null?void 0:a.loyalty_points)||0}),C=y(()=>{var a;return((a=h.customer)==null?void 0:a.total_visits)||0}),x=y(()=>{var a;return((a=h.customer)==null?void 0:a.total_spent)||0}),b=y(()=>{var a;return(a=h.customer)==null?void 0:a.has_active_membership});function w(a){return new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:3}).format(a||0)}function p(a){return a?new Date(a).toLocaleDateString("ar-KW",{day:"numeric",month:"short"}):""}return(a,r)=>e.customer?(l(),d("div",F,[t("div",W,[t("div",j,[i(s(c),{icon:"cil-user"})]),t("div",z,[t("div",I,o(e.customer.name||e.customer.customer_name),1),t("div",K,o(e.customer.phone||e.customer.customer_phone),1)]),t("div",L,[i(s(f),{size:"sm",color:"info",variant:"ghost",class:"me-1",onClick:r[0]||(r[0]=_=>a.$emit("view-history",e.customer.id))},{default:m(()=>[i(s(c),{icon:"cil-history"})]),_:1}),i(s(f),{size:"sm",color:"primary",variant:"ghost",onClick:r[1]||(r[1]=_=>a.$emit("view-profile",e.customer.id))},{default:m(()=>[i(s(c),{icon:"cil-external-link"})]),_:1})])]),t("div",P,[t("div",S,[t("div",O,[i(s(c),{icon:"cil-star"})]),t("div",Q,[t("div",T,o(s(n)("loyalty.points")),1),t("div",q,o(g.value),1)])]),t("div",E,[t("div",M,[i(s(c),{icon:"cil-calendar-check"})]),t("div",Y,[t("div",G,o(s(n)("customers.totalVisits")||"الزيارات"),1),t("div",H,o(C.value),1)])]),t("div",J,[t("div",R,[i(s(c),{icon:"cil-money"})]),t("div",U,[t("div",X,o(s(n)("customers.totalSpent")||"الإنفاق"),1),t("div",Z,o(w(x.value)),1)])])]),b.value||e.customer.apple_wallet_status?(l(),d("div",tt,[b.value?(l(),k(s(V),{key:0,color:"warning",shape:"rounded-pill",class:"me-1"},{default:m(()=>[i(s(c),{icon:"cil-gem",class:"me-1"}),v(" "+o(s(n)("memberships.active")||"عضوية نشطة"),1)]),_:1})):u("",!0),e.customer.apple_wallet_status==="active"?(l(),k(s(V),{key:1,color:"success",shape:"rounded-pill"},{default:m(()=>[i(s(c),{icon:"cil-wallet",class:"me-1"}),v(" "+o(s(n)("loyalty.walletLinked")||"محفظة نشطة"),1)]),_:1})):e.customer?(l(),k(s(f),{key:2,size:"sm",color:"info",variant:"outline",class:"badge-btn ms-auto",onClick:r[2]||(r[2]=_=>a.$emit("send-wallet-pass",e.customer.id))},{default:m(()=>[i(s(c),{icon:"cil-send",class:"me-1"}),v(" "+o(s(n)("loyalty.sendWalletPass")||"إرسال بطاقة المحفظة"),1)]),_:1})):u("",!0)])):u("",!0),e.customerAlerts&&e.customerAlerts.length>0?(l(),d("div",st,[(l(!0),d(D,null,$(e.customerAlerts,(_,A)=>(l(),d("div",{key:A,class:"alert-item"},[i(s(c),{icon:"cil-warning",class:"me-2 text-danger"}),v(" "+o(_),1)]))),128))])):u("",!0),e.lastVisit&&e.lastVisit.date?(l(),d("div",et,[t("div",at,[t("span",ot,o(s(n)("customers.lastVisit")||"آخر زيارة"),1),t("span",it,o(p(e.lastVisit.date)),1)]),t("div",ct,[t("div",lt,o(e.lastVisit.services.join(" + ")),1),t("div",nt,[t("span",rt,[i(s(c),{icon:"cil-user",class:"me-1"}),v(" "+o(e.lastVisit.staff_name),1)]),t("span",dt,o(w(e.lastVisit.total)),1)])])])):u("",!0)])):u("",!0)}},_t=N(ut,[["__scopeId","data-v-7c68b95e"]]);export{_t as C};
