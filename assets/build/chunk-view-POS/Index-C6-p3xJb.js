import{f as v,g as se,w as st,i as at,c as d,o as c,d as i,b as l,p as r,u as t,s as V,a as C,Z as ue,x as w,P as m,C as g,t as n,F as L,k as U,n as ke,Y as Ce,a0 as Y,ai as ot,z as we,al as Se,a2 as lt,a3 as nt,a1 as O}from"../chunk-vendor-vue-Bg1B1rts.js";import{u as it,a as E,c as Pe}from"../chunk-component-NotificationsBell-DEeZs3pc.js";import{a as rt}from"../chunk-view-Bookings/BookingAppearance-KKyyhntW.js";import{P as ct}from"../chunk-component-PageHeader-ChZS5WBt.js";import{_ as ut,C as D}from"../chunk-component-Card-Ft_8dSMe.js";import{E as ae}from"../chunk-component-EmptyState-DTl4QHnC.js";import{L as de}from"../chunk-component-LoadingSpinner-Bt4P2D5C.js";import{X as dt}from"../chunk-vendor-6xaPOP3o.js";import"../chunk-vendor-charts-C66rl4lP.js";import"../chunk-vendor-pinia-B7RCkv_6.js";import"../chunk-vendor-axios-B9ygI19o.js";import"../chunk-component-Sidebar-BfIieaUO.js";import"../chunk-view-Bookings/BookingFormPreview-DdV3FhC4.js";class vt extends dt{constructor(){super("asmaa_pos_offline"),this.version(1).stores({pending_orders:"client_side_id, created_at, sync_attempts",cart_sessions:"session_id, customer_id, created_at"})}}const A=new vt;function Ie(){return"pos_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}function qe(){let h=sessionStorage.getItem("pos_cart_session_id");return h||(h=Ie(),sessionStorage.setItem("pos_cart_session_id",h)),h}async function Ve(h,o=null){o||(o=sessionStorage.getItem("pos_cart_session_id")||Ie());const p={client_side_id:o,order_data:h,created_at:new Date().toISOString(),sync_attempts:0,last_sync_attempt:null};return await A.pending_orders.put(p),o}async function pt(){return await A.pending_orders.orderBy("created_at").toArray()}async function _t(h){await A.pending_orders.delete(h)}async function mt(h,o){{const p=await A.pending_orders.get(h);p&&await A.pending_orders.update(h,{sync_attempts:(p.sync_attempts||0)+1,last_sync_attempt:new Date().toISOString()})}}async function ft(){return await A.pending_orders.count()}async function yt(h){var p,P,I;const o=await pt();if(o.length===0)return{synced:0,failed:0,results:[]};try{const _=await h.post("/pos/sync-pending",{orders:o.map(k=>({client_side_id:k.client_side_id,order_data:k.order_data}))}),S=((p=_.data)==null?void 0:p.results)||[],F=((P=_.data)==null?void 0:P.synced)||0,x=((I=_.data)==null?void 0:I.failed)||0;for(const k of S)k.success?await _t(k.client_side_id):await mt(k.client_side_id,!1);return{synced:F,failed:x,results:S}}catch(_){return console.error("Error syncing pending orders:",_),{synced:0,failed:o.length,results:[]}}}const gt={class:"pos-page"},ht={class:"pos-layout"},bt={class:"pos-column pos-column-1"},kt={key:2,class:"active-customers-list"},Ct=["onClick"],wt={class:"customer-avatar"},St={class:"customer-info"},Pt={class:"customer-name"},qt={class:"customer-meta"},Vt={class:"customer-service"},It={key:0,class:"customer-staff"},Nt={key:1,class:"customer-time"},Ot={value:""},Et=["value"],xt={class:"pos-column pos-column-2"},$t={key:2,class:"items-grid"},Lt=["onClick"],Ut={class:"item-name"},Mt={class:"item-price"},Tt={key:0,class:"item-category"},Dt={key:2,class:"items-grid"},At=["onClick"],Ft={class:"item-name"},Bt={class:"item-price"},zt={key:0,class:"item-stock"},Kt={key:1,class:"item-sku"},Qt={class:"pos-column pos-column-3"},Wt={class:"cart-customer mb-3"},Rt={class:"form-label"},Gt={value:""},Ht=["value"],Xt={class:"cart-items"},Yt={key:1,class:"cart-items-list"},Zt={class:"cart-item-info"},jt={class:"cart-item-name"},Jt={key:0,class:"cart-item-meta"},es={class:"cart-item-actions"},ts={class:"cart-item-quantity"},ss={class:"quantity-value"},as={class:"cart-item-price"},os={class:"cart-summary"},ls={class:"summary-row"},ns={class:"summary-row"},is={class:"summary-row total-row"},rs={class:"total-amount"},cs={class:"payment-method mb-3"},us={class:"form-label"},ds={value:"cash"},vs={value:"card"},ps={value:"knet"},_s={class:"cart-actions"},ms={key:0},fs={class:"mb-3"},ys={class:"form-label"},gs={class:"mb-3"},hs={class:"form-label"},bs={class:"mb-3"},ks={class:"form-label"},Cs={value:""},ws=["value"],Ss={class:"mb-3"},Ps={class:"form-label"},qs={key:0},Vs={class:"mb-3"},Is={class:"form-label"},Ns={class:"mb-3"},Os={class:"form-label"},Es={class:"mb-3"},xs={class:"form-label"},$s={class:"mb-3"},Ls={class:"form-label"},Us={value:""},Ms=["value"],Ts={class:"mb-3"},Ds={class:"form-label"},As={key:0},Fs={class:"mb-3"},Bs={class:"mb-3"},zs={class:"mb-3"},Ks={class:"mb-3"},Qs={__name:"Index",setup(h){const{t:o}=it(),p=rt(),P=v("services"),I=v(""),_=v(null),S=v(0),F=v("cash"),x=v(!1),k=v(navigator.onLine),ve=v(0),B=v(0),Z=v([]),j=v([]),M=v([]),z=v([]),J=v([]),$=v(null),oe=v(!1),le=v(!1),ne=v(!1),f=v([]),K=v(!1),Q=v(!1),ee=v(!1),q=v(null),y=v(null),W=v(""),R=v(""),te=v(1),T=v(1),pe=se(()=>{if(!I.value)return j.value;const a=I.value.toLowerCase();return j.value.filter(s=>(s.name_ar||s.name||"").toLowerCase().includes(a)||(s.category||"").toLowerCase().includes(a))}),_e=se(()=>{if(!I.value)return Z.value.filter(s=>(s.stock_quantity||0)>0);const a=I.value.toLowerCase();return Z.value.filter(s=>((s.name_ar||s.name||"").toLowerCase().includes(a)||(s.sku||"").toLowerCase().includes(a)||(s.barcode||"").toLowerCase().includes(a))&&(s.stock_quantity||0)>0)}),ie=se(()=>f.value.reduce((a,s)=>a+s.unit_price*s.quantity,0)),Ne=se(()=>Math.max(0,ie.value-S.value-B.value)),N=a=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:3}).format(a||0),Oe=a=>a?new Date(a).toLocaleString("en-US"):"-",Ee=a=>a?new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",xe=a=>a!=null&&a.booking_start_at?Ee(a.booking_start_at):a!=null&&a.booking_time&&typeof a.booking_time=="string"?a.booking_time.slice(0,5):"",$e=()=>{},Le=a=>{if(_.value=a?Number(a):null,window.innerWidth<1200){const s=document.querySelector(".pos-column-3");s&&s.scrollIntoView({behavior:"smooth",block:"start"})}},me=()=>{_.value&&z.value.find(a=>Number(a.id)===Number(_.value))},Ue=a=>{q.value=a,W.value="",te.value=1,K.value=!0},Me=a=>{if((a.stock_quantity||0)<=0){p.error(o("pos.noProducts"));return}y.value=a,R.value="",T.value=1,Q.value=!0},fe=()=>_.value?!0:(p.error(o("pos.selectCustomer")),!1),Te=(a,s)=>{if(fe()){if(s!=null&&s.shiftKey){Ue(a);return}f.value.push({type:"service",service_id:a.id,name:a.name_ar||a.name,quantity:1,unit_price:parseFloat(a.price||0),staff_id:null,staff_name:""})}},De=(a,s)=>{if(fe()){if((a.stock_quantity||0)<=0){p.error(o("pos.noProducts"));return}if(s!=null&&s.shiftKey){Me(a);return}f.value.push({type:"product",product_id:a.id,name:a.name_ar||a.name,quantity:1,unit_price:parseFloat(a.selling_price||a.price||0),staff_id:null,staff_name:""})}},Ae=()=>{if(!q.value)return;const a=M.value.find(e=>e.id==W.value),s=a?a.name:"";f.value.push({type:"service",service_id:q.value.id,name:q.value.name_ar||q.value.name+(s?` (${s})`:""),quantity:te.value,unit_price:parseFloat(q.value.price||0),staff_id:W.value||null,staff_name:s}),K.value=!1},Fe=()=>{if(!y.value)return;if(T.value>(y.value.stock_quantity||0)){p.error(o("pos.noProducts"));return}const a=M.value.find(e=>e.id==R.value),s=a?a.name:"";f.value.push({type:"product",product_id:y.value.id,name:y.value.name_ar||y.value.name+(s?` (${s})`:""),quantity:T.value,unit_price:parseFloat(y.value.selling_price||y.value.price||0),staff_id:R.value||null,staff_name:s}),Q.value=!1},Be=a=>{f.value[a].quantity++},ze=a=>{f.value[a].quantity>1&&f.value[a].quantity--},Ke=a=>{f.value.splice(a,1)},Qe=()=>{confirm(o("pos.clearCart")+"?")&&(f.value=[],S.value=0)},ye=()=>{},We=async()=>{var s,e,u,H,be;if(f.value.length===0){p.error(o("pos.emptyCart"));return}const a=qe();x.value=!0;try{const X={customer_id:_.value?Number(_.value):null,items:f.value.map(b=>({service_id:b.service_id||null,product_id:b.product_id||null,staff_id:b.staff_id||null,quantity:b.quantity,unit_price:b.unit_price,name:b.name})),payment_method:F.value,discount:S.value||0,client_side_id:a};if(!k.value){await Ve(X,a),p.warning(o("pos.orderSavedOffline")||"ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ Ù…Ø­Ù„ÙŠØ§Ù‹. Ø³ÙŠØªÙ… Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø¹ÙˆØ¯Ø© Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª."),await G(),f.value=[],S.value=0,x.value=!1;return}try{const b=await E.post("/pos/process",X);if((s=b.data)!=null&&s.success){const ce=((e=b.data)==null?void 0:e.data)||{},et=ce.order_number||"N/A",tt=ce.invoice_number||ce.invoice_id||"N/A";p.success(`${o("pos.orderProcessed")} ${et} | Invoice: ${tt}`),sessionStorage.removeItem("pos_cart_session_id"),f.value=[],S.value=0,ye(),Pe("/invoices"),Pe("/payments"),await re(),await G()}else p.error(((u=b.data)==null?void 0:u.message)||o("pos.errorProcessing"))}catch(b){console.error("Error processing order:",b),!b.response||b.code==="ERR_NETWORK"?(await Ve(X,a),p.warning(o("pos.orderSavedOffline")||"ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ Ù…Ø­Ù„ÙŠØ§Ù‹. Ø³ÙŠØªÙ… Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ Ø¹ÙˆØ¯Ø© Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª."),await G(),f.value=[],S.value=0):p.error(((be=(H=b.response)==null?void 0:H.data)==null?void 0:be.message)||o("pos.errorProcessing"))}finally{x.value=!1}}catch(X){console.error("Error in processOrder:",X),p.error(o("pos.errorProcessing")||"Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø·Ù„Ø¨"),x.value=!1}},Re=async()=>{var a,s,e;oe.value=!0;try{const u=await E.get("/products",{params:{per_page:1e3,is_active:1}});Z.value=((s=(a=u.data)==null?void 0:a.data)==null?void 0:s.items)||((e=u.data)==null?void 0:e.items)||[]}catch(u){console.error("Error loading products:",u),Z.value=[]}finally{oe.value=!1}},Ge=async()=>{var a,s,e;le.value=!0;try{const u=await E.get("/services",{params:{per_page:1e3,is_active:1}});j.value=((s=(a=u.data)==null?void 0:a.data)==null?void 0:s.items)||((e=u.data)==null?void 0:e.items)||[]}catch(u){console.error("Error loading services:",u),j.value=[]}finally{le.value=!1}},He=async()=>{var a,s,e;try{const u=await E.get("/staff",{params:{per_page:1e3,status:"active"}});M.value=((s=(a=u.data)==null?void 0:a.data)==null?void 0:s.items)||((e=u.data)==null?void 0:e.items)||[]}catch(u){console.error("Error loading staff:",u),M.value=[]}},Xe=async()=>{var a,s,e;try{const u=await E.get("/customers",{params:{per_page:1e3}});z.value=((s=(a=u.data)==null?void 0:a.data)==null?void 0:s.items)||((e=u.data)==null?void 0:e.items)||[]}catch(u){console.error("Error loading customers:",u),z.value=[]}},ge=async()=>{var a;ne.value=!0;try{const s=await E.get("/pos"),e=((a=s.data)==null?void 0:a.data)||s.data||{};J.value=e.active_customers||[]}catch(s){console.error("Error loading active customers:",s),J.value=[]}finally{ne.value=!1}},Ye=async()=>{var a;try{const s=await E.get("/pos/session");$.value=((a=s.data)==null?void 0:a.data)||s.data||null}catch(s){console.error("Error loading session:",s),$.value=null}},re=async()=>{await Promise.all([Re(),Ge(),He(),Xe(),ge(),Ye()]),p.success(o("pos.refresh")+" - "+o("common.refresh"))},G=async()=>{try{ve.value=await ft()}catch(a){console.error("Error getting pending orders count:",a)}},he=async()=>{if(k.value)try{const a=await yt(E);a.synced>0&&(p.success(o("pos.ordersSynced",{count:a.synced})),await G())}catch(a){console.error("Error syncing pending orders:",a)}},Ze=async()=>{var a,s;if(!_.value){B.value=0;return}try{const e=await E.get(`/pos/prepaid/${_.value}`);(a=e.data)!=null&&a.success&&(B.value=((s=e.data.data)==null?void 0:s.total_prepaid)||0)}catch(e){console.error("Error loading prepaid amount:",e),B.value=0}};st(_,()=>{_.value?Ze():B.value=0});const je=()=>{k.value=!0,he()},Je=()=>{k.value=!1,p.warning(o("pos.offlineMode"))};return at(()=>{qe(),G(),window.addEventListener("online",je),window.addEventListener("offline",Je),re(),setInterval(()=>{k.value&&ve.value>0&&he()},3e4),setInterval(()=>{ge()},1e4)}),(a,s)=>(c(),d("div",gt,[i(ct,{title:t(o)("pos.title"),subtitle:t(o)("pos.subtitle")},{icon:r(()=>[i(t(g),{icon:"cil-cart"})]),actions:r(()=>[$.value?(c(),V(t(w),{key:0,color:"primary",variant:"outline",onClick:s[0]||(s[0]=e=>ee.value=!0),class:"me-2"},{default:r(()=>[i(t(g),{icon:"cil-info",class:"me-2"}),m(" "+n(t(o)("pos.sessionInfo")),1)]),_:1})):C("",!0),i(t(w),{color:"primary",variant:"outline",onClick:re,class:"me-2"},{default:r(()=>[i(t(g),{icon:"cil-reload",class:"me-2"}),m(" "+n(t(o)("pos.refresh")),1)]),_:1})]),_:1},8,["title","subtitle"]),l("div",ht,[l("div",bt,[i(D,{title:t(o)("pos.activeCustomers"),icon:"cil-people",class:"h-100"},{footer:r(()=>[i(t(Y),{modelValue:_.value,"onUpdate:modelValue":s[1]||(s[1]=e=>_.value=e),modelModifiers:{number:!0},placeholder:t(o)("pos.selectCustomer"),onChange:me},{default:r(()=>[l("option",Ot,n(t(o)("pos.selectCustomer")),1),(c(!0),d(L,null,U(z.value,e=>(c(),d("option",{key:e.id,value:e.id},n(e.name_ar||e.name)+" - "+n(e.phone),9,Et))),128))]),_:1},8,["modelValue","placeholder"])]),default:r(()=>[ne.value?(c(),V(de,{key:0,text:t(o)("common.loading")},null,8,["text"])):J.value.length===0?(c(),V(ae,{key:1,title:t(o)("pos.noActiveCustomers"),description:t(o)("pos.noActiveCustomersDesc"),"icon-color":"gray"},null,8,["title","description"])):(c(),d("div",kt,[(c(!0),d(L,null,U(J.value,e=>(c(),d("div",{key:e.id,class:ke(["active-customer-item",{selected:Number(_.value)===Number(e.id)}]),onClick:u=>Le(e.id)},[l("div",wt,[i(t(g),{icon:"cil-user"})]),l("div",St,[l("div",Pt,n(e.name),1),l("div",qt,[i(t(Ce),{color:"primary",class:"me-2"},{default:r(()=>[m(n(e.type==="queue"?e.ticket_number?`#${e.ticket_number}`:t(o)("queue.title"):t(o)("bookings.title")),1)]),_:2},1024),l("span",Vt,n(e.current_service||"N/A"),1)]),e.staff_name&&e.staff_name!=="Unassigned"?(c(),d("div",It,[i(t(g),{icon:"cil-user",class:"me-1"}),m(" "+n(e.staff_name),1)])):C("",!0),e.booking_start_at||e.booking_time?(c(),d("div",Nt,[i(t(g),{icon:"cil-clock",class:"me-1"}),m(" "+n(xe(e)),1)])):C("",!0)])],10,Ct))),128))]))]),_:1},8,["title"])]),l("div",xt,[i(D,null,{default:r(()=>[i(t(ot),{variant:"tabs",role:"tablist"},{default:r(()=>[i(t(we),null,{default:r(()=>[i(t(Se),{active:P.value==="services",onClick:s[2]||(s[2]=e=>P.value="services"),role:"tab"},{default:r(()=>[i(t(g),{icon:"cil-spreadsheet",class:"me-2"}),m(" "+n(t(o)("pos.services")),1)]),_:1},8,["active"])]),_:1}),i(t(we),null,{default:r(()=>[i(t(Se),{active:P.value==="products",onClick:s[3]||(s[3]=e=>P.value="products"),role:"tab"},{default:r(()=>[i(t(g),{icon:"cil-basket",class:"me-2"}),m(" "+n(t(o)("pos.products")),1)]),_:1},8,["active"])]),_:1})]),_:1})]),_:1}),i(D,null,{default:r(()=>[i(t(lt),null,{default:r(()=>[i(t(nt),null,{default:r(()=>[i(t(g),{icon:"cil-magnifying-glass"})]),_:1}),i(t(O),{modelValue:I.value,"onUpdate:modelValue":s[4]||(s[4]=e=>I.value=e),placeholder:P.value==="services"?t(o)("pos.searchService"):t(o)("pos.searchProduct"),onInput:$e},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),P.value==="services"?(c(),V(D,{key:0,title:t(o)("pos.services"),icon:"cil-spreadsheet"},{default:r(()=>[le.value?(c(),V(de,{key:0,text:t(o)("common.loading")},null,8,["text"])):pe.value.length===0?(c(),V(ae,{key:1,title:t(o)("pos.noServices"),description:t(o)("pos.noServices"),"icon-color":"gray"},null,8,["title","description"])):(c(),d("div",$t,[(c(!0),d(L,null,U(pe.value,e=>(c(),d("div",{key:e.id,class:"item-card",onClick:u=>Te(e,u)},[l("div",Ut,n(e.name_ar||e.name),1),l("div",Mt,n(N(e.price||0)),1),e.category?(c(),d("div",Tt,[i(t(g),{icon:"cil-tag",class:"me-1"}),m(" "+n(e.category),1)])):C("",!0)],8,Lt))),128))]))]),_:1},8,["title"])):C("",!0),P.value==="products"?(c(),V(D,{key:1,title:t(o)("pos.products"),icon:"cil-basket"},{default:r(()=>[oe.value?(c(),V(de,{key:0,text:t(o)("common.loading")},null,8,["text"])):_e.value.length===0?(c(),V(ae,{key:1,title:t(o)("pos.noProducts"),description:t(o)("pos.noProducts"),"icon-color":"gray"},null,8,["title","description"])):(c(),d("div",Dt,[(c(!0),d(L,null,U(_e.value,e=>(c(),d("div",{key:e.id,class:ke(["item-card",{"out-of-stock":(e.stock_quantity||0)<=0}]),onClick:u=>De(e,u)},[l("div",Ft,n(e.name_ar||e.name),1),l("div",Bt,n(N(e.selling_price||e.price||0)),1),e.stock_quantity!==void 0?(c(),d("div",zt,[i(t(Ce),{color:"primary"},{default:r(()=>[m(n(t(o)("products.stock"))+": "+n(e.stock_quantity),1)]),_:2},1024)])):C("",!0),e.sku?(c(),d("div",Kt,[l("small",null,"SKU: "+n(e.sku),1)])):C("",!0)],10,At))),128))]))]),_:1},8,["title"])):C("",!0)]),l("div",Qt,[i(D,{title:t(o)("pos.cart"),icon:"cil-cart",class:"h-100"},{default:r(()=>[l("div",Wt,[l("label",Rt,n(t(o)("pos.customer")),1),i(t(Y),{modelValue:_.value,"onUpdate:modelValue":s[5]||(s[5]=e=>_.value=e),modelModifiers:{number:!0},onChange:me},{default:r(()=>[l("option",Gt,n(t(o)("pos.walkInCustomer")),1),(c(!0),d(L,null,U(z.value,e=>(c(),d("option",{key:e.id,value:e.id},n(e.name_ar||e.name),9,Ht))),128))]),_:1},8,["modelValue"])]),l("div",Xt,[f.value.length===0?(c(),V(ae,{key:0,title:t(o)("pos.emptyCart"),description:t(o)("pos.emptyCartDesc"),"icon-color":"gray"},null,8,["title","description"])):(c(),d("div",Yt,[(c(!0),d(L,null,U(f.value,(e,u)=>(c(),d("div",{key:u,class:"cart-item"},[l("div",Zt,[l("div",jt,n(e.name),1),e.staff_name?(c(),d("div",Jt,[i(t(g),{icon:"cil-user",class:"me-1"}),m(" "+n(e.staff_name),1)])):C("",!0)]),l("div",es,[l("div",ts,[i(t(w),{color:"primary",size:"sm",variant:"outline",onClick:H=>ze(u)},{default:r(()=>[i(t(g),{icon:"cil-minus"})]),_:1},8,["onClick"]),l("span",ss,n(e.quantity),1),i(t(w),{color:"primary",size:"sm",variant:"outline",onClick:H=>Be(u)},{default:r(()=>[i(t(g),{icon:"cil-plus"})]),_:1},8,["onClick"])]),l("div",as,n(N(e.unit_price*e.quantity)),1),i(t(w),{color:"primary",size:"sm",variant:"ghost",onClick:H=>Ke(u)},{default:r(()=>[i(t(g),{icon:"cil-trash"})]),_:1},8,["onClick"])])]))),128))]))]),l("div",os,[l("div",ls,[l("span",null,n(t(o)("pos.subtotal"))+":",1),l("strong",null,n(N(ie.value)),1)]),l("div",ns,[l("span",null,n(t(o)("pos.discount"))+":",1),i(t(O),{modelValue:S.value,"onUpdate:modelValue":s[6]||(s[6]=e=>S.value=e),modelModifiers:{number:!0},type:"number",step:"0.001",min:"0",max:ie.value,onInput:ye,class:"discount-input"},null,8,["modelValue","max"])]),l("div",is,[l("span",null,n(t(o)("pos.total"))+":",1),l("strong",rs,n(N(Ne.value)),1)])]),l("div",cs,[l("label",us,n(t(o)("pos.paymentMethod")),1),i(t(Y),{modelValue:F.value,"onUpdate:modelValue":s[7]||(s[7]=e=>F.value=e)},{default:r(()=>[l("option",ds,"ðŸ’µ "+n(t(o)("pos.cash")),1),l("option",vs,"ðŸ’³ "+n(t(o)("pos.card")),1),l("option",ps,"ðŸ§ "+n(t(o)("pos.knet")),1)]),_:1},8,["modelValue"])]),l("div",_s,[i(t(w),{color:"primary",variant:"outline",onClick:Qe,class:"w-100 mb-2",disabled:f.value.length===0},{default:r(()=>[i(t(g),{icon:"cil-trash",class:"me-2"}),m(" "+n(t(o)("pos.clearCart")),1)]),_:1},8,["disabled"]),i(t(w),{color:"primary",onClick:We,class:"w-100",disabled:f.value.length===0||x.value},{default:r(()=>[i(t(g),{icon:"cil-check-circle",class:"me-2"}),m(" "+n(x.value?t(o)("pos.processing"):t(o)("pos.processOrder")),1)]),_:1},8,["disabled"])])]),_:1},8,["title"])])]),i(t(ue),{visible:K.value,"onUpdate:visible":s[11]||(s[11]=e=>K.value=e),title:t(o)("pos.addService"),size:"lg"},{body:r(()=>[q.value?(c(),d("div",ms,[l("div",fs,[l("label",ys,n(t(o)("pos.service")),1),i(t(O),{value:q.value.name_ar||q.value.name,disabled:""},null,8,["value"])]),l("div",gs,[l("label",hs,n(t(o)("pos.price")),1),i(t(O),{value:N(q.value.price||0),disabled:""},null,8,["value"])]),l("div",bs,[l("label",ks,n(t(o)("pos.staff")),1),i(t(Y),{modelValue:W.value,"onUpdate:modelValue":s[8]||(s[8]=e=>W.value=e)},{default:r(()=>[l("option",Cs,n(t(o)("pos.selectStaff")),1),(c(!0),d(L,null,U(M.value,e=>(c(),d("option",{key:e.id,value:e.id},n(e.name),9,ws))),128))]),_:1},8,["modelValue"])]),l("div",Ss,[l("label",Ps,n(t(o)("pos.quantity")),1),i(t(O),{modelValue:te.value,"onUpdate:modelValue":s[9]||(s[9]=e=>te.value=e),modelModifiers:{number:!0},type:"number",min:"1"},null,8,["modelValue"])])])):C("",!0)]),footer:r(()=>[i(t(w),{color:"primary",variant:"outline",onClick:s[10]||(s[10]=e=>K.value=!1)},{default:r(()=>[m(n(t(o)("pos.cancel")),1)]),_:1}),i(t(w),{color:"primary",onClick:Ae},{default:r(()=>[m(n(t(o)("pos.addToCart")),1)]),_:1})]),_:1},8,["visible","title"]),i(t(ue),{visible:Q.value,"onUpdate:visible":s[15]||(s[15]=e=>Q.value=e),title:t(o)("pos.addProduct"),size:"lg"},{body:r(()=>[y.value?(c(),d("div",qs,[l("div",Vs,[l("label",Is,n(t(o)("products.title")),1),i(t(O),{value:y.value.name_ar||y.value.name,disabled:""},null,8,["value"])]),l("div",Ns,[l("label",Os,n(t(o)("pos.price")),1),i(t(O),{value:N(y.value.selling_price||y.value.price||0),disabled:""},null,8,["value"])]),l("div",Es,[l("label",xs,n(t(o)("pos.availableStock")),1),i(t(O),{value:y.value.stock_quantity||0,disabled:""},null,8,["value"])]),l("div",$s,[l("label",Ls,n(t(o)("pos.staff")),1),i(t(Y),{modelValue:R.value,"onUpdate:modelValue":s[12]||(s[12]=e=>R.value=e)},{default:r(()=>[l("option",Us,n(t(o)("pos.selectStaff")),1),(c(!0),d(L,null,U(M.value,e=>(c(),d("option",{key:e.id,value:e.id},n(e.name),9,Ms))),128))]),_:1},8,["modelValue"])]),l("div",Ts,[l("label",Ds,n(t(o)("pos.quantity")),1),i(t(O),{modelValue:T.value,"onUpdate:modelValue":s[13]||(s[13]=e=>T.value=e),modelModifiers:{number:!0},type:"number",min:"1",max:y.value.stock_quantity||999},null,8,["modelValue","max"])])])):C("",!0)]),footer:r(()=>{var e;return[i(t(w),{color:"primary",variant:"outline",onClick:s[14]||(s[14]=u=>Q.value=!1)},{default:r(()=>[m(n(t(o)("pos.cancel")),1)]),_:1}),i(t(w),{color:"primary",onClick:Fe,disabled:T.value>(((e=y.value)==null?void 0:e.stock_quantity)||0)},{default:r(()=>[m(n(t(o)("pos.addToCart")),1)]),_:1},8,["disabled"])]}),_:1},8,["visible","title"]),i(t(ue),{visible:ee.value,"onUpdate:visible":s[17]||(s[17]=e=>ee.value=e),title:t(o)("pos.sessionInfo")},{body:r(()=>[$.value?(c(),d("div",As,[l("div",Fs,[l("strong",null,n(t(o)("pos.openedAt"))+":",1),m(" "+n(Oe($.value.opened_at)),1)]),l("div",Bs,[l("strong",null,n(t(o)("pos.openingCash"))+":",1),m(" "+n(N($.value.opening_cash||0)),1)]),l("div",zs,[l("strong",null,n(t(o)("pos.totalTransactions"))+":",1),m(" "+n($.value.total_transactions||0),1)]),l("div",Ks,[l("strong",null,n(t(o)("pos.totalSales"))+":",1),m(" "+n(N($.value.total_sales||0)),1)])])):C("",!0)]),footer:r(()=>[i(t(w),{color:"primary",onClick:s[16]||(s[16]=e=>ee.value=!1)},{default:r(()=>[m(n(t(o)("pos.close")),1)]),_:1})]),_:1},8,["visible","title"])]))}},oa=ut(Qs,[["__scopeId","data-v-440aa346"]]);export{oa as default};
