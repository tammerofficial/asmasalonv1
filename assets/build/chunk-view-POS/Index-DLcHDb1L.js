import{f,e as K,j as Ue,c as m,o as u,b as s,d as l,s as I,a as k,t as o,u as e,w as r,Y as Z,x as P,a0 as pe,l as We,p as Ee,P as v,C as b,Z as Me,F as T,g as D,n as qe,aa as Ge,ab as He,a3 as J,z as ce,a1 as ue,a4 as ze,a5 as fe,a6 as _e,a7 as ye,$ as Ke,a2 as Re,a8 as Fe,X as Xe}from"../chunk-vendor-vue-BKzcbwC-.js";import{a as N,u as Be,N as Ye}from"../chunk-component-NotificationsBell-BXS18BTB.js";import{u as Qe}from"../chunk-view-AppleWallet/Simulator-DWRUiMHd.js";import{d as Ze}from"../chunk-vendor-pinia-CsGkbfJ3.js";import"../chunk-component-PageHeader-CI_3JpQM.js";import{_ as Je,C as je}from"../chunk-component-Card-D7ddNvJz.js";import{E as $e}from"../chunk-component-EmptyState-QeIH5i51.js";import{L as et}from"../chunk-component-LoadingSpinner-C0iMeCmp.js";import{Q as tt}from"./Components/QuickStatsBar-Cfro5SdS.js";import{C as st}from"./Components/CustomerQuickView-CiecjOGl.js";import{B as at}from"./Components/BookingCard-C0qg7OC4.js";import{Q as ot}from"./Components/QueueTicketCard-SBkawhzp.js";import{P as lt}from"./Components/PaymentMethodsGrid-s5pG315t.js";import{S as nt}from"./Components/StaffStatusWidget-BD0byUF5.js";import{L as it}from"./Components/LiveAnalyticsDashboard-BEXdeknz.js";import"../chunk-vendor-Ltsl4QyH.js";import"../chunk-vendor-axios-B9ygI19o.js";const Oe=Ze("pos",()=>{const g=f([]),n=f([]),h=f([]),j=f([]),i=f([]),B=f([]),Q=f([]),ee=f([]),A=f([]),de=f([]),me=f([]),he=f([]),ge=f([]),p=f(null),d=f([]),x=f(null),L=f(0),O=f("cash"),S=f(0),X=f([{method:"cash",amount:0},{method:"knet",amount:0},{method:"credit_card",amount:0},{method:"wallet",amount:0}]),te=f([]),se=f({date:null,services:[],total:0,staff_name:""}),q=f({products:!1,services:!1,staff:!1,customers:!1,activeCustomers:!1,session:!1,loyalty:!1,finance:!1}),E=K(()=>d.value.reduce((_,V)=>_+V.unit_price*V.quantity,0)),ae=K(()=>Math.max(0,E.value-L.value-S.value)),R=K(()=>Math.floor(ae.value)),z=K(()=>x.value?j.value.find(_=>Number(_.id)===Number(x.value))||B.value.find(_=>Number(_.id)===Number(x.value)):null);function $(_,V){const C=X.value.find(W=>W.method===_);C&&(C.amount=Number(V))}function U(){X.value=[{method:"cash",amount:0},{method:"knet",amount:0},{method:"credit_card",amount:0},{method:"wallet",amount:0}]}function F(_){te.value.push(_)}function Ce(){te.value=[]}function Ve(_){se.value=_}async function Ie(){var _,V,C,W,oe,Y,le,ne,ie,G,re,ve,xe,Se,Ae,Pe,c;q.value.products=!0,q.value.services=!0,q.value.staff=!0,q.value.customers=!0,q.value.activeCustomers=!0,q.value.session=!0;try{const[a,y,M,t,w,H,Le]=await Promise.all([N.get("/products",{params:{per_page:1e3,is_active:1}}),N.get("/services",{params:{per_page:1e3,is_active:1}}),N.get("/staff",{params:{per_page:1e3,status:"active"}}),N.get("/customers",{params:{per_page:1e3}}),N.get("/memberships/plans",{params:{is_active:1}}),N.get("/pos"),N.get("/pos/session")]);g.value=((V=(_=a.data)==null?void 0:_.data)==null?void 0:V.items)||((C=a.data)==null?void 0:C.items)||[],n.value=((oe=(W=y.data)==null?void 0:W.data)==null?void 0:oe.items)||((Y=y.data)==null?void 0:Y.items)||[],h.value=((ne=(le=M.data)==null?void 0:le.data)==null?void 0:ne.items)||((ie=M.data)==null?void 0:ie.items)||[],j.value=((re=(G=t.data)==null?void 0:G.data)==null?void 0:re.items)||((ve=t.data)==null?void 0:ve.items)||[],i.value=((Se=(xe=w.data)==null?void 0:xe.data)==null?void 0:Se.items)||((Ae=w.data)==null?void 0:Ae.items)||[];const De=((Pe=H.data)==null?void 0:Pe.data)||H.data||{};B.value=De.active_customers||[],Q.value=De.bookings||[],ee.value=De.queue_tickets||[],p.value=((c=Le.data)==null?void 0:c.data)||Le.data||null}catch(a){console.error("Error fetching POS data:",a)}finally{Object.keys(q.value).forEach(a=>q.value[a]=!1)}}async function Ne(_){var V;if(!_)return null;q.value.loyalty=!0;try{const C=await N.get(`/customers/${_}/loyalty`);return((V=C.data)==null?void 0:V.data)||C.data}catch(C){return console.error("Error fetching loyalty data:",C),null}finally{q.value.loyalty=!1}}async function ke(_){var V,C,W,oe,Y,le,ne,ie;if(_){q.value.finance=!0;try{const[G,re,ve]=await Promise.all([N.get("/invoices",{params:{customer_id:_,limit:5}}),N.get("/payments",{params:{customer_id:_,limit:5}}),N.get(`/pos/prepaid/${_}`)]);de.value=((C=(V=G.data)==null?void 0:V.data)==null?void 0:C.items)||((W=G.data)==null?void 0:W.items)||[],me.value=((Y=(oe=re.data)==null?void 0:oe.data)==null?void 0:Y.items)||((le=re.data)==null?void 0:le.items)||[],S.value=((ie=(ne=ve.data)==null?void 0:ne.data)==null?void 0:ie.total_prepaid)||0}catch(G){console.error("Error fetching financial data:",G)}finally{q.value.finance=!1}}}function we(_){const V=d.value.findIndex(C=>C.type===_.type&&(_.type==="product"?C.product_id===_.product_id:C.service_id===_.service_id)&&C.staff_id===_.staff_id);V>-1?d.value[V].quantity+=_.quantity||1:d.value.push({..._,quantity:_.quantity||1})}function Te(_){d.value.splice(_,1)}function be(){d.value=[],L.value=0,S.value=0}return{products:g,services:n,staff:h,customers:j,activeCustomers:B,bookings:Q,queueTickets:ee,orders:A,invoices:de,payments:me,commissions:he,workerCalls:ge,openSession:p,cart:d,selectedCustomerId:x,discount:L,paymentMethod:O,prepaidAmount:S,loading:q,subtotal:E,total:ae,potentialPoints:R,selectedCustomer:z,splitPayments:X,customerAlerts:te,lastVisitDetails:se,fetchAllData:Ie,fetchLoyaltyData:Ne,fetchCustomerFinancials:ke,addToCart:we,removeFromCart:Te,clearCart:be,setSplitPaymentAmount:$,clearSplitPayments:U,addCustomerAlert:F,clearCustomerAlerts:Ce,setLastVisitDetails:Ve}});function rt(){const g=Oe(),{t:n}=Be(),h=Qe(),j=f(!1);async function i(p){g.selectedCustomerId=p.id||p.customer_id,g.clearCustomerAlerts(),g.setLastVisitDetails({date:null,services:[],total:0,staff_name:""}),await Promise.all([g.fetchLoyaltyData(g.selectedCustomerId),g.fetchCustomerFinancials(g.selectedCustomerId)]),h.success(n("pos.customerSelected")||"تم اختيار العميلة: "+(p.name||p.customer_name))}async function B(){var p;try{const d=await N.post("/queue/call-next");if((p=d.data)!=null&&p.data){const x=d.data.data;return await N.post(`/queue/${x.id}/call`),h.success(`${n("queue.ticketCalled")}: ${x.ticket_number||x.id}`),await g.fetchAllData(),x}else h.warning(n("queue.noWaitingTickets"))}catch(d){console.error("Error calling next:",d),h.error(n("queue.errorCallingTicket"))}return null}async function Q(p){try{await N.post(`/queue/${p}/call`),h.success(n("queue.ticketCalled")||"تم استدعاء التذكرة"),await g.fetchAllData()}catch(d){console.error("Error calling ticket:",d),h.error(n("queue.errorCallingTicket"))}}async function ee(p){try{await N.post(`/queue/${p}/start`),h.success(n("queue.serviceStarted")||"بدء الخدمة"),await g.fetchAllData()}catch(d){console.error("Error starting service:",d),h.error(n("queue.errorStartingService"))}}async function A(p){var d;if(!g.selectedCustomerId)return!1;try{if((d=(await N.post("/loyalty/redeem",{customer_id:g.selectedCustomerId,points:p,description:n("pos.redeemPointsDescription")||"استبدال نقاط من خلال POS"})).data)!=null&&d.success)return h.success(n("loyalty.redeemed")||"تم استبدال النقاط بنجاح"),await g.fetchLoyaltyData(g.selectedCustomerId),!0}catch(x){console.error("Error redeeming points:",x),h.error(n("loyalty.errorRedeeming")||"خطأ في استبدال النقاط")}return!1}async function de(p){try{return j.value=!0,p.customer_id&&await i({id:p.customer_id,name:p.customer_name}),p.service_id&&g.addToCart({service_id:p.service_id,name:p.service_name,unit_price:p.price,quantity:1,staff_id:p.staff_id}),h.success(n("pos.bookingProcessed")||"تم تحويل الحجز إلى سلة المشتريات"),!0}catch(d){return console.error("Error processing booking arrival:",d),h.error(n("pos.errorProcessingArrival")),!1}finally{j.value=!1}}async function me(p){try{return j.value=!0,p.customer_id&&await i({id:p.customer_id,name:p.customer_name}),p.service_id&&g.addToCart({service_id:p.service_id,name:p.service_name,unit_price:p.price,quantity:1,staff_id:p.staff_id}),await ee(p.id),h.success(n("pos.queueProcessed")||"تم تحويل التذكرة إلى سلة المشتريات وبدء الخدمة"),!0}catch(d){return console.error("Error processing queue arrival:",d),h.error(n("pos.errorProcessingArrival")),!1}finally{j.value=!1}}async function he(p){var d,x;if(g.cart.length===0)return h.error(n("pos.emptyCart")),!1;j.value=!0;try{const L={customer_id:g.selectedCustomerId?Number(g.selectedCustomerId):null,items:g.cart.map(S=>({service_id:S.service_id||null,product_id:S.product_id||null,staff_id:S.staff_id||null,quantity:S.quantity,unit_price:S.unit_price,name:S.name})),payment_method:g.paymentMethod,discount:g.discount||0,client_side_id:p,is_split_payment:g.splitPayments.some(S=>S.amount>0),split_payments:g.splitPayments.filter(S=>S.amount>0)},O=await N.post("/pos/process",L);return(d=O.data)!=null&&d.success?(h.success(n("pos.orderProcessed")||"تمت معالجة الطلب بنجاح"),g.clearCart(),g.clearSplitPayments(),await g.fetchAllData(),O.data.data):(h.error(((x=O.data)==null?void 0:x.message)||n("pos.errorProcessing")),!1)}catch(L){return console.error("Error in checkout:",L),h.error(n("pos.errorProcessing")||"خطأ في معالجة الطلب"),!1}finally{j.value=!1}}function ge(p){return new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:3}).format(p||0)}return{isProcessing:j,selectActiveCustomer:i,processCheckout:he,formatCurrency:ge,processBookingArrival:de,processQueueTicketArrival:me,callNextInQueue:B,callSpecificTicket:Q,serveTicket:ee,redeemLoyaltyPoints:A}}const ct={class:"pos-page"},ut={class:"pos-header-top d-flex justify-content-between align-items-center mb-3"},dt={class:"header-left d-flex align-items-center gap-3"},mt={class:"mb-0 fw-bold text-primary"},vt={class:"header-right d-flex align-items-center gap-3"},pt={class:"pos-layout"},ft={class:"pos-column pos-operations"},_t={class:"d-flex justify-content-between align-items-center w-100"},yt={class:"fw-bold"},ht={class:"operation-section mb-3"},gt={class:"section-title d-flex justify-content-between align-items-center mb-2"},bt={class:"arrived-hub bg-tertiary rounded-4 p-2 border-dashed border-primary"},Ct={key:0,class:"small text-muted text-center py-2"},kt={key:1,class:"d-flex flex-column gap-2"},wt=["onClick"],xt={class:"d-flex align-items-center gap-2"},St={class:"mini-avatar-box"},At={class:"info"},Pt={class:"name fw-bold small truncate",style:{"max-width":"80px"}},qt={class:"time tiny text-muted"},$t={class:"operation-section"},Vt={class:"section-title d-flex justify-content-between align-items-center"},It={class:"operation-list"},Nt=["onClick"],Tt={class:"item-avatar"},Dt={class:"item-info"},Mt={class:"item-name"},jt={class:"item-meta"},Lt={class:"ms-2"},Et={key:0,class:"empty-state-mini"},zt={class:"operation-section mt-3"},Rt={class:"section-title d-flex justify-content-between"},Ft={class:"operation-list"},Bt={class:"operation-section mt-3"},Qt={class:"section-title d-flex justify-content-between"},Ot={class:"operation-list"},Ut={class:"pos-column pos-catalog"},Wt={key:0,class:"customer-alert-banner bg-danger text-white p-2 rounded-3 mb-2 d-flex align-items-center gap-3 pulse-red shadow-sm"},Gt={class:"alert-content flex-grow-1"},Ht={class:"small fw-bold"},Kt={class:"catalog-header-actions w-100"},Xt={key:0,class:"smart-upsell-bar px-3 py-2 border-bottom bg-light d-flex align-items-center gap-3 overflow-auto"},Yt={class:"upsell-title small fw-bold text-nowrap text-primary"},Zt={class:"upsell-items d-flex gap-2"},Jt={class:"catalog-grid-wrapper"},es={key:1,class:"catalog-grid"},ts=["onClick"],ss={key:0,class:"item-category-badge"},as={class:"item-name"},os={class:"item-price"},ls={key:1,class:"item-stock"},ns={class:"quick-add"},is={class:"pos-column pos-checkout"},rs={class:"fw-bold"},cs={class:"checkout-customer-section"},us={key:1,class:"customer-selection-empty"},ds={value:null},ms=["value"],vs={key:2,class:"last-services-box mt-3 p-3 bg-tertiary rounded-4 border"},ps={class:"small fw-bold text-muted mb-2 d-flex align-items-center"},fs={class:"d-flex flex-wrap gap-2"},_s={class:"cart-items-section"},ys={key:0,class:"empty-cart-display"},hs={key:1,class:"cart-list"},gs={class:"cart-item"},bs={class:"item-info"},Cs={class:"item-name"},ks={key:0,class:"item-staff"},ws={class:"item-controls"},xs={class:"quantity-picker"},Ss=["onClick"],As=["onClick"],Ps={class:"item-total"},qs={class:"cart-item-note"},$s={class:"checkout-footer"},Vs={class:"summary-details"},Is={class:"summary-line"},Ns={key:0,class:"summary-line"},Ts={class:"text-success"},Ds={class:"summary-line discount-line"},Ms={class:"summary-line total-line"},js={class:"total-amount"},Ls={key:0,class:"loyalty-preview-banner mt-2 p-2 rounded-3 text-center small fw-bold"},Es={class:"payment-section mt-3"},zs={class:"d-flex justify-content-between align-items-center mb-2"},Rs={class:"small fw-bold text-muted uppercase"},Fs={key:0,class:"split-payment-grid bg-tertiary p-3 rounded-4 border mb-3"},Bs={class:"checkout-actions"},Qs={key:0,class:"history-list"},Os={class:"d-flex justify-content-between"},Us={class:"fw-bold"},Ws={class:"text-primary fw-bold"},Gs={class:"d-flex justify-content-between mt-1"},Hs={class:"small text-muted"},Ks={key:1,class:"history-list"},Xs={class:"d-flex justify-content-between"},Ys={class:"fw-bold"},Zs={class:"text-primary fw-bold"},Js={class:"d-flex justify-content-between mt-1"},ea={class:"small text-muted"},ta={key:2,class:"history-list"},sa={class:"d-flex justify-content-between"},aa={class:"fw-bold"},oa={class:"text-success fw-bold"},la={class:"d-flex justify-content-between mt-1"},na={class:"small text-muted"},ia={class:"item-preview-card"},ra={class:"item-name h4"},ca={class:"item-price h3 text-primary"},ua={class:"mb-3"},da={class:"form-label small fw-bold text-muted"},ma={value:""},va=["value"],pa={key:0,class:"mt-2 small text-success fw-bold"},fa={class:"mb-3"},_a={class:"form-label small fw-bold text-muted"},ya={class:"quantity-input-large"},ha={class:"offers-section"},ga={class:"section-title small fw-bold text-muted mb-2 uppercase"},ba={class:"empty-state-mini border rounded p-3 text-center"},Ca={class:"mb-3"},ka={class:"form-label"},wa={class:"mb-3"},xa={class:"form-label"},Sa={class:"mb-3"},Aa={class:"form-label"},Pa={class:"invoice-container p-4",id:"printable-invoice"},qa={class:"invoice-header text-center mb-4"},$a={class:"small"},Va={class:"invoice-items mb-4"},Ia={class:"invoice-summary"},Na={class:"d-flex justify-content-between"},Ta={key:0,class:"d-flex justify-content-between text-danger"},Da={class:"d-flex justify-content-between fw-bold h4 mt-2"},Ma={class:"invoice-footer text-center mt-5"},ja={class:"settings-list"},La={class:"setting-item d-flex justify-content-between align-items-center mb-3 p-2 border rounded"},Ea={class:"fw-bold"},za={class:"small text-muted"},Ra={class:"setting-item d-flex justify-content-between align-items-center mb-3 p-2 border rounded"},Fa={class:"fw-bold"},Ba={class:"small text-muted"},Qa={__name:"Index",setup(g){const{t:n}=Be(),h=Qe(),j=We(),i=Oe(),{isProcessing:B,selectActiveCustomer:Q,processCheckout:ee,formatCurrency:A,processBookingArrival:de,processQueueTicketArrival:me,callNextInQueue:he,callSpecificTicket:ge,serveTicket:p}=rt(),d=f("services"),x=f(""),L=f(!1),O=f(!1),S=f(!1),X=f(!1),te=f(!1),se=f(!1),q=f(!1),E=f(null),ae=f(!1),R=f({name:"",phone:"",email:""}),z=f("orders"),$=f(null),U=f(""),F=f(1),Ce=K(()=>{const c=i.splitPayments.reduce((a,y)=>a+(Number(y.amount)||0),0);return i.total-c}),Ve=c=>{switch(c){case"cash":return"cil-money";case"knet":return"cil-credit-card";case"credit_card":return"cil-bank";case"wallet":return"cil-wallet";default:return"cil-money"}},Ie=c=>{switch(c){case"cash":return"text-success";case"knet":return"text-info";case"credit_card":return"text-primary";case"wallet":return"text-warning";default:return""}},Ne=K(()=>i.staff.length?[...i.staff].sort((a,y)=>getStaffCurrentLoad(a.id)-getStaffCurrentLoad(y.id))[0].id:null),ke=K(()=>{if(!U.value||!$.value)return 0;const c=i.staff.find(M=>Number(M.id)===Number(U.value));if(!c)return 0;const a=parseFloat($.value.price||$.value.selling_price||0),y=parseFloat(c.commission_rate||10);return a*F.value*(y/100)}),we=K(()=>{let c=[];if(d.value==="services"?c=i.services:d.value==="products"?c=i.products:d.value==="memberships"&&(c=i.memberships),!x.value)return c;const a=x.value.toLowerCase();return c.filter(y=>(y.name_ar||y.name||"").toLowerCase().includes(a)||(y.category||"").toLowerCase().includes(a)||(y.sku||"").toLowerCase().includes(a))}),Te=K(()=>{if(i.cart.length===0)return[];const c=i.cart.map(y=>y.service_id||y.product_id);return(d.value==="services"?i.services:i.products).filter(y=>!c.includes(y.id)).slice(0,3)}),be=c=>{if(d.value==="products"&&(c.stock_quantity||0)<=0){h.error(n("pos.outOfStock")||"المنتج غير متوفر في المخزون");return}$.value=c,U.value="",F.value=1,L.value=!0},_=async c=>{await de(c)&&(d.value="services",await C(c.customer_id))},V=async c=>{await me(c)&&(d.value="services",c.customer_id&&await C(c.customer_id))},C=async c=>{var a,y;if(c)try{const M=await api.get(`/customers/${c}`),t=((a=M.data)==null?void 0:a.data)||M.data;t!=null&&t.notes&&(i.clearCustomerAlerts(),i.addCustomerAlert(t.notes));const w=await api.get(`/customers/${c}/last-visit`);(y=w.data)!=null&&y.data&&i.setLastVisitDetails(w.data.data)}catch(M){console.error("Error fetching receptionist data:",M)}},W=_,oe=()=>{const c=i.staff.find(M=>Number(M.id)===Number(U.value)),a=d.value==="services"?"service":d.value==="products"?"product":"membership",y={type:a,service_id:a==="service"?$.value.id:null,product_id:a==="product"?$.value.id:null,membership_id:a==="membership"?$.value.id:null,name:$.value.name_ar||$.value.name,quantity:F.value,unit_price:parseFloat($.value.price||$.value.selling_price||0),staff_id:U.value||null,staff_name:c?c.name:""};i.addToCart(y),L.value=!1,h.success(n("pos.addedToCart")||"تمت الإضافة للسلة")},Y=(c,a)=>{const y=i.cart[c];y.quantity+a>0&&(y.quantity+=a)},le=async()=>{if(i.selectedCustomerId){const c=i.customers.find(a=>Number(a.id)===Number(i.selectedCustomerId));c&&(await Q(c),await C(c.id))}},ne=async()=>{const c="pos_"+Date.now(),a=await ee(c);a&&(E.value=a,se.value=!0)},ie=c=>{j.push(`/customers/${c}`)},G=async c=>{var a;try{(a=(await api.post(`/loyalty/apple-wallet/send/${c}`)).data)!=null&&a.success&&h.success(n("loyalty.passSent")||"تم إرسال بطاقة المحفظة بنجاح")}catch(y){console.error("Error sending wallet pass:",y),h.error(n("loyalty.errorSendingPass")||"خطأ في إرسال بطاقة المحفظة")}},re=async()=>{var c;ae.value=!0;try{const a=await api.post("/customers",R.value);(c=a.data)!=null&&c.success&&(h.success(n("customers.added")||"تمت إضافة العميلة بنجاح"),await i.fetchAllData(),Q(a.data.data),S.value=!1,R.value={name:"",phone:"",email:""})}catch(a){console.error("Error adding customer:",a),h.error(n("customers.errorAdding")||"خطأ في إضافة العميلة")}finally{ae.value=!1}},ve=async()=>{await he()},xe=async c=>{await ge(c.id)},Se=async c=>{await p(c.id),Q({id:c.customer_id,name:c.customer_name,type:"queue",ticket_number:c.ticket_number})},Ae=async c=>{var a;if(c.status!=="available"){h.warning(n("workerCalls.staffNotAvailable")||"الموظفة مشغولة حالياً");return}try{(a=(await api.post("/worker-calls",{staff_id:c.id,customer_id:i.selectedCustomerId,reason:"POS Service Request"})).data)!=null&&a.success&&(h.success(n("workerCalls.callSent")||"تم إرسال النداء للموظفة: "+c.name),await i.fetchAllData())}catch(y){console.error("Error calling staff:",y),h.error(n("workerCalls.errorCalling")||"خطأ في إرسال النداء")}},Pe=async()=>{var c;if(confirm(n("pos.confirmCloseSession")||"هل أنت متأكد من إغلاق الجلسة؟"))try{(c=(await api.post(`/pos/session/${i.openSession.id}/close`)).data)!=null&&c.success&&(h.success(n("pos.sessionClosed")||"تم إغلاق الجلسة بنجاح"),X.value=!1,await i.fetchAllData())}catch(a){console.error("Error closing session:",a),h.error(n("pos.errorClosingSession"))}};return Ue(()=>{i.fetchAllData()}),(c,a)=>{const y=Ee("router-link"),M=Ee("CFormSwitch");return u(),m("div",ct,[s("div",ut,[s("div",dt,[s("h4",mt,o(e(n)("pos.title")),1),e(i).openSession?(u(),I(e(Z),{key:0,color:"success",shape:"rounded-pill"},{default:r(()=>[v(o(e(n)("pos.sessionOpen")||"الجلسة مفتوحة")+" (#"+o(e(i).openSession.id)+") ",1)]),_:1})):k("",!0)]),s("div",vt,[l(e(P),{color:"info",variant:"ghost",onClick:a[0]||(a[0]=t=>te.value=!0)},{default:r(()=>[l(e(b),{icon:"cil-chart-line"})]),_:1}),l(Ye),l(e(P),{color:"secondary",variant:"ghost",onClick:a[1]||(a[1]=t=>X.value=!0)},{default:r(()=>[l(e(b),{icon:"cil-settings"})]),_:1})])]),l(tt,{session:e(i).openSession,activeCustomersCount:e(i).activeCustomers.length},null,8,["session","activeCustomersCount"]),s("div",pt,[s("div",ft,[l(je,{class:"operations-card h-100"},{header:r(()=>[s("div",_t,[s("span",yt,o(e(n)("pos.operations")||"العمليات"),1),l(e(P),{size:"sm",color:"primary",variant:"ghost",onClick:e(i).fetchAllData},{default:r(()=>[l(e(b),{icon:"cil-reload"})]),_:1},8,["onClick"])])]),default:r(()=>[l(e(Me),{variant:"pills",class:"flex-column operations-nav"},{default:r(()=>[s("div",ht,[s("div",gt,[s("span",null,[l(e(b),{icon:"cil-room",class:"me-2 text-primary"}),v(" "+o(e(n)("pos.arrivedToday")||"وصلوا الآن"),1)]),l(e(Z),{color:"primary",shape:"rounded-pill"},{default:r(()=>[v(o(e(i).bookings.filter(t=>t.status==="confirmed").length),1)]),_:1})]),s("div",bt,[e(i).bookings.filter(t=>t.status==="confirmed").length===0?(u(),m("div",Ct,o(e(n)("pos.noArrivals")||"لا يوجد حجوزات منتظرة"),1)):(u(),m("div",kt,[(u(!0),m(T,null,D(e(i).bookings.filter(t=>t.status==="confirmed").slice(0,3),t=>{var w;return u(),m("div",{key:t.id,class:"arrival-quick-card d-flex justify-content-between align-items-center p-2 bg-secondary rounded-3 shadow-sm border-start border-4 border-success",style:{cursor:"pointer"},onClick:H=>e(W)(t)},[s("div",xt,[s("div",St,o((w=t.customer_name)==null?void 0:w.charAt(0)),1),s("div",At,[s("div",Pt,o(t.customer_name),1),s("div",qt,o(t.booking_time),1)])]),l(e(P),{color:"success",size:"sm",variant:"ghost",class:"p-1"},{default:r(()=>[l(e(b),{icon:"cil-check-circle"})]),_:1})],8,wt)}),128))]))])]),s("div",$t,[s("div",Vt,[s("span",null,[l(e(b),{icon:"cil-people",class:"me-2"}),v(" "+o(e(n)("pos.activeCustomers")),1)]),l(e(P),{size:"sm",color:"success",variant:"ghost",onClick:a[2]||(a[2]=t=>S.value=!0)},{default:r(()=>[l(e(b),{icon:"cil-plus"})]),_:1})]),s("div",It,[(u(!0),m(T,null,D(e(i).activeCustomers,t=>{var w;return u(),m("div",{key:t.id,class:qe(["operation-item",{selected:Number(e(i).selectedCustomerId)===Number(t.id)}]),onClick:H=>e(Q)(t)},[s("div",Tt,o(((w=t.name)==null?void 0:w.charAt(0))||"C"),1),s("div",Dt,[s("div",Mt,o(t.name),1),s("div",jt,[l(e(Z),{color:t.type==="queue"?"info":"primary",size:"sm"},{default:r(()=>[v(o(t.type==="queue"?"#"+t.ticket_number:e(n)("bookings.title")),1)]),_:2},1032,["color"]),s("span",Lt,o(t.current_service||"N/A"),1)])])],10,Nt)}),128)),e(i).activeCustomers.length===0?(u(),m("div",Et,o(e(n)("pos.noActiveCustomers")),1)):k("",!0)])]),s("div",zt,[s("div",Rt,[s("span",null,[l(e(b),{icon:"cil-calendar",class:"me-2"}),v(" "+o(e(n)("bookings.title")),1)]),l(y,{to:"/bookings",class:"text-primary text-decoration-none small"},{default:r(()=>[v(o(e(n)("common.viewAll")),1)]),_:1})]),s("div",Ft,[(u(!0),m(T,null,D(e(i).bookings.slice(0,3),t=>(u(),I(at,{key:t.id,booking:t,onProcess:_,onArrive:_},null,8,["booking"]))),128))])]),s("div",Bt,[s("div",Qt,[s("span",null,[l(e(b),{icon:"cil-list",class:"me-2"}),v(" "+o(e(n)("queue.title")),1)]),l(e(P),{size:"sm",color:"primary",variant:"ghost",onClick:ve},{default:r(()=>[v(o(e(n)("queue.next")),1)]),_:1})]),s("div",Ot,[(u(!0),m(T,null,D(e(i).queueTickets.filter(t=>t.status!=="completed").slice(0,3),t=>(u(),I(ot,{key:t.id,ticket:t,onCall:xe,onServe:Se,onArrive:V},null,8,["ticket"]))),128))])]),l(nt,{staff:e(i).staff,onCall:Ae},null,8,["staff"])]),_:1})]),_:1})]),s("div",Ut,[l(je,{class:"catalog-card h-100"},{header:r(()=>[e(i).selectedCustomer&&e(i).customerAlerts.length>0?(u(),m("div",Wt,[l(e(b),{icon:"cil-warning"}),s("div",Gt,[s("div",Ht,o(e(i).customerAlerts[0]),1)]),l(e(P),{color:"light",size:"sm",variant:"ghost",class:"py-0 px-1",onClick:a[3]||(a[3]=t=>e(i).customerAlerts=[])},{default:r(()=>[...a[33]||(a[33]=[v("X",-1)])]),_:1})])):k("",!0),s("div",Kt,[l(e(Ge),null,{default:r(()=>[l(e(He),null,{default:r(()=>[l(e(b),{icon:"cil-magnifying-glass"})]),_:1}),l(e(J),{modelValue:x.value,"onUpdate:modelValue":a[4]||(a[4]=t=>x.value=t),placeholder:e(n)("common.search")+"...",class:"border-start-0"},null,8,["modelValue","placeholder"])]),_:1}),l(e(Me),{variant:"pills",class:"catalog-tabs mt-3"},{default:r(()=>[l(e(ce),null,{default:r(()=>[l(e(ue),{active:d.value==="services",onClick:a[5]||(a[5]=t=>d.value="services")},{default:r(()=>[l(e(b),{icon:"cil-spreadsheet",class:"me-2"}),v(o(e(n)("pos.services")),1)]),_:1},8,["active"])]),_:1}),l(e(ce),null,{default:r(()=>[l(e(ue),{active:d.value==="products",onClick:a[6]||(a[6]=t=>d.value="products")},{default:r(()=>[l(e(b),{icon:"cil-basket",class:"me-2"}),v(o(e(n)("pos.products")),1)]),_:1},8,["active"])]),_:1}),l(e(ce),null,{default:r(()=>[l(e(ue),{active:d.value==="memberships",onClick:a[7]||(a[7]=t=>d.value="memberships")},{default:r(()=>[l(e(b),{icon:"cil-gem",class:"me-2"}),v(o(e(n)("memberships.title")||"العضويات"),1)]),_:1},8,["active"])]),_:1}),l(e(ce),null,{default:r(()=>[l(e(ue),{active:d.value==="favorites",onClick:a[8]||(a[8]=t=>d.value="favorites")},{default:r(()=>[l(e(b),{icon:"cil-star",class:"me-2"}),v(o(e(n)("common.favorites")||"المفضلة"),1)]),_:1},8,["active"])]),_:1})]),_:1})])]),default:r(()=>[e(i).cart.length>0&&d.value==="services"?(u(),m("div",Xt,[s("div",Yt,[l(e(b),{icon:"cil-lightbulb",class:"me-1"}),v(" "+o(e(n)("pos.smartUpsellTitle")||"هل فكرتِ في هذا؟"),1)]),s("div",Zt,[(u(!0),m(T,null,D(Te.value,t=>(u(),I(e(Z),{key:t.id,color:"info",shape:"rounded-pill",variant:"outline",class:"upsell-badge",style:{cursor:"pointer"},onClick:w=>be(t)},{default:r(()=>[v(" + "+o(t.name_ar||t.name),1)]),_:2},1032,["onClick"]))),128))])])):k("",!0),s("div",Jt,[e(i).loading.products||e(i).loading.services?(u(),I(et,{key:0})):(u(),m("div",es,[(u(!0),m(T,null,D(we.value,t=>(u(),m("div",{key:t.id,class:qe(["catalog-item-card",{"out-of-stock":d.value==="products"&&(t.stock_quantity||0)<=0}]),onClick:w=>be(t)},[t.category?(u(),m("div",ss,o(t.category),1)):k("",!0),s("div",as,o(t.name_ar||t.name),1),s("div",os,o(e(A)(t.price||t.selling_price||0)),1),d.value==="products"?(u(),m("div",ls,o(e(n)("products.stock"))+": "+o(t.stock_quantity||0),1)):k("",!0),s("div",ns,[l(e(b),{icon:"cil-plus"})])],10,ts))),128))])),we.value.length?k("",!0):(u(),I($e,{key:2,title:e(n)("common.noResults"),icon:"cil-search"},null,8,["title"]))])]),_:1})]),s("div",is,[l(je,{class:"checkout-card h-100"},{header:r(()=>[s("div",rs,o(e(n)("pos.cart")),1)]),default:r(()=>[s("div",cs,[e(i).selectedCustomer?(u(),I(st,{key:0,customer:e(i).selectedCustomer,"customer-alerts":e(i).customerAlerts,"last-visit":e(i).lastVisitDetails,onViewProfile:ie,onViewHistory:a[9]||(a[9]=t=>O.value=!0),onSendWalletPass:G},null,8,["customer","customer-alerts","last-visit"])):(u(),m("div",us,[l(e(ze),{modelValue:e(i).selectedCustomerId,"onUpdate:modelValue":a[10]||(a[10]=t=>e(i).selectedCustomerId=t),onChange:le},{default:r(()=>[s("option",ds,o(e(n)("pos.walkInCustomer")),1),(u(!0),m(T,null,D(e(i).customers,t=>(u(),m("option",{key:t.id,value:t.id},o(t.name)+" - "+o(t.phone),9,ms))),128))]),_:1},8,["modelValue"])])),e(i).selectedCustomer&&e(i).lastServices.length>0?(u(),m("div",vs,[s("div",ps,[l(e(b),{icon:"cil-history",class:"me-2"}),v(" "+o(e(n)("pos.lastVisited")||"آخر خدمات"),1)]),s("div",fs,[(u(!0),m(T,null,D(e(i).lastServices,t=>(u(),I(e(Z),{key:t.id,color:"secondary",shape:"rounded-pill",class:"fw-normal",style:{cursor:"pointer"},onClick:w=>be(t)},{default:r(()=>[v(o(t.name),1)]),_:2},1032,["onClick"]))),128))])])):k("",!0)]),s("div",_s,[e(i).cart.length===0?(u(),m("div",ys,[l(e(b),{icon:"cil-cart",class:"mb-2",size:"xl"}),s("div",null,o(e(n)("pos.emptyCartDesc")),1)])):(u(),m("div",hs,[(u(!0),m(T,null,D(e(i).cart,(t,w)=>(u(),m("div",{key:w,class:"cart-item-wrapper"},[s("div",gs,[s("div",bs,[s("div",Cs,o(t.name),1),t.staff_name?(u(),m("div",ks,[l(e(b),{icon:"cil-user",class:"me-1"}),v(o(t.staff_name),1)])):k("",!0)]),s("div",ws,[s("div",xs,[s("button",{onClick:H=>Y(w,-1)},"-",8,Ss),s("span",null,o(t.quantity),1),s("button",{onClick:H=>Y(w,1)},"+",8,As)]),s("div",Ps,o(e(A)(t.unit_price*t.quantity)),1),l(e(P),{size:"sm",color:"danger",variant:"ghost",onClick:H=>e(i).removeFromCart(w)},{default:r(()=>[l(e(b),{icon:"cil-trash"})]),_:1},8,["onClick"])])]),s("div",qs,[l(e(J),{size:"sm",modelValue:t.note,"onUpdate:modelValue":H=>t.note=H,placeholder:e(n)("pos.itemNote")||"ملاحظة خاصة بالخدمة...",class:"border-0 bg-transparent py-0 px-2 tiny"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])]))),128))]))]),s("div",$s,[s("div",Vs,[s("div",Is,[s("span",null,o(e(n)("pos.subtotal")),1),s("span",null,o(e(A)(e(i).subtotal)),1)]),e(i).prepaidAmount>0?(u(),m("div",Ns,[s("span",null,o(e(n)("pos.prepaid")),1),s("span",Ts,"-"+o(e(A)(e(i).prepaidAmount)),1)])):k("",!0),s("div",Ds,[s("span",null,o(e(n)("pos.discount")),1),l(e(J),{modelValue:e(i).discount,"onUpdate:modelValue":a[11]||(a[11]=t=>e(i).discount=t),modelModifiers:{number:!0},type:"number",step:"0.5",size:"sm",class:"summary-input"},null,8,["modelValue"])]),s("div",Ms,[s("span",null,o(e(n)("pos.total")),1),s("span",js,o(e(A)(e(i).total)),1)])]),e(i).selectedCustomer&&e(i).potentialPoints>0?(u(),m("div",Ls,[l(e(b),{icon:"cil-star",class:"text-warning me-1"}),v(" "+o(e(n)("pos.pointsEarnedPreview",{points:e(i).potentialPoints})||`ستكسبين ${e(i).potentialPoints} نقطة من هذا الطلب`),1)])):k("",!0),s("div",Es,[s("div",zs,[s("div",Rs,o(e(n)("pos.paymentMethod")),1),l(e(P),{color:"primary",variant:"ghost",size:"sm",onClick:a[12]||(a[12]=t=>q.value=!q.value)},{default:r(()=>[v(o(q.value?e(n)("pos.singlePayment"):e(n)("pos.splitPayment")||"دفع متعدد"),1)]),_:1})]),q.value?(u(),m("div",Fs,[(u(!0),m(T,null,D(e(i).splitPayments,t=>(u(),m("div",{key:t.method,class:"mb-2 d-flex align-items-center gap-2"},[l(e(b),{icon:Ve(t.method),class:qe(Ie(t.method))},null,8,["icon","class"]),l(e(J),{value:t.amount,onInput:w=>e(i).setSplitPaymentAmount(t.method,w.target.value),type:"number",size:"sm",placeholder:e(n)(`pos.payment_${t.method}`)||t.method},null,8,["value","onInput","placeholder"])]))),128)),s("div",{class:qe(["remaining-balance tiny text-center fw-bold",Ce.value===0?"text-success":"text-danger"])},o(e(n)("pos.remaining")||"المتبقي")+": "+o(e(A)(Ce.value)),3)])):(u(),I(lt,{key:1,modelValue:e(i).paymentMethod,"onUpdate:modelValue":a[13]||(a[13]=t=>e(i).paymentMethod=t)},null,8,["modelValue"]))]),s("div",Bs,[l(e(P),{color:"primary",class:"w-100 checkout-btn py-3",disabled:!e(i).cart.length||e(B),onClick:ne},{default:r(()=>[e(B)?(u(),I(e(b),{key:0,icon:"cil-reload",class:"spinning me-2"})):(u(),I(e(b),{key:1,icon:"cil-check-circle",class:"me-2"})),v(" "+o(e(B)?e(n)("pos.processing"):e(n)("pos.processOrder")),1)]),_:1},8,["disabled"]),l(e(P),{color:"secondary",variant:"ghost",class:"w-100 mt-2",onClick:e(i).clearCart},{default:r(()=>[v(o(e(n)("pos.clearCart")),1)]),_:1},8,["onClick"])])])]),_:1})])]),l(e(pe),{visible:te.value,onClose:a[14]||(a[14]=t=>te.value=!1),size:"lg",alignment:"center"},{default:r(()=>[l(e(fe),null,{default:r(()=>[l(e(_e),null,{default:r(()=>[v(o(e(n)("analytics.title")||"التحليلات الحية"),1)]),_:1})]),_:1}),l(e(ye),null,{default:r(()=>[l(it,{session:e(i).openSession},null,8,["session"])]),_:1})]),_:1},8,["visible"]),l(e(pe),{visible:O.value,onClose:a[18]||(a[18]=t=>O.value=!1),size:"xl",alignment:"center"},{default:r(()=>[l(e(fe),null,{default:r(()=>[l(e(_e),null,{default:r(()=>{var t;return[v(o(e(n)("common.history")||"السجل")+" - "+o((t=e(i).selectedCustomer)==null?void 0:t.name),1)]}),_:1})]),_:1}),l(e(ye),null,{default:r(()=>[l(e(Me),{variant:"tabs",class:"mb-3"},{default:r(()=>[l(e(ce),null,{default:r(()=>[l(e(ue),{active:z.value==="orders",onClick:a[15]||(a[15]=t=>z.value="orders")},{default:r(()=>[v(o(e(n)("orders.title")),1)]),_:1},8,["active"])]),_:1}),l(e(ce),null,{default:r(()=>[l(e(ue),{active:z.value==="invoices",onClick:a[16]||(a[16]=t=>z.value="invoices")},{default:r(()=>[v(o(e(n)("invoices.title")),1)]),_:1},8,["active"])]),_:1}),l(e(ce),null,{default:r(()=>[l(e(ue),{active:z.value==="payments",onClick:a[17]||(a[17]=t=>z.value="payments")},{default:r(()=>[v(o(e(n)("payments.title")),1)]),_:1},8,["active"])]),_:1})]),_:1}),z.value==="orders"?(u(),m("div",Qs,[(u(!0),m(T,null,D(e(i).orders,t=>(u(),m("div",{key:t.id,class:"history-item border rounded p-3 mb-2"},[s("div",Os,[s("span",Us,"#"+o(t.order_number),1),s("span",Ws,o(e(A)(t.total)),1)]),s("div",Gs,[s("span",Hs,o(t.created_at),1),l(e(Z),{color:t.status==="completed"?"success":"warning"},{default:r(()=>[v(o(t.status),1)]),_:2},1032,["color"])])]))),128)),e(i).orders.length?k("",!0):(u(),I($e,{key:0,title:e(n)("orders.noOrders"),icon:"cil-cart"},null,8,["title"]))])):k("",!0),z.value==="invoices"?(u(),m("div",Ks,[(u(!0),m(T,null,D(e(i).invoices,t=>(u(),m("div",{key:t.id,class:"history-item border rounded p-3 mb-2"},[s("div",Xs,[s("span",Ys,"#"+o(t.invoice_number),1),s("span",Zs,o(e(A)(t.total_amount)),1)]),s("div",Js,[s("span",ea,o(t.created_at),1),l(e(Z),{color:t.status==="paid"?"success":"danger"},{default:r(()=>[v(o(t.status),1)]),_:2},1032,["color"])])]))),128)),e(i).invoices.length?k("",!0):(u(),I($e,{key:0,title:e(n)("invoices.noInvoices"),icon:"cil-file"},null,8,["title"]))])):k("",!0),z.value==="payments"?(u(),m("div",ta,[(u(!0),m(T,null,D(e(i).payments,t=>(u(),m("div",{key:t.id,class:"history-item border rounded p-3 mb-2"},[s("div",sa,[s("span",aa,o(t.payment_method),1),s("span",oa,o(e(A)(t.amount)),1)]),s("div",la,[s("span",na,o(t.created_at),1),l(e(Z),{color:"info"},{default:r(()=>[v("#"+o(t.id),1)]),_:2},1024)])]))),128)),e(i).payments.length?k("",!0):(u(),I($e,{key:0,title:e(n)("payments.noPayments"),icon:"cil-money"},null,8,["title"]))])):k("",!0)]),_:1})]),_:1},8,["visible"]),l(e(pe),{visible:L.value,onClose:a[24]||(a[24]=t=>L.value=!1),size:"lg",alignment:"center"},{default:r(()=>[l(e(fe),null,{default:r(()=>[l(e(_e),null,{default:r(()=>[v(o(d.value==="services"?e(n)("pos.addService"):e(n)("pos.addProduct")),1)]),_:1})]),_:1}),$.value?(u(),I(e(ye),{key:0},{default:r(()=>[l(e(Ke),null,{default:r(()=>[l(e(Re),{md:"6"},{default:r(()=>[s("div",ia,[s("div",ra,o($.value.name_ar||$.value.name),1),s("div",ca,o(e(A)($.value.price||$.value.selling_price||0)),1),a[36]||(a[36]=s("hr",null,null,-1)),s("div",ua,[s("label",da,o(e(n)("pos.staff")),1),l(e(ze),{modelValue:U.value,"onUpdate:modelValue":a[19]||(a[19]=t=>U.value=t)},{default:r(()=>[s("option",ma,o(e(n)("pos.selectStaff")),1),(u(!0),m(T,null,D(e(i).staff,t=>(u(),m("option",{key:t.id,value:t.id},o(t.name)+" ("+o(c.getStaffCurrentLoad(t.id))+" "+o(e(n)("pos.activeCustomers"))+") "+o(Number(t.id)===Number(Ne.value)?" ✨ "+(e(n)("pos.bestStaffMatch")||"الأكثر توافراً"):""),9,va))),128))]),_:1},8,["modelValue"]),ke.value>0?(u(),m("div",pa,[l(e(b),{icon:"cil-money",class:"me-1"}),v(" "+o(e(n)("commissions.estimated")||"العمولة المقدرة")+": "+o(e(A)(ke.value)),1)])):k("",!0)]),s("div",fa,[s("label",_a,o(e(n)("pos.quantity")),1),s("div",ya,[l(e(P),{color:"secondary",variant:"outline",onClick:a[20]||(a[20]=t=>F.value>1?F.value--:null)},{default:r(()=>[...a[34]||(a[34]=[v("-",-1)])]),_:1}),l(e(J),{modelValue:F.value,"onUpdate:modelValue":a[21]||(a[21]=t=>F.value=t),modelModifiers:{number:!0},type:"number",min:"1",class:"text-center"},null,8,["modelValue"]),l(e(P),{color:"secondary",variant:"outline",onClick:a[22]||(a[22]=t=>F.value++)},{default:r(()=>[...a[35]||(a[35]=[v("+",-1)])]),_:1})])])])]),_:1}),l(e(Re),{md:"6"},{default:r(()=>[s("div",ha,[s("div",ga,o(e(n)("loyalty.offers")||"العروض المتاحة"),1),s("div",ba,o(e(n)("loyalty.noOffers")||"لا توجد عروض لهذه الخدمة حالياً"),1)])]),_:1})]),_:1})]),_:1})):k("",!0),l(e(Fe),null,{default:r(()=>[l(e(P),{color:"secondary",variant:"ghost",onClick:a[23]||(a[23]=t=>L.value=!1)},{default:r(()=>[v(o(e(n)("common.cancel")),1)]),_:1}),l(e(P),{color:"primary",onClick:oe},{default:r(()=>[v(o(e(n)("pos.addToCart")),1)]),_:1})]),_:1})]),_:1},8,["visible"]),l(e(pe),{visible:S.value,onClose:a[28]||(a[28]=t=>S.value=!1),alignment:"center"},{default:r(()=>[l(e(fe),null,{default:r(()=>[l(e(_e),null,{default:r(()=>[v(o(e(n)("customers.add")||"إضافة عميلة جديدة"),1)]),_:1})]),_:1}),l(e(ye),null,{default:r(()=>[s("form",{onSubmit:Xe(re,["prevent"])},[s("div",Ca,[s("label",ka,o(e(n)("customers.name")),1),l(e(J),{modelValue:R.value.name,"onUpdate:modelValue":a[25]||(a[25]=t=>R.value.name=t),required:""},null,8,["modelValue"])]),s("div",wa,[s("label",xa,o(e(n)("customers.phone")),1),l(e(J),{modelValue:R.value.phone,"onUpdate:modelValue":a[26]||(a[26]=t=>R.value.phone=t),required:""},null,8,["modelValue"])]),s("div",Sa,[s("label",Aa,o(e(n)("customers.email")),1),l(e(J),{modelValue:R.value.email,"onUpdate:modelValue":a[27]||(a[27]=t=>R.value.email=t),type:"email"},null,8,["modelValue"])]),l(e(P),{type:"submit",color:"primary",class:"w-100",disabled:ae.value},{default:r(()=>[ae.value?(u(),I(e(b),{key:0,icon:"cil-reload",class:"spinning me-2"})):k("",!0),v(" "+o(e(n)("common.save")),1)]),_:1},8,["disabled"])],32)]),_:1})]),_:1},8,["visible"]),l(e(pe),{visible:se.value,onClose:a[31]||(a[31]=t=>se.value=!1),size:"lg",alignment:"center"},{default:r(()=>[l(e(fe),null,{default:r(()=>[l(e(_e),null,{default:r(()=>[v(o(e(n)("pos.invoicePreview")||"معاينة الفاتورة"),1)]),_:1})]),_:1}),E.value?(u(),I(e(ye),{key:0,class:"p-0"},{default:r(()=>[s("div",Pa,[s("div",qa,[a[37]||(a[37]=s("h3",{class:"fw-bold"},"SALON ASMAA",-1)),s("div",null,o(e(n)("pos.receipt"))+" #"+o(E.value.order_number),1),s("div",$a,o(new Date().toLocaleString()),1)]),a[38]||(a[38]=s("hr",null,null,-1)),s("div",Va,[(u(!0),m(T,null,D(E.value.items,t=>(u(),m("div",{key:t.id,class:"d-flex justify-content-between mb-2"},[s("span",null,o(t.name)+" x "+o(t.quantity),1),s("span",null,o(e(A)(t.total)),1)]))),128))]),a[39]||(a[39]=s("hr",null,null,-1)),s("div",Ia,[s("div",Na,[s("span",null,o(e(n)("pos.subtotal")),1),s("span",null,o(e(A)(E.value.subtotal)),1)]),E.value.discount>0?(u(),m("div",Ta,[s("span",null,o(e(n)("pos.discount")),1),s("span",null,"-"+o(e(A)(E.value.discount)),1)])):k("",!0),s("div",Da,[s("span",null,o(e(n)("pos.total")),1),s("span",null,o(e(A)(E.value.total)),1)])]),s("div",Ma,[s("p",null,o(e(n)("pos.thankYou")||"شكراً لزيارتكم"),1)])])]),_:1})):k("",!0),l(e(Fe),null,{default:r(()=>[l(e(P),{color:"secondary",onClick:a[29]||(a[29]=t=>se.value=!1)},{default:r(()=>[v(o(e(n)("common.close")),1)]),_:1}),l(e(P),{color:"primary",onClick:a[30]||(a[30]=t=>c.window.print())},{default:r(()=>[l(e(b),{icon:"cil-print",class:"me-2"}),v(" "+o(e(n)("common.print")),1)]),_:1})]),_:1})]),_:1},8,["visible"]),l(e(pe),{visible:X.value,onClose:a[32]||(a[32]=t=>X.value=!1),alignment:"center"},{default:r(()=>[l(e(fe),null,{default:r(()=>[l(e(_e),null,{default:r(()=>[v(o(e(n)("settings.title")||"الإعدادات السريعة"),1)]),_:1})]),_:1}),l(e(ye),null,{default:r(()=>[s("div",ja,[s("div",La,[s("div",null,[s("div",Ea,o(e(n)("pos.autoPrint")||"طباعة تلقائية"),1),s("div",za,o(e(n)("pos.autoPrintDesc")||"طباعة الفاتورة فور إتمام الطلب"),1)]),l(M)]),s("div",Ra,[s("div",null,[s("div",Fa,o(e(n)("pos.soundNotifications")||"تنبيهات صوتية"),1),s("div",Ba,o(e(n)("pos.soundNotificationsDesc")||"تفعيل الصوت عند استدعاء الطابور"),1)]),l(M,{checked:!0})]),a[40]||(a[40]=s("hr",null,null,-1)),l(e(P),{color:"danger",variant:"outline",class:"w-100",onClick:Pe},{default:r(()=>[l(e(b),{icon:"cil-lock-locked",class:"me-2"}),v(" "+o(e(n)("pos.closeSession")||"إغلاق الجلسة"),1)]),_:1})])]),_:1})]),_:1},8,["visible"])])}}},io=Je(Qa,[["__scopeId","data-v-79c162c2"]]);export{io as default};
