import{f,e as re,k as de,m as ue,j as ve,c as _,o as u,d as t,b as a,w as c,u as e,Z as G,ao as _e,x as b,C as n,P as m,t as i,_ as R,$ as V,a2 as me,a3 as pe,a1 as x,a0 as O,s as z,a4 as ge,F as Q,g as Y,a as w,Y as E,n as fe,a6 as he,a7 as Z,a8 as J,a9 as X,h as be,aa as ee,ab as ye,ac as Ce,a5 as ke}from"../chunk-vendor-vue-DkCSGS5r.js";import{u as we,a as F}from"../chunk-component-NotificationsBell-CdT4gVQ0.js";import{P as Ve}from"../chunk-component-PageHeader-2UM0PeLN.js";import{S as U}from"../chunk-component-StatCard-CQbqZfDa.js";import{_ as xe,C as te}from"../chunk-component-Card-B6TBnHC7.js";import{E as Se}from"../chunk-component-EmptyState-C_n04Mxq.js";import{L as $e}from"../chunk-component-LoadingSpinner-BDznbj6f.js";import{H as Me}from"../chunk-component-HelpSection-DCIZko8t.js";import"../chunk-vendor-6xaPOP3o.js";import"../chunk-vendor-charts-C66rl4lP.js";import"../chunk-vendor-pinia-BW6wRy0H.js";import"../chunk-vendor-axios-B9ygI19o.js";const Ee={class:"services-page"},Fe={class:"stats-grid"},De={value:""},Be={value:""},Ue={value:"1"},Te={value:"0"},Ne={key:2,class:"table-wrapper"},Pe={class:"table-header-row"},Ie={class:"th-name"},qe={class:"th-price"},He={class:"th-duration"},Ke={class:"th-category"},ze={class:"th-status"},Ae={class:"th-actions"},We={class:"td-id"},Le={class:"service-id-badge"},je={class:"td-name"},Ge={class:"service-name-cell"},Re={class:"service-name"},Oe={key:0,class:"service-description"},Qe={class:"td-price"},Ye={class:"unified-amount price-amount"},Ze={class:"td-duration"},Je={class:"td-category"},Xe={key:1,class:"text-muted no-data"},et={class:"td-status"},tt={class:"td-actions"},at={class:"actions-group"},st=["onClick","title"],ot=["onClick","title"],lt=["onClick","title"],it={key:3,class:"services-cards-grid"},ct={class:"service-card-header"},nt={class:"service-card-title"},rt={class:"service-card-actions"},dt=["onClick","title"],ut=["onClick","title"],vt=["onClick","title"],_t={class:"service-card-body"},mt={key:0,class:"service-card-description"},pt={class:"service-card-info"},gt={class:"info-item"},ft={class:"info-item"},ht={class:"text-success"},bt={class:"info-item"},yt={class:"service-card-footer"},Ct={key:0,class:"d-flex justify-content-between align-items-center"},kt={class:"text-muted"},wt={key:0,class:"service-details-view"},Vt={class:"service-header"},xt={class:"service-avatar"},St={class:"service-header-info"},$t={class:"service-name-large"},Mt={class:"service-stats-grid"},Et={class:"stat-item"},Ft={class:"stat-content"},Dt={class:"stat-label"},Bt={class:"stat-value"},Ut={class:"stat-item"},Tt={class:"stat-content"},Nt={class:"stat-label"},Pt={class:"stat-value"},It={class:"stat-item"},qt={class:"stat-content"},Ht={class:"stat-value"},Kt={class:"service-info-grid"},zt={key:0,class:"info-row"},At={class:"info-label"},Wt={class:"info-value"},Lt={key:1,class:"info-row"},jt={class:"info-label"},Gt={class:"info-value"},Rt={key:2,class:"info-row"},Ot={class:"info-label"},Qt={class:"info-value"},Yt={key:3,class:"info-row"},Zt={class:"info-label"},Jt={class:"info-value"},Xt={key:4,class:"info-row"},ea={class:"info-label"},ta={class:"info-value"},aa={key:1,class:"text-center p-4"},sa={class:"mt-2"},oa={__name:"Index",setup(la){const{t:s}=we(),A=ue(),ae=ve(),g=f([]),T=f(!1),S=f(!1),D=f(!1),N=f(!1),d=f(null),B=f(null),$=f("table"),y=f({search:"",category:"",is_active:""}),p=f({current_page:1,per_page:20,total:0,total_pages:0}),v=f({name:"",name_ar:"",description:"",price:0,duration:0,category:"",is_active:!0}),M=re(()=>{const r=g.value.length,l=g.value.filter(k=>k.is_active).length,o=g.value.length>0?g.value.reduce((k,K)=>k+(parseFloat(K.price)||0),0)/g.value.length:0,h=g.value.reduce((k,K)=>k+(K.total_bookings||Math.floor(Math.random()*50)+10),0);return{total:r,active:l,averagePrice:o,totalBookings:h}}),P=r=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:3}).format(r||0),se=r=>{if(!r&&r!==0)return"0 KWD";const l=parseFloat(r);return l>=1e3?`${(l/1e3).toFixed(1)}K KWD`:`${l.toFixed(0)} KWD`},C=async()=>{var r;T.value=!0;try{const l={page:p.value.current_page,per_page:p.value.per_page,...y.value};Object.keys(l).forEach(k=>{l[k]===""&&delete l[k]});const o=await F.get("/services",{params:l}),h=((r=o.data)==null?void 0:r.data)||o.data||{};g.value=h.items||[],p.value=h.pagination||p.value}catch(l){console.error("Error loading services:",l),g.value=[],p.value={current_page:1,per_page:20,total:0,total_pages:0}}finally{T.value=!1}},oe=r=>{p.value.current_page=r,C()};let W;const le=()=>{clearTimeout(W),W=setTimeout(()=>{p.value.current_page=1,C()},500)},ie=()=>{y.value={search:"",category:"",is_active:""},p.value.current_page=1,C()},ce=()=>{console.log("Exporting services data..."),alert(s("common.export")+" - "+s("services.title"))},I=()=>{S.value=!1,D.value=!1,B.value=null,v.value={name:"",name_ar:"",description:"",price:0,duration:0,category:"",is_active:!0}},q=r=>{B.value=r,v.value={...r},D.value=!0},ne=async()=>{try{B.value?(await F.put(`/services/${B.value.id}`,v.value),alert("Updated successfully")):(await F.post("/services",v.value),alert("Created successfully")),I(),C()}catch(r){console.error("Error saving service:",r),alert(s("services.saveError")||"Error saving service")}},L=async r=>{var l;d.value=r,N.value=!0;try{const o=await F.get(`/services/${r.id}`);o.data&&(d.value=((l=o.data)==null?void 0:l.data)||o.data||r)}catch(o){console.error("Error loading service details:",o)}},H=()=>{N.value=!1,d.value=null},j=async r=>{if(confirm(`${s("services.deleteConfirm")} ${r.name_ar||r.name}?`))try{await F.delete(`/services/${r.id}`),alert("Deleted successfully"),C()}catch(l){console.error("Error deleting service:",l),alert(s("services.deleteError")||"Error deleting service")}};return de(()=>{var r;if(C(),((r=A.query)==null?void 0:r.action)==="create"){S.value=!0;const l={...A.query};delete l.action,ae.replace({query:l})}}),(r,l)=>(u(),_("div",Ee,[t(Ve,{title:e(s)("services.title"),subtitle:e(s)("services.title")+" - "+e(s)("dashboard.subtitle")},{icon:c(()=>[t(e(n),{icon:"cil-spreadsheet"})]),actions:c(()=>[t(e(_e),{class:"me-2"},{default:c(()=>[t(e(b),{color:$.value==="table"?"primary":"secondary",variant:"outline",size:"sm",onClick:l[0]||(l[0]=o=>$.value="table"),title:e(s)("common.tableView")},{default:c(()=>[t(e(n),{icon:"cil-list"})]),_:1},8,["color","title"]),t(e(b),{color:$.value==="cards"?"primary":"secondary",variant:"outline",size:"sm",onClick:l[1]||(l[1]=o=>$.value="cards"),title:e(s)("common.cardsView")},{default:c(()=>[t(e(n),{icon:"cil-grid"})]),_:1},8,["color","title"])]),_:1}),t(e(b),{color:"secondary",variant:"outline",onClick:ce,class:"me-2"},{default:c(()=>[t(e(n),{icon:"cil-cloud-download",class:"me-2"}),m(" "+i(e(s)("common.export")),1)]),_:1}),t(e(b),{color:"primary",class:"btn-primary-custom",onClick:l[2]||(l[2]=o=>S.value=!0)},{default:c(()=>[t(e(n),{icon:"cil-plus",class:"me-2"}),m(" "+i(e(s)("services.addNew")),1)]),_:1})]),_:1},8,["title","subtitle"]),a("div",Fe,[t(U,{label:e(s)("services.title"),value:M.value.total||g.value.length,badge:M.value.active+" "+e(s)("status.active"),"badge-variant":"success",color:"gold"},{icon:c(()=>[t(e(n),{icon:"cil-spreadsheet"})]),_:1},8,["label","value","badge"]),t(U,{label:e(s)("status.active"),value:M.value.active,"badge-variant":"success",color:"gold"},{icon:c(()=>[t(e(n),{icon:"cil-check-circle"})]),_:1},8,["label","value"]),t(U,{label:"Average Price",value:se(M.value.averagePrice),"badge-variant":"info",color:"gold"},{icon:c(()=>[t(e(n),{icon:"cil-money"})]),_:1},8,["value"]),t(U,{label:"Total Bookings",value:M.value.totalBookings,"badge-variant":"info",color:"gold"},{icon:c(()=>[t(e(n),{icon:"cil-calendar"})]),_:1},8,["value"])]),t(te,{title:e(s)("common.filter"),icon:"cil-filter",class:"filters-card"},{default:c(()=>[t(e(R),{class:"g-3"},{default:c(()=>[t(e(V),{md:4},{default:c(()=>[t(e(me),{class:"search-input-group"},{default:c(()=>[t(e(pe),{class:"search-icon-wrapper"},{default:c(()=>[t(e(n),{icon:"cil-magnifying-glass"})]),_:1}),t(e(x),{modelValue:y.value.search,"onUpdate:modelValue":l[3]||(l[3]=o=>y.value.search=o),placeholder:e(s)("common.search"),onInput:le,class:"filter-input search-input"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(e(V),{md:3},{default:c(()=>[t(e(O),{modelValue:y.value.category,"onUpdate:modelValue":l[4]||(l[4]=o=>y.value.category=o),onChange:C,class:"filter-select"},{default:c(()=>[a("option",De,i(e(s)("services.allCategories")),1),l[15]||(l[15]=a("option",{value:"Haircut"},"Haircut",-1)),l[16]||(l[16]=a("option",{value:"Coloring"},"Coloring",-1)),l[17]||(l[17]=a("option",{value:"Skincare"},"Skincare",-1)),l[18]||(l[18]=a("option",{value:"Nails"},"Nails",-1)),l[19]||(l[19]=a("option",{value:"Massage"},"Massage",-1))]),_:1},8,["modelValue"])]),_:1}),t(e(V),{md:3},{default:c(()=>[t(e(O),{modelValue:y.value.is_active,"onUpdate:modelValue":l[5]||(l[5]=o=>y.value.is_active=o),onChange:C,class:"filter-select"},{default:c(()=>[a("option",Be,i(e(s)("common.status")),1),a("option",Ue,i(e(s)("status.active")),1),a("option",Te,i(e(s)("status.inactive")),1)]),_:1},8,["modelValue"])]),_:1}),t(e(V),{md:2},{default:c(()=>[t(e(b),{color:"secondary",variant:"outline",onClick:ie,class:"w-100 reset-btn"},{default:c(()=>[t(e(n),{icon:"cil-reload",class:"me-1"}),m(" "+i(e(s)("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"]),t(te,{title:e(s)("services.title"),icon:"cil-list"},{footer:c(()=>[p.value.total_pages>1?(u(),_("div",Ct,[a("div",kt,i(e(s)("common.view"))+" "+i((p.value.current_page-1)*p.value.per_page+1)+" "+i(e(s)("common.to"))+" "+i(Math.min(p.value.current_page*p.value.per_page,p.value.total))+" "+i(e(s)("common.of"))+" "+i(p.value.total),1),t(e(he),{pages:p.value.total_pages,"active-page":p.value.current_page,"onUpdate:activePage":oe},null,8,["pages","active-page"])])):w("",!0)]),default:c(()=>[T.value?(u(),z($e,{key:0,text:e(s)("common.loading")},null,8,["text"])):g.value.length===0?(u(),z(Se,{key:1,title:e(s)("common.noData"),description:e(s)("services.title")+" - "+e(s)("common.noData"),"icon-color":"gray"},{action:c(()=>[t(e(b),{color:"primary",onClick:l[6]||(l[6]=o=>S.value=!0)},{default:c(()=>[m(i(e(s)("services.addNew")),1)]),_:1})]),_:1},8,["title","description"])):$.value==="table"?(u(),_("div",Ne,[t(e(ge),{hover:"",responsive:"",class:"table-modern services-table"},{default:c(()=>[a("thead",null,[a("tr",Pe,[l[20]||(l[20]=a("th",{class:"th-id"},"#",-1)),a("th",Ie,i(e(s)("services.name")),1),a("th",qe,i(e(s)("services.price")),1),a("th",He,i(e(s)("services.duration")),1),a("th",Ke,i(e(s)("services.category")),1),a("th",ze,i(e(s)("common.status")),1),a("th",Ae,i(e(s)("common.actions")),1)])]),a("tbody",null,[(u(!0),_(Q,null,Y(g.value,o=>(u(),_("tr",{key:o.id,class:"table-row service-row"},[a("td",We,[a("span",Le,"#"+i(o.id),1)]),a("td",je,[a("div",Ge,[a("strong",Re,i(o.name_ar||o.name),1),o.description?(u(),_("small",Oe,i(o.description.substring(0,50))+i(o.description.length>50?"...":""),1)):w("",!0)])]),a("td",Qe,[a("strong",Ye,[t(e(n),{icon:"cil-money",class:"money-icon"}),m(" "+i(P(o.price||0)),1)])]),a("td",Ze,[t(e(E),{class:"unified-badge duration-badge"},{default:c(()=>[t(e(n),{icon:"cil-clock",class:"badge-icon"}),a("span",null,i(o.duration||0)+" "+i(e(s)("services.duration")),1)]),_:2},1024)]),a("td",Je,[o.category?(u(),z(e(E),{key:0,class:"unified-badge category-badge"},{default:c(()=>[t(e(n),{icon:"cil-tag",class:"badge-icon"}),a("span",null,i(o.category),1)]),_:2},1024)):(u(),_("span",Xe,"-"))]),a("td",et,[t(e(E),{class:fe(["unified-badge status-badge",o.is_active?"status-active":"status-inactive"])},{default:c(()=>[t(e(n),{icon:o.is_active?"cil-check-circle":"cil-x-circle",class:"badge-icon"},null,8,["icon"]),a("span",null,i(o.is_active?e(s)("status.active"):e(s)("status.inactive")),1)]),_:2},1032,["class"])]),a("td",tt,[a("div",at,[a("button",{class:"action-btn",onClick:h=>L(o),title:e(s)("common.view")},[t(e(n),{icon:"cil-info"})],8,st),a("button",{class:"action-btn",onClick:h=>q(o),title:e(s)("common.edit")},[t(e(n),{icon:"cil-pencil"})],8,ot),a("button",{class:"action-btn",onClick:h=>j(o),title:e(s)("common.delete")},[t(e(n),{icon:"cil-trash"})],8,lt)])])]))),128))])]),_:1})])):(u(),_("div",it,[(u(!0),_(Q,null,Y(g.value,o=>(u(),_("div",{key:o.id,class:"service-card-modern"},[a("div",ct,[a("h4",nt,i(o.name_ar||o.name),1),a("div",rt,[a("button",{class:"action-btn-card",onClick:h=>L(o),title:e(s)("common.view")},[t(e(n),{icon:"cil-info"})],8,dt),a("button",{class:"action-btn-card",onClick:h=>q(o),title:e(s)("common.edit")},[t(e(n),{icon:"cil-pencil"})],8,ut),a("button",{class:"action-btn-card",onClick:h=>j(o),title:e(s)("common.delete")},[t(e(n),{icon:"cil-trash"})],8,vt)])]),a("div",_t,[o.description?(u(),_("p",mt,i(o.description.substring(0,100))+i(o.description.length>100?"...":""),1)):w("",!0),a("div",pt,[a("div",gt,[t(e(n),{icon:"cil-clock",class:"me-1"}),a("span",null,i(o.duration||0)+" "+i(e(s)("services.duration")),1)]),a("div",ft,[t(e(n),{icon:"cil-money",class:"me-1"}),a("strong",ht,i(P(o.price||0)),1)]),a("div",bt,[t(e(n),{icon:"cil-tag",class:"me-1"}),a("span",null,i(o.category||"-"),1)])])]),a("div",yt,[t(e(E),{color:o.is_active?"success":"secondary"},{default:c(()=>[m(i(o.is_active?e(s)("status.active"):e(s)("status.inactive")),1)]),_:2},1032,["color"])])]))),128))]))]),_:1},8,["title"]),t(e(G),{visible:N.value,onClose:H,size:"lg"},{default:c(()=>[t(e(Z),null,{default:c(()=>[t(e(J),null,{default:c(()=>[t(e(n),{icon:"cil-spreadsheet",class:"me-2"}),m(" "+i(e(s)("services.serviceDetails")||"Service Details"),1)]),_:1})]),_:1}),t(e(X),null,{default:c(()=>[d.value?(u(),_("div",wt,[a("div",Vt,[a("div",xt,[t(e(n),{icon:"cil-spreadsheet"})]),a("div",St,[a("h4",$t,i(d.value.name_ar||d.value.name),1),t(e(E),{color:d.value.is_active?"success":"secondary",class:"status-badge-large"},{default:c(()=>[t(e(n),{icon:d.value.is_active?"cil-check-circle":"cil-x-circle",class:"me-1"},null,8,["icon"]),m(" "+i(d.value.is_active?e(s)("status.active"):e(s)("status.inactive")),1)]),_:1},8,["color"])])]),a("div",Mt,[a("div",Et,[t(e(n),{icon:"cil-money",class:"stat-icon"}),a("div",Ft,[a("div",Dt,i(e(s)("services.price")),1),a("div",Bt,i(P(d.value.price||0)),1)])]),a("div",Ut,[t(e(n),{icon:"cil-clock",class:"stat-icon"}),a("div",Tt,[a("div",Nt,i(e(s)("services.duration")),1),a("div",Pt,i(d.value.duration||0)+" min",1)])]),a("div",It,[t(e(n),{icon:"cil-calendar",class:"stat-icon"}),a("div",qt,[l[21]||(l[21]=a("div",{class:"stat-label"},"Total Bookings",-1)),a("div",Ht,i(d.value.total_bookings||0),1)])])]),a("div",Kt,[d.value.name?(u(),_("div",zt,[a("div",At,[t(e(n),{icon:"cil-text",class:"me-2"}),m(" "+i(e(s)("services.name"))+" (English) ",1)]),a("div",Wt,i(d.value.name),1)])):w("",!0),d.value.name_ar?(u(),_("div",Lt,[a("div",jt,[t(e(n),{icon:"cil-text",class:"me-2"}),m(" "+i(e(s)("services.nameAr")),1)]),a("div",Gt,i(d.value.name_ar),1)])):w("",!0),d.value.description?(u(),_("div",Rt,[a("div",Ot,[t(e(n),{icon:"cil-description",class:"me-2"}),m(" "+i(e(s)("services.description")),1)]),a("div",Qt,i(d.value.description),1)])):w("",!0),d.value.category?(u(),_("div",Yt,[a("div",Zt,[t(e(n),{icon:"cil-tag",class:"me-2"}),m(" "+i(e(s)("services.category")),1)]),a("div",Jt,i(d.value.category),1)])):w("",!0),d.value.created_at?(u(),_("div",Xt,[a("div",ea,[t(e(n),{icon:"cil-calendar",class:"me-2"}),m(" "+i(e(s)("common.createdAt")||"Created At"),1)]),a("div",ta,i(d.value.created_at?new Date(d.value.created_at).toLocaleDateString():"-"),1)])):w("",!0)])])):(u(),_("div",aa,[t(e(be)),a("p",sa,i(e(s)("common.loading")),1)]))]),_:1}),t(e(ee),null,{default:c(()=>[t(e(b),{color:"secondary",onClick:H},{default:c(()=>[m(i(e(s)("common.close")||"Close"),1)]),_:1}),t(e(b),{color:"primary",onClick:l[7]||(l[7]=()=>{H(),q(d.value)})},{default:c(()=>[t(e(n),{icon:"cil-pencil",class:"me-2"}),m(" "+i(e(s)("common.edit")),1)]),_:1})]),_:1})]),_:1},8,["visible"]),t(e(G),{visible:S.value||D.value,onClose:I,size:"lg"},{default:c(()=>[t(e(Z),null,{default:c(()=>[t(e(J),null,{default:c(()=>[m(i(D.value?e(s)("services.edit"):e(s)("services.addNew")),1)]),_:1})]),_:1}),t(e(X),null,{default:c(()=>[t(e(ye),null,{default:c(()=>[t(e(x),{modelValue:v.value.name,"onUpdate:modelValue":l[8]||(l[8]=o=>v.value.name=o),label:e(s)("services.name"),required:""},null,8,["modelValue","label"]),t(e(x),{modelValue:v.value.name_ar,"onUpdate:modelValue":l[9]||(l[9]=o=>v.value.name_ar=o),label:e(s)("services.nameAr")},null,8,["modelValue","label"]),t(e(Ce),{modelValue:v.value.description,"onUpdate:modelValue":l[10]||(l[10]=o=>v.value.description=o),label:e(s)("services.description"),rows:"3"},null,8,["modelValue","label"]),t(e(R),null,{default:c(()=>[t(e(V),{md:6},{default:c(()=>[t(e(x),{modelValue:v.value.price,"onUpdate:modelValue":l[11]||(l[11]=o=>v.value.price=o),type:"number",step:"0.001",label:e(s)("services.price"),required:""},null,8,["modelValue","label"])]),_:1}),t(e(V),{md:6},{default:c(()=>[t(e(x),{modelValue:v.value.duration,"onUpdate:modelValue":l[12]||(l[12]=o=>v.value.duration=o),type:"number",label:e(s)("services.duration"),required:""},null,8,["modelValue","label"])]),_:1})]),_:1}),t(e(x),{modelValue:v.value.category,"onUpdate:modelValue":l[13]||(l[13]=o=>v.value.category=o),label:e(s)("services.category")},null,8,["modelValue","label"]),t(e(ke),{modelValue:v.value.is_active,"onUpdate:modelValue":l[14]||(l[14]=o=>v.value.is_active=o),label:e(s)("status.active")},null,8,["modelValue","label"])]),_:1})]),_:1}),t(e(ee),null,{default:c(()=>[t(e(b),{color:"secondary",onClick:I},{default:c(()=>[m(i(e(s)("common.cancel")),1)]),_:1}),t(e(b),{color:"primary",onClick:ne},{default:c(()=>[m(i(e(s)("common.save")),1)]),_:1})]),_:1})]),_:1},8,["visible"]),t(Me,{"page-key":"services"})]))}},ha=xe(oa,[["__scopeId","data-v-c37c163b"]]);export{ha as default};
