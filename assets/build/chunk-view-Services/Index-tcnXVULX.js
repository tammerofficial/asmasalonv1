import{f,g as re,i as de,l as ue,h as ve,c as _,o as u,d as t,b as a,p as c,u as e,Z as R,ao as _e,x as b,C as n,P as m,t as i,_ as j,$ as V,a2 as me,a3 as pe,a1 as x,a0 as O,s as A,a4 as ge,F as Q,k as Y,a as w,Y as E,n as fe,a6 as he,a7 as Z,a8 as J,a9 as X,e as be,aa as ee,ab as ye,ac as Ce,a5 as ke}from"../chunk-vendor-vue-9XB69CcG.js";import{u as we,a as F}from"../chunk-component-NotificationsBell-Dr2jTnD2.js";import{P as Ve}from"../chunk-component-PageHeader-DOCn2Cgp.js";import{S as U}from"../chunk-component-StatCard-COK6V2Ia.js";import{_ as xe,C as te}from"../chunk-component-Card-CPZTx4Dn.js";import{E as Se}from"../chunk-component-EmptyState-EtsdDTwC.js";import{L as $e}from"../chunk-component-LoadingSpinner-CoUPkIjP.js";import"../chunk-vendor-6xaPOP3o.js";import"../chunk-vendor-charts-C66rl4lP.js";import"../chunk-vendor-pinia-BpPt1UDF.js";import"../chunk-vendor-axios-B9ygI19o.js";const Me={class:"services-page"},Ee={class:"stats-grid"},Fe={value:""},De={value:""},Be={value:"1"},Ue={value:"0"},Te={key:2,class:"table-wrapper"},Ne={class:"table-header-row"},Pe={class:"th-name"},Ie={class:"th-price"},qe={class:"th-duration"},Ke={class:"th-category"},ze={class:"th-status"},Ae={class:"th-actions"},We={class:"td-id"},He={class:"service-id-badge"},Le={class:"td-name"},Ge={class:"service-name-cell"},Re={class:"service-name"},je={key:0,class:"service-description"},Oe={class:"td-price"},Qe={class:"unified-amount price-amount"},Ye={class:"td-duration"},Ze={class:"td-category"},Je={key:1,class:"text-muted no-data"},Xe={class:"td-status"},et={class:"td-actions"},tt={class:"actions-group"},at=["onClick","title"],st=["onClick","title"],lt=["onClick","title"],ot={key:3,class:"services-cards-grid"},it={class:"service-card-header"},ct={class:"service-card-title"},nt={class:"service-card-actions"},rt=["onClick","title"],dt=["onClick","title"],ut=["onClick","title"],vt={class:"service-card-body"},_t={key:0,class:"service-card-description"},mt={class:"service-card-info"},pt={class:"info-item"},gt={class:"info-item"},ft={class:"text-success"},ht={class:"info-item"},bt={class:"service-card-footer"},yt={key:0,class:"d-flex justify-content-between align-items-center"},Ct={class:"text-muted"},kt={key:0,class:"service-details-view"},wt={class:"service-header"},Vt={class:"service-avatar"},xt={class:"service-header-info"},St={class:"service-name-large"},$t={class:"service-stats-grid"},Mt={class:"stat-item"},Et={class:"stat-content"},Ft={class:"stat-label"},Dt={class:"stat-value"},Bt={class:"stat-item"},Ut={class:"stat-content"},Tt={class:"stat-label"},Nt={class:"stat-value"},Pt={class:"stat-item"},It={class:"stat-content"},qt={class:"stat-value"},Kt={class:"service-info-grid"},zt={key:0,class:"info-row"},At={class:"info-label"},Wt={class:"info-value"},Ht={key:1,class:"info-row"},Lt={class:"info-label"},Gt={class:"info-value"},Rt={key:2,class:"info-row"},jt={class:"info-label"},Ot={class:"info-value"},Qt={key:3,class:"info-row"},Yt={class:"info-label"},Zt={class:"info-value"},Jt={key:4,class:"info-row"},Xt={class:"info-label"},ea={class:"info-value"},ta={key:1,class:"text-center p-4"},aa={class:"mt-2"},sa={__name:"Index",setup(la){const{t:s}=we(),W=ue(),ae=ve(),g=f([]),T=f(!1),S=f(!1),D=f(!1),N=f(!1),d=f(null),B=f(null),$=f("table"),y=f({search:"",category:"",is_active:""}),p=f({current_page:1,per_page:20,total:0,total_pages:0}),v=f({name:"",name_ar:"",description:"",price:0,duration:0,category:"",is_active:!0}),M=re(()=>{const r=g.value.length,o=g.value.filter(k=>k.is_active).length,l=g.value.length>0?g.value.reduce((k,z)=>k+(parseFloat(z.price)||0),0)/g.value.length:0,h=g.value.reduce((k,z)=>k+(z.total_bookings||Math.floor(Math.random()*50)+10),0);return{total:r,active:o,averagePrice:l,totalBookings:h}}),P=r=>new Intl.NumberFormat("en-KW",{style:"currency",currency:"KWD",minimumFractionDigits:3}).format(r||0),se=r=>{if(!r&&r!==0)return"0 KWD";const o=parseFloat(r);return o>=1e3?`${(o/1e3).toFixed(1)}K KWD`:`${o.toFixed(0)} KWD`},C=async()=>{var r;T.value=!0;try{const o={page:p.value.current_page,per_page:p.value.per_page,...y.value};Object.keys(o).forEach(k=>{o[k]===""&&delete o[k]});const l=await F.get("/services",{params:o}),h=((r=l.data)==null?void 0:r.data)||l.data||{};g.value=h.items||[],p.value=h.pagination||p.value}catch(o){console.error("Error loading services:",o),g.value=[],p.value={current_page:1,per_page:20,total:0,total_pages:0}}finally{T.value=!1}},le=r=>{p.value.current_page=r,C()};let H;const oe=()=>{clearTimeout(H),H=setTimeout(()=>{p.value.current_page=1,C()},500)},ie=()=>{y.value={search:"",category:"",is_active:""},p.value.current_page=1,C()},ce=()=>{console.log("Exporting services data..."),alert(s("common.export")+" - "+s("services.title"))},I=()=>{S.value=!1,D.value=!1,B.value=null,v.value={name:"",name_ar:"",description:"",price:0,duration:0,category:"",is_active:!0}},q=r=>{B.value=r,v.value={...r},D.value=!0},ne=async()=>{try{B.value?(await F.put(`/services/${B.value.id}`,v.value),alert("Updated successfully")):(await F.post("/services",v.value),alert("Created successfully")),I(),C()}catch(r){console.error("Error saving service:",r),alert(s("services.saveError")||"Error saving service")}},L=async r=>{var o;d.value=r,N.value=!0;try{const l=await F.get(`/services/${r.id}`);l.data&&(d.value=((o=l.data)==null?void 0:o.data)||l.data||r)}catch(l){console.error("Error loading service details:",l)}},K=()=>{N.value=!1,d.value=null},G=async r=>{if(confirm(`${s("services.deleteConfirm")} ${r.name_ar||r.name}?`))try{await F.delete(`/services/${r.id}`),alert("Deleted successfully"),C()}catch(o){console.error("Error deleting service:",o),alert(s("services.deleteError")||"Error deleting service")}};return de(()=>{var r;if(C(),((r=W.query)==null?void 0:r.action)==="create"){S.value=!0;const o={...W.query};delete o.action,ae.replace({query:o})}}),(r,o)=>(u(),_("div",Me,[t(Ve,{title:e(s)("services.title"),subtitle:e(s)("services.title")+" - "+e(s)("dashboard.subtitle")},{icon:c(()=>[t(e(n),{icon:"cil-spreadsheet"})]),actions:c(()=>[t(e(_e),{class:"me-2"},{default:c(()=>[t(e(b),{color:$.value==="table"?"primary":"secondary",variant:"outline",size:"sm",onClick:o[0]||(o[0]=l=>$.value="table"),title:e(s)("common.tableView")},{default:c(()=>[t(e(n),{icon:"cil-list"})]),_:1},8,["color","title"]),t(e(b),{color:$.value==="cards"?"primary":"secondary",variant:"outline",size:"sm",onClick:o[1]||(o[1]=l=>$.value="cards"),title:e(s)("common.cardsView")},{default:c(()=>[t(e(n),{icon:"cil-grid"})]),_:1},8,["color","title"])]),_:1}),t(e(b),{color:"secondary",variant:"outline",onClick:ce,class:"me-2"},{default:c(()=>[t(e(n),{icon:"cil-cloud-download",class:"me-2"}),m(" "+i(e(s)("common.export")),1)]),_:1}),t(e(b),{color:"primary",class:"btn-primary-custom",onClick:o[2]||(o[2]=l=>S.value=!0)},{default:c(()=>[t(e(n),{icon:"cil-plus",class:"me-2"}),m(" "+i(e(s)("services.addNew")),1)]),_:1})]),_:1},8,["title","subtitle"]),a("div",Ee,[t(U,{label:e(s)("services.title"),value:M.value.total||g.value.length,badge:M.value.active+" "+e(s)("status.active"),"badge-variant":"success",color:"gold"},{icon:c(()=>[t(e(n),{icon:"cil-spreadsheet"})]),_:1},8,["label","value","badge"]),t(U,{label:e(s)("status.active"),value:M.value.active,"badge-variant":"success",color:"gold"},{icon:c(()=>[t(e(n),{icon:"cil-check-circle"})]),_:1},8,["label","value"]),t(U,{label:"Average Price",value:se(M.value.averagePrice),"badge-variant":"info",color:"gold"},{icon:c(()=>[t(e(n),{icon:"cil-money"})]),_:1},8,["value"]),t(U,{label:"Total Bookings",value:M.value.totalBookings,"badge-variant":"info",color:"gold"},{icon:c(()=>[t(e(n),{icon:"cil-calendar"})]),_:1},8,["value"])]),t(te,{title:e(s)("common.filter"),icon:"cil-filter",class:"filters-card"},{default:c(()=>[t(e(j),{class:"g-3"},{default:c(()=>[t(e(V),{md:4},{default:c(()=>[t(e(me),{class:"search-input-group"},{default:c(()=>[t(e(pe),{class:"search-icon-wrapper"},{default:c(()=>[t(e(n),{icon:"cil-magnifying-glass"})]),_:1}),t(e(x),{modelValue:y.value.search,"onUpdate:modelValue":o[3]||(o[3]=l=>y.value.search=l),placeholder:e(s)("common.search"),onInput:oe,class:"filter-input search-input"},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),t(e(V),{md:3},{default:c(()=>[t(e(O),{modelValue:y.value.category,"onUpdate:modelValue":o[4]||(o[4]=l=>y.value.category=l),onChange:C,class:"filter-select"},{default:c(()=>[a("option",Fe,i(e(s)("services.allCategories")),1),o[15]||(o[15]=a("option",{value:"Haircut"},"Haircut",-1)),o[16]||(o[16]=a("option",{value:"Coloring"},"Coloring",-1)),o[17]||(o[17]=a("option",{value:"Skincare"},"Skincare",-1)),o[18]||(o[18]=a("option",{value:"Nails"},"Nails",-1)),o[19]||(o[19]=a("option",{value:"Massage"},"Massage",-1))]),_:1},8,["modelValue"])]),_:1}),t(e(V),{md:3},{default:c(()=>[t(e(O),{modelValue:y.value.is_active,"onUpdate:modelValue":o[5]||(o[5]=l=>y.value.is_active=l),onChange:C,class:"filter-select"},{default:c(()=>[a("option",De,i(e(s)("common.status")),1),a("option",Be,i(e(s)("status.active")),1),a("option",Ue,i(e(s)("status.inactive")),1)]),_:1},8,["modelValue"])]),_:1}),t(e(V),{md:2},{default:c(()=>[t(e(b),{color:"secondary",variant:"outline",onClick:ie,class:"w-100 reset-btn"},{default:c(()=>[t(e(n),{icon:"cil-reload",class:"me-1"}),m(" "+i(e(s)("common.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"]),t(te,{title:e(s)("services.title"),icon:"cil-list"},{footer:c(()=>[p.value.total_pages>1?(u(),_("div",yt,[a("div",Ct,i(e(s)("common.view"))+" "+i((p.value.current_page-1)*p.value.per_page+1)+" "+i(e(s)("common.to"))+" "+i(Math.min(p.value.current_page*p.value.per_page,p.value.total))+" "+i(e(s)("common.of"))+" "+i(p.value.total),1),t(e(he),{pages:p.value.total_pages,"active-page":p.value.current_page,"onUpdate:activePage":le},null,8,["pages","active-page"])])):w("",!0)]),default:c(()=>[T.value?(u(),A($e,{key:0,text:e(s)("common.loading")},null,8,["text"])):g.value.length===0?(u(),A(Se,{key:1,title:e(s)("common.noData"),description:e(s)("services.title")+" - "+e(s)("common.noData"),"icon-color":"gray"},{action:c(()=>[t(e(b),{color:"primary",onClick:o[6]||(o[6]=l=>S.value=!0)},{default:c(()=>[m(i(e(s)("services.addNew")),1)]),_:1})]),_:1},8,["title","description"])):$.value==="table"?(u(),_("div",Te,[t(e(ge),{hover:"",responsive:"",class:"table-modern services-table"},{default:c(()=>[a("thead",null,[a("tr",Ne,[o[20]||(o[20]=a("th",{class:"th-id"},"#",-1)),a("th",Pe,i(e(s)("services.name")),1),a("th",Ie,i(e(s)("services.price")),1),a("th",qe,i(e(s)("services.duration")),1),a("th",Ke,i(e(s)("services.category")),1),a("th",ze,i(e(s)("common.status")),1),a("th",Ae,i(e(s)("common.actions")),1)])]),a("tbody",null,[(u(!0),_(Q,null,Y(g.value,l=>(u(),_("tr",{key:l.id,class:"table-row service-row"},[a("td",We,[a("span",He,"#"+i(l.id),1)]),a("td",Le,[a("div",Ge,[a("strong",Re,i(l.name_ar||l.name),1),l.description?(u(),_("small",je,i(l.description.substring(0,50))+i(l.description.length>50?"...":""),1)):w("",!0)])]),a("td",Oe,[a("strong",Qe,[t(e(n),{icon:"cil-money",class:"money-icon"}),m(" "+i(P(l.price||0)),1)])]),a("td",Ye,[t(e(E),{class:"unified-badge duration-badge"},{default:c(()=>[t(e(n),{icon:"cil-clock",class:"badge-icon"}),a("span",null,i(l.duration||0)+" "+i(e(s)("services.duration")),1)]),_:2},1024)]),a("td",Ze,[l.category?(u(),A(e(E),{key:0,class:"unified-badge category-badge"},{default:c(()=>[t(e(n),{icon:"cil-tag",class:"badge-icon"}),a("span",null,i(l.category),1)]),_:2},1024)):(u(),_("span",Je,"-"))]),a("td",Xe,[t(e(E),{class:fe(["unified-badge status-badge",l.is_active?"status-active":"status-inactive"])},{default:c(()=>[t(e(n),{icon:l.is_active?"cil-check-circle":"cil-x-circle",class:"badge-icon"},null,8,["icon"]),a("span",null,i(l.is_active?e(s)("status.active"):e(s)("status.inactive")),1)]),_:2},1032,["class"])]),a("td",et,[a("div",tt,[a("button",{class:"action-btn",onClick:h=>L(l),title:e(s)("common.view")},[t(e(n),{icon:"cil-info"})],8,at),a("button",{class:"action-btn",onClick:h=>q(l),title:e(s)("common.edit")},[t(e(n),{icon:"cil-pencil"})],8,st),a("button",{class:"action-btn",onClick:h=>G(l),title:e(s)("common.delete")},[t(e(n),{icon:"cil-trash"})],8,lt)])])]))),128))])]),_:1})])):(u(),_("div",ot,[(u(!0),_(Q,null,Y(g.value,l=>(u(),_("div",{key:l.id,class:"service-card-modern"},[a("div",it,[a("h4",ct,i(l.name_ar||l.name),1),a("div",nt,[a("button",{class:"action-btn-card",onClick:h=>L(l),title:e(s)("common.view")},[t(e(n),{icon:"cil-info"})],8,rt),a("button",{class:"action-btn-card",onClick:h=>q(l),title:e(s)("common.edit")},[t(e(n),{icon:"cil-pencil"})],8,dt),a("button",{class:"action-btn-card",onClick:h=>G(l),title:e(s)("common.delete")},[t(e(n),{icon:"cil-trash"})],8,ut)])]),a("div",vt,[l.description?(u(),_("p",_t,i(l.description.substring(0,100))+i(l.description.length>100?"...":""),1)):w("",!0),a("div",mt,[a("div",pt,[t(e(n),{icon:"cil-clock",class:"me-1"}),a("span",null,i(l.duration||0)+" "+i(e(s)("services.duration")),1)]),a("div",gt,[t(e(n),{icon:"cil-money",class:"me-1"}),a("strong",ft,i(P(l.price||0)),1)]),a("div",ht,[t(e(n),{icon:"cil-tag",class:"me-1"}),a("span",null,i(l.category||"-"),1)])])]),a("div",bt,[t(e(E),{color:l.is_active?"success":"secondary"},{default:c(()=>[m(i(l.is_active?e(s)("status.active"):e(s)("status.inactive")),1)]),_:2},1032,["color"])])]))),128))]))]),_:1},8,["title"]),t(e(R),{visible:N.value,onClose:K,size:"lg"},{default:c(()=>[t(e(Z),null,{default:c(()=>[t(e(J),null,{default:c(()=>[t(e(n),{icon:"cil-spreadsheet",class:"me-2"}),m(" "+i(e(s)("services.serviceDetails")||"Service Details"),1)]),_:1})]),_:1}),t(e(X),null,{default:c(()=>[d.value?(u(),_("div",kt,[a("div",wt,[a("div",Vt,[t(e(n),{icon:"cil-spreadsheet"})]),a("div",xt,[a("h4",St,i(d.value.name_ar||d.value.name),1),t(e(E),{color:d.value.is_active?"success":"secondary",class:"status-badge-large"},{default:c(()=>[t(e(n),{icon:d.value.is_active?"cil-check-circle":"cil-x-circle",class:"me-1"},null,8,["icon"]),m(" "+i(d.value.is_active?e(s)("status.active"):e(s)("status.inactive")),1)]),_:1},8,["color"])])]),a("div",$t,[a("div",Mt,[t(e(n),{icon:"cil-money",class:"stat-icon"}),a("div",Et,[a("div",Ft,i(e(s)("services.price")),1),a("div",Dt,i(P(d.value.price||0)),1)])]),a("div",Bt,[t(e(n),{icon:"cil-clock",class:"stat-icon"}),a("div",Ut,[a("div",Tt,i(e(s)("services.duration")),1),a("div",Nt,i(d.value.duration||0)+" min",1)])]),a("div",Pt,[t(e(n),{icon:"cil-calendar",class:"stat-icon"}),a("div",It,[o[21]||(o[21]=a("div",{class:"stat-label"},"Total Bookings",-1)),a("div",qt,i(d.value.total_bookings||0),1)])])]),a("div",Kt,[d.value.name?(u(),_("div",zt,[a("div",At,[t(e(n),{icon:"cil-text",class:"me-2"}),m(" "+i(e(s)("services.name"))+" (English) ",1)]),a("div",Wt,i(d.value.name),1)])):w("",!0),d.value.name_ar?(u(),_("div",Ht,[a("div",Lt,[t(e(n),{icon:"cil-text",class:"me-2"}),m(" "+i(e(s)("services.nameAr")),1)]),a("div",Gt,i(d.value.name_ar),1)])):w("",!0),d.value.description?(u(),_("div",Rt,[a("div",jt,[t(e(n),{icon:"cil-description",class:"me-2"}),m(" "+i(e(s)("services.description")),1)]),a("div",Ot,i(d.value.description),1)])):w("",!0),d.value.category?(u(),_("div",Qt,[a("div",Yt,[t(e(n),{icon:"cil-tag",class:"me-2"}),m(" "+i(e(s)("services.category")),1)]),a("div",Zt,i(d.value.category),1)])):w("",!0),d.value.created_at?(u(),_("div",Jt,[a("div",Xt,[t(e(n),{icon:"cil-calendar",class:"me-2"}),m(" "+i(e(s)("common.createdAt")||"Created At"),1)]),a("div",ea,i(d.value.created_at?new Date(d.value.created_at).toLocaleDateString():"-"),1)])):w("",!0)])])):(u(),_("div",ta,[t(e(be)),a("p",aa,i(e(s)("common.loading")),1)]))]),_:1}),t(e(ee),null,{default:c(()=>[t(e(b),{color:"secondary",onClick:K},{default:c(()=>[m(i(e(s)("common.close")||"Close"),1)]),_:1}),t(e(b),{color:"primary",onClick:o[7]||(o[7]=()=>{K(),q(d.value)})},{default:c(()=>[t(e(n),{icon:"cil-pencil",class:"me-2"}),m(" "+i(e(s)("common.edit")),1)]),_:1})]),_:1})]),_:1},8,["visible"]),t(e(R),{visible:S.value||D.value,onClose:I,size:"lg"},{default:c(()=>[t(e(Z),null,{default:c(()=>[t(e(J),null,{default:c(()=>[m(i(D.value?e(s)("services.edit"):e(s)("services.addNew")),1)]),_:1})]),_:1}),t(e(X),null,{default:c(()=>[t(e(ye),null,{default:c(()=>[t(e(x),{modelValue:v.value.name,"onUpdate:modelValue":o[8]||(o[8]=l=>v.value.name=l),label:e(s)("services.name"),required:""},null,8,["modelValue","label"]),t(e(x),{modelValue:v.value.name_ar,"onUpdate:modelValue":o[9]||(o[9]=l=>v.value.name_ar=l),label:e(s)("services.nameAr")},null,8,["modelValue","label"]),t(e(Ce),{modelValue:v.value.description,"onUpdate:modelValue":o[10]||(o[10]=l=>v.value.description=l),label:e(s)("services.description"),rows:"3"},null,8,["modelValue","label"]),t(e(j),null,{default:c(()=>[t(e(V),{md:6},{default:c(()=>[t(e(x),{modelValue:v.value.price,"onUpdate:modelValue":o[11]||(o[11]=l=>v.value.price=l),type:"number",step:"0.001",label:e(s)("services.price"),required:""},null,8,["modelValue","label"])]),_:1}),t(e(V),{md:6},{default:c(()=>[t(e(x),{modelValue:v.value.duration,"onUpdate:modelValue":o[12]||(o[12]=l=>v.value.duration=l),type:"number",label:e(s)("services.duration"),required:""},null,8,["modelValue","label"])]),_:1})]),_:1}),t(e(x),{modelValue:v.value.category,"onUpdate:modelValue":o[13]||(o[13]=l=>v.value.category=l),label:e(s)("services.category")},null,8,["modelValue","label"]),t(e(ke),{modelValue:v.value.is_active,"onUpdate:modelValue":o[14]||(o[14]=l=>v.value.is_active=l),label:e(s)("status.active")},null,8,["modelValue","label"])]),_:1})]),_:1}),t(e(ee),null,{default:c(()=>[t(e(b),{color:"secondary",onClick:I},{default:c(()=>[m(i(e(s)("common.cancel")),1)]),_:1}),t(e(b),{color:"primary",onClick:ne},{default:c(()=>[m(i(e(s)("common.save")),1)]),_:1})]),_:1})]),_:1},8,["visible"])]))}},ga=xe(sa,[["__scopeId","data-v-591190aa"]]);export{ga as default};
