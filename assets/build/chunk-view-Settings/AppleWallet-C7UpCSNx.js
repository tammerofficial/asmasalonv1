import{f as y,i as I,c as v,o as u,d as a,s as x,p as o,u as e,a as C,C as m,b as s,W as R,_ as k,$ as p,P as d,t as i,a1 as w,Y as W,a5 as E,x as T,e as M}from"../chunk-vendor-vue-CVODRAc9.js";import{u as N,a as D}from"../chunk-component-NotificationsBell-Bqoxw3gb.js";import{a as H}from"../chunk-view-Bookings/BookingAppearance-bsKTQ7Gu.js";import{P as U}from"../chunk-component-PageHeader-DIMefZ9l.js";import{_ as B,C as S}from"../chunk-component-Card-DAbGoLxt.js";import{L as F}from"../chunk-component-LoadingSpinner-DYzABkFM.js";import"../chunk-vendor-6xaPOP3o.js";import"../chunk-vendor-charts-C66rl4lP.js";import"../chunk-vendor-pinia-DSPKUyr1.js";import"../chunk-vendor-axios-B9ygI19o.js";import"../chunk-component-Sidebar-EPa-hzVC.js";import"../chunk-view-Bookings/BookingFormPreview-CDH9ZIF-.js";const q={class:"apple-wallet-settings-page"},L={key:1},Y={class:"form-label"},z={class:"text-muted"},G={class:"form-label"},O={class:"text-muted"},$={class:"form-label"},j={class:"text-muted"},J={key:0,class:"mt-2"},K={key:1,class:"mt-2"},Q={class:"form-label"},X={class:"text-muted"},Z={class:"form-label"},ee={class:"text-muted"},te={key:0,class:"mt-2"},ae={class:"text-muted d-block"},le={class:"alert alert-info"},se={class:"mb-0 mt-2"},ie={class:"d-flex align-items-center"},oe={class:"d-flex align-items-center"},re={__name:"AppleWallet",setup(ce){const{t}=N(),h=H(),b=y(!0),_=y(!1),r=y(null),c=y({team_id:"",pass_type_id:"pass.com.asmaasalon.loyalty",certificate_path:"",certificate_password:"",wwdr_certificate_path:"",sandbox_mode:!1}),P=async()=>{var f;try{b.value=!0;const l=await D.get("/settings/apple-wallet");(f=l.data)!=null&&f.success&&(r.value=l.data.data||{},c.value={team_id:r.value.team_id||"",pass_type_id:r.value.pass_type_id||"pass.com.asmaasalon.loyalty",certificate_path:r.value.certificate_path||"",certificate_password:"",wwdr_certificate_path:r.value.wwdr_certificate_path||"",sandbox_mode:r.value.sandbox_mode||!1})}catch(l){console.error("Error loading Apple Wallet settings:",l),h.error(t("common.errorLoading")||"Error loading settings")}finally{b.value=!1}},A=async()=>{var f,l,n,V;try{_.value=!0;const g=await D.put("/settings/apple-wallet",c.value);(f=g.data)!=null&&f.success?(h.success(t("settings.appleWallet.saved")||"Settings saved successfully"),await P()):h.error(((l=g.data)==null?void 0:l.message)||t("common.errorSaving")||"Error saving settings")}catch(g){console.error("Error saving Apple Wallet settings:",g),h.error(((V=(n=g.response)==null?void 0:n.data)==null?void 0:V.message)||t("common.errorSaving")||"Error saving settings")}finally{_.value=!1}};return I(()=>{P()}),(f,l)=>(u(),v("div",q,[a(U,{title:e(t)("settings.appleWallet.title")||"Apple Wallet Settings",subtitle:e(t)("settings.appleWallet.subtitle")||"Configure Apple Wallet pass generation"},{icon:o(()=>[a(e(m),{icon:"cil-wallet"})]),_:1},8,["title","subtitle"]),b.value?(u(),x(F,{key:0,text:e(t)("common.loading")},null,8,["text"])):(u(),v("div",L,[a(S,{title:e(t)("settings.appleWallet.configuration")||"Configuration",icon:"cil-settings",class:"mb-4"},{default:o(()=>[s("form",{onSubmit:R(A,["prevent"])},[a(e(k),{class:"g-3"},{default:o(()=>[a(e(p),{md:6},{default:o(()=>[s("label",Y,[d(i(e(t)("settings.appleWallet.teamId")||"Apple Team ID")+" ",1),l[6]||(l[6]=s("span",{class:"text-danger"},"*",-1))]),a(e(w),{modelValue:c.value.team_id,"onUpdate:modelValue":l[0]||(l[0]=n=>c.value.team_id=n),placeholder:e(t)("settings.appleWallet.teamIdPlaceholder")||"ABC123DEF4",required:""},null,8,["modelValue","placeholder"]),s("small",z,i(e(t)("settings.appleWallet.teamIdHelp")||"Your Apple Developer Team ID"),1)]),_:1}),a(e(p),{md:6},{default:o(()=>[s("label",G,[d(i(e(t)("settings.appleWallet.passTypeId")||"Pass Type ID")+" ",1),l[7]||(l[7]=s("span",{class:"text-danger"},"*",-1))]),a(e(w),{modelValue:c.value.pass_type_id,"onUpdate:modelValue":l[1]||(l[1]=n=>c.value.pass_type_id=n),placeholder:e(t)("settings.appleWallet.passTypeIdPlaceholder")||"pass.com.asmaasalon.loyalty",required:""},null,8,["modelValue","placeholder"]),s("small",O,i(e(t)("settings.appleWallet.passTypeIdHelp")||"Pass Type Identifier from Apple Developer"),1)]),_:1}),a(e(p),{md:12},{default:o(()=>[s("label",$,[d(i(e(t)("settings.appleWallet.certificatePath")||"Certificate File Path")+" ",1),l[8]||(l[8]=s("span",{class:"text-danger"},"*",-1))]),a(e(w),{modelValue:c.value.certificate_path,"onUpdate:modelValue":l[2]||(l[2]=n=>c.value.certificate_path=n),placeholder:e(t)("settings.appleWallet.certificatePathPlaceholder")||"certificate.p12",required:""},null,8,["modelValue","placeholder"]),s("small",j,i(e(t)("settings.appleWallet.certificatePathHelp")||"Certificate file name (must be uploaded to certs directory)"),1),r.value.certificate_exists?(u(),v("div",J,[a(e(W),{color:"success"},{default:o(()=>[a(e(m),{icon:"cil-check-circle",class:"me-1"}),d(" "+i(e(t)("settings.appleWallet.certificateFound")||"Certificate found"),1)]),_:1})])):c.value.certificate_path?(u(),v("div",K,[a(e(W),{color:"warning"},{default:o(()=>[a(e(m),{icon:"cil-warning",class:"me-1"}),d(" "+i(e(t)("settings.appleWallet.certificateNotFound")||"Certificate not found"),1)]),_:1})])):C("",!0)]),_:1}),a(e(p),{md:12},{default:o(()=>[s("label",Q,[d(i(e(t)("settings.appleWallet.certificatePassword")||"Certificate Password")+" ",1),l[9]||(l[9]=s("span",{class:"text-danger"},"*",-1))]),a(e(w),{modelValue:c.value.certificate_password,"onUpdate:modelValue":l[3]||(l[3]=n=>c.value.certificate_password=n),type:"password",placeholder:e(t)("settings.appleWallet.certificatePasswordPlaceholder")||"Enter certificate password",required:""},null,8,["modelValue","placeholder"]),s("small",X,i(e(t)("settings.appleWallet.certificatePasswordHelp")||"Password for the .p12 certificate file"),1)]),_:1}),a(e(p),{md:12},{default:o(()=>[s("label",Z,i(e(t)("settings.appleWallet.wwdrCertificatePath")||"WWDR Certificate Path"),1),a(e(w),{modelValue:c.value.wwdr_certificate_path,"onUpdate:modelValue":l[4]||(l[4]=n=>c.value.wwdr_certificate_path=n),placeholder:e(t)("settings.appleWallet.wwdrCertificatePathPlaceholder")||"AppleWWDRCAG3.cer"},null,8,["modelValue","placeholder"]),s("small",ee,i(e(t)("settings.appleWallet.wwdrCertificatePathHelp")||"Apple Worldwide Developer Relations Certificate (optional but recommended)"),1),r.value.wwdr_certificate_exists?(u(),v("div",te,[a(e(W),{color:"success"},{default:o(()=>[a(e(m),{icon:"cil-check-circle",class:"me-1"}),d(" "+i(e(t)("settings.appleWallet.wwdrCertificateFound")||"WWDR Certificate found"),1)]),_:1})])):C("",!0)]),_:1}),a(e(p),{md:12},{default:o(()=>[a(e(E),{modelValue:c.value.sandbox_mode,"onUpdate:modelValue":l[5]||(l[5]=n=>c.value.sandbox_mode=n),label:e(t)("settings.appleWallet.sandboxMode")||"Use Sandbox Mode (for testing)"},null,8,["modelValue","label"]),s("small",ae,i(e(t)("settings.appleWallet.sandboxModeHelp")||"Enable sandbox mode for testing passes before production"),1)]),_:1}),a(e(p),{md:12},{default:o(()=>[s("div",le,[a(e(m),{icon:"cil-info",class:"me-2"}),s("strong",null,i(e(t)("settings.appleWallet.uploadNote")||"How to upload certificates:"),1),s("ol",se,[s("li",null,[d(i(e(t)("settings.appleWallet.uploadNote1")||"Upload your .p12 certificate file to:")+" ",1),s("code",null,i(r.value.certs_directory||"/wp-content/uploads/asmaa-salon/certs/"),1)]),s("li",null,i(e(t)("settings.appleWallet.uploadNote2")||"Enter only the filename (e.g., certificate.p12) in the Certificate Path field"),1),s("li",null,i(e(t)("settings.appleWallet.uploadNote3")||"Download WWDR certificate from Apple and upload it to the same directory"),1)])])]),_:1}),a(e(p),{md:12},{default:o(()=>[a(e(T),{type:"submit",color:"primary",disabled:_.value,class:"btn-primary-custom"},{default:o(()=>[_.value?(u(),x(e(M),{key:0,size:"sm",class:"me-2"})):(u(),x(e(m),{key:1,icon:"cil-save",class:"me-2"})),d(" "+i(_.value?e(t)("common.saving")||"Saving...":e(t)("common.save")||"Save Settings"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})],32)]),_:1},8,["title"]),r.value?(u(),x(S,{key:0,title:e(t)("settings.appleWallet.status")||"Status",icon:"cil-info"},{default:o(()=>[a(e(k),{class:"g-3"},{default:o(()=>[a(e(p),{md:6},{default:o(()=>[s("div",ie,[a(e(W),{color:r.value.certificate_exists?"success":"danger",class:"me-3"},{default:o(()=>[a(e(m),{icon:r.value.certificate_exists?"cil-check-circle":"cil-x-circle",class:"me-1"},null,8,["icon"]),d(" "+i(r.value.certificate_exists?e(t)("settings.appleWallet.certificateReady")||"Certificate Ready":e(t)("settings.appleWallet.certificateMissing")||"Certificate Missing"),1)]),_:1},8,["color"])])]),_:1}),a(e(p),{md:6},{default:o(()=>[s("div",oe,[a(e(W),{color:r.value.wwdr_certificate_exists?"success":"warning",class:"me-3"},{default:o(()=>[a(e(m),{icon:r.value.wwdr_certificate_exists?"cil-check-circle":"cil-warning",class:"me-1"},null,8,["icon"]),d(" "+i(r.value.wwdr_certificate_exists?e(t)("settings.appleWallet.wwdrReady")||"WWDR Ready":e(t)("settings.appleWallet.wwdrMissing")||"WWDR Missing (Optional)"),1)]),_:1},8,["color"])])]),_:1})]),_:1})]),_:1},8,["title"])):C("",!0)]))]))}},ye=B(re,[["__scopeId","data-v-ff791284"]]);export{ye as default};
