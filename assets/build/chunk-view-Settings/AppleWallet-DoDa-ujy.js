import{u as P,a as k}from"../chunk-component-NotificationsBell-B2dAMSJx.js";import{u as D}from"../chunk-view-AppleWallet/Simulator-FWAoI2CS.js";import{f as h,j as A,c as m,o as f,d as l,s as v,w as o,u as e,a as w,C as u,b as a,$ as C,a2 as n,P as c,t as i,a3 as g,Y as _,ad as I}from"../chunk-vendor-vue-Dg0iJD_h.js";import{P as R}from"../chunk-component-PageHeader-CswlebSl.js";import{_ as T,C as b}from"../chunk-component-Card-BEqwRdY0.js";import{L as V}from"../chunk-component-LoadingSpinner-BdAD-dqG.js";import"../chunk-vendor-pinia-AvH0NMyG.js";import"../chunk-vendor-axios-B9ygI19o.js";import"../chunk-vendor-Ltsl4QyH.js";const N={class:"apple-wallet-settings-page"},H={key:1},M={class:"read-only-settings"},E={class:"form-label"},F={class:"text-muted"},B={class:"form-label"},S={class:"text-muted"},U={class:"form-label"},L={class:"text-muted"},q={key:0,class:"mt-2"},Y={key:1,class:"mt-2"},j={class:"form-label"},G={class:"text-muted"},O={class:"form-label"},$={class:"text-muted"},z={key:0,class:"mt-2"},J={class:"text-muted d-block"},K={class:"alert alert-info"},Q={class:"mb-0 mt-2"},X={class:"alert alert-warning"},Z={class:"d-flex align-items-center"},ee={class:"d-flex align-items-center"},te={__name:"AppleWallet",setup(le){const{t}=P(),y=D(),W=h(!0),r=h(null),x=async()=>{var p;try{W.value=!0;const s=await k.get("/settings/apple-wallet");(p=s.data)!=null&&p.success&&(r.value=s.data.data||{})}catch(s){console.error("Error loading Apple Wallet settings:",s),y.error(t("common.errorLoading")||"Error loading settings")}finally{W.value=!1}};return A(()=>{x()}),(p,s)=>(f(),m("div",N,[l(R,{title:e(t)("settings.appleWallet.title")||"Apple Wallet Settings",subtitle:e(t)("settings.appleWallet.subtitle")||"Configure Apple Wallet pass generation"},{icon:o(()=>[l(e(u),{icon:"cil-wallet"})]),_:1},8,["title","subtitle"]),W.value?(f(),v(V,{key:0,text:e(t)("common.loading")},null,8,["text"])):(f(),m("div",H,[l(b,{title:e(t)("settings.appleWallet.configuration")||"Configuration",icon:"cil-settings",class:"mb-4"},{default:o(()=>[a("div",M,[l(e(C),{class:"g-3"},{default:o(()=>[l(e(n),{md:6},{default:o(()=>[a("label",E,[c(i(e(t)("settings.appleWallet.teamId")||"Apple Team ID")+" ",1),s[2]||(s[2]=a("span",{class:"text-danger"},"*",-1))]),l(e(g),{value:r.value.team_id,placeholder:e(t)("settings.appleWallet.teamIdPlaceholder")||"ABC123DEF4",readonly:"",disabled:""},null,8,["value","placeholder"]),a("small",F,i(e(t)("settings.appleWallet.teamIdHelp")||"Your Apple Developer Team ID"),1)]),_:1}),l(e(n),{md:6},{default:o(()=>[a("label",B,[c(i(e(t)("settings.appleWallet.passTypeId")||"Pass Type ID")+" ",1),s[3]||(s[3]=a("span",{class:"text-danger"},"*",-1))]),l(e(g),{value:r.value.pass_type_id,placeholder:e(t)("settings.appleWallet.passTypeIdPlaceholder")||"pass.com.asmaasalon.loyalty",readonly:"",disabled:""},null,8,["value","placeholder"]),a("small",S,i(e(t)("settings.appleWallet.passTypeIdHelp")||"Pass Type Identifier from Apple Developer"),1)]),_:1}),l(e(n),{md:12},{default:o(()=>[a("label",U,[c(i(e(t)("settings.appleWallet.certificatePath")||"Certificate File Path")+" ",1),s[4]||(s[4]=a("span",{class:"text-danger"},"*",-1))]),l(e(g),{modelValue:p.form.certificate_path,"onUpdate:modelValue":s[0]||(s[0]=d=>p.form.certificate_path=d),placeholder:e(t)("settings.appleWallet.certificatePathPlaceholder")||"certificate.p12",required:""},null,8,["modelValue","placeholder"]),a("small",L,i(e(t)("settings.appleWallet.certificatePathHelp")||"Certificate file name (must be uploaded to certs directory)"),1),r.value.certificate_exists?(f(),m("div",q,[l(e(_),{color:"success"},{default:o(()=>[l(e(u),{icon:"cil-check-circle",class:"me-1"}),c(" "+i(e(t)("settings.appleWallet.certificateFound")||"Certificate found"),1)]),_:1})])):p.form.certificate_path?(f(),m("div",Y,[l(e(_),{color:"warning"},{default:o(()=>[l(e(u),{icon:"cil-warning",class:"me-1"}),c(" "+i(e(t)("settings.appleWallet.certificateNotFound")||"Certificate not found"),1)]),_:1})])):w("",!0)]),_:1}),l(e(n),{md:12},{default:o(()=>[a("label",j,[c(i(e(t)("settings.appleWallet.certificatePassword")||"Certificate Password")+" ",1),s[5]||(s[5]=a("span",{class:"text-danger"},"*",-1))]),l(e(g),{modelValue:p.form.certificate_password,"onUpdate:modelValue":s[1]||(s[1]=d=>p.form.certificate_password=d),type:"password",placeholder:e(t)("settings.appleWallet.certificatePasswordPlaceholder")||"Enter certificate password",required:""},null,8,["modelValue","placeholder"]),a("small",G,i(e(t)("settings.appleWallet.certificatePasswordHelp")||"Password for the .p12 certificate file"),1)]),_:1}),l(e(n),{md:12},{default:o(()=>{var d;return[a("label",O,i(e(t)("settings.appleWallet.wwdrCertificatePath")||"WWDR Certificate Path"),1),l(e(g),{value:(d=r.value)==null?void 0:d.wwdr_certificate_path,placeholder:e(t)("settings.appleWallet.wwdrCertificatePathPlaceholder")||"AppleWWDRCAG3.cer",readonly:"",disabled:""},null,8,["value","placeholder"]),a("small",$,i(e(t)("settings.appleWallet.wwdrCertificatePathHelp")||"Apple Worldwide Developer Relations Certificate (optional but recommended)"),1),r.value.wwdr_certificate_exists?(f(),m("div",z,[l(e(_),{color:"success"},{default:o(()=>[l(e(u),{icon:"cil-check-circle",class:"me-1"}),c(" "+i(e(t)("settings.appleWallet.wwdrCertificateFound")||"WWDR Certificate found"),1)]),_:1})])):w("",!0)]}),_:1}),l(e(n),{md:12},{default:o(()=>{var d;return[l(e(I),{checked:(d=r.value)==null?void 0:d.sandbox_mode,label:e(t)("settings.appleWallet.sandboxMode")||"Use Sandbox Mode (for testing)",disabled:""},null,8,["checked","label"]),a("small",J,i(e(t)("settings.appleWallet.sandboxModeHelp")||"Enable sandbox mode for testing passes before production"),1)]}),_:1}),l(e(n),{md:12},{default:o(()=>[a("div",K,[l(e(u),{icon:"cil-info",class:"me-2"}),a("strong",null,i(e(t)("settings.appleWallet.uploadNote")||"How to upload certificates:"),1),a("ol",Q,[a("li",null,[c(i(e(t)("settings.appleWallet.uploadNote1")||"Upload your .p12 certificate file to:")+" ",1),a("code",null,i(r.value.certs_directory||"/wp-content/uploads/asmaa-salon/certs/"),1)]),a("li",null,i(e(t)("settings.appleWallet.uploadNote2")||"Enter only the filename (e.g., certificate.p12) in the Certificate Path field"),1),a("li",null,i(e(t)("settings.appleWallet.uploadNote3")||"Download WWDR certificate from Apple and upload it to the same directory"),1)])])]),_:1}),l(e(n),{md:12},{default:o(()=>[a("div",X,[l(e(u),{icon:"cil-warning",class:"me-2"}),s[6]||(s[6]=a("strong",null,"ملاحظة:",-1)),s[7]||(s[7]=c(" الإعدادات محددة في ملف الثوابت المركزي: ",-1)),s[8]||(s[8]=a("code",null,"includes/Config/Apple_Wallet_Config.php",-1)),s[9]||(s[9]=a("br",null,null,-1)),s[10]||(s[10]=c(" للتعديل، قم بتحرير الملف مباشرة ثم أعد تحميل الصفحة. ",-1))])]),_:1})]),_:1})])]),_:1},8,["title"]),r.value?(f(),v(b,{key:0,title:e(t)("settings.appleWallet.status")||"Status",icon:"cil-info"},{default:o(()=>[l(e(C),{class:"g-3"},{default:o(()=>[l(e(n),{md:6},{default:o(()=>[a("div",Z,[l(e(_),{color:r.value.certificate_exists?"success":"danger",class:"me-3"},{default:o(()=>[l(e(u),{icon:r.value.certificate_exists?"cil-check-circle":"cil-x-circle",class:"me-1"},null,8,["icon"]),c(" "+i(r.value.certificate_exists?e(t)("settings.appleWallet.certificateReady")||"Certificate Ready":e(t)("settings.appleWallet.certificateMissing")||"Certificate Missing"),1)]),_:1},8,["color"])])]),_:1}),l(e(n),{md:6},{default:o(()=>[a("div",ee,[l(e(_),{color:r.value.wwdr_certificate_exists?"success":"warning",class:"me-3"},{default:o(()=>[l(e(u),{icon:r.value.wwdr_certificate_exists?"cil-check-circle":"cil-warning",class:"me-1"},null,8,["icon"]),c(" "+i(r.value.wwdr_certificate_exists?e(t)("settings.appleWallet.wwdrReady")||"WWDR Ready":e(t)("settings.appleWallet.wwdrMissing")||"WWDR Missing (Optional)"),1)]),_:1},8,["color"])])]),_:1})]),_:1})]),_:1},8,["title"])):w("",!0)]))]))}},ue=T(te,[["__scopeId","data-v-85921e72"]]);export{ue as default};
